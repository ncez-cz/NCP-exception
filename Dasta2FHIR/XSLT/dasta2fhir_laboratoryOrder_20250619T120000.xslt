<?xml version="1.0" encoding="UTF-8"?>
<!--
This file was generated by Altova MapForce 2024r2sp1

YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.

Refer to the Altova MapForce Documentation for further details.
http://www.altova.com/mapforce
-->
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://hl7.org/fhir" xmlns:provisio="http://www.altova.com/MapForce/UDF/provisio" xmlns:tbf="http://www.altova.com/MapForce/UDF/tbf" xmlns:vmf="http://www.altova.com/MapForce/UDF/vmf" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:ns1="urn:cz-mzcr:ns:dasta:ds4:ds_dasta" xmlns:ns2="urn:cz-mzcr:ns:dasta:ds4:ds_ip" exclude-result-prefixes="ns0 provisio tbf vmf xs fn ns1 ns2">
	<xsl:template name="provisio:Reference_Specimen">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Specimen/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Specimen">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('Specimen/', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:lod">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lod" select="()"/>
		<xsl:variable name="var4_guid" as="node()?" select="$lod/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_Observation" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Observation">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Observation">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var3_create_Observation" as="node()">
				<Observation>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lod/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
						<xsl:for-each select="$lod/@mtv_klic">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAJT.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<valueQuantity>
						<xsl:for-each select="$lod/@hodnota">
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</xsl:for-each>
						<xsl:for-each select="$lod/@priznak_kvant">
							<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf1_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<comparator>
								<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</comparator>
						</xsl:for-each>
					</valueQuantity>
					<note>
						<xsl:for-each select="$lod/@text">
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</xsl:for-each>
					</note>
				</Observation>
			</xsl:variable>
			<resource>
				<Observation>
					<xsl:sequence select="($var3_create_Observation/@node(), $var3_create_Observation/node())"/>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:loi">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="loi" select="()"/>
		<xsl:variable name="var23_typ_znac" as="node()?" select="$loi/@typ_znac"/>
		<xsl:variable name="var24_guid" as="node()?" select="$loi/@guid"/>
		<xsl:variable name="var25_lopk" as="node()*" select="$loi/ns2:lopk"/>
		<xsl:variable name="var22_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var21_resultof_first_items" as="node()*" select="($var25_lopk/@systspec_kod)[(fn:position() &lt;= xs:integer('1'))]"/>
		<xsl:variable name="var20_test_resultof_exists" as="xs:string*">
			<xsl:choose>
				<xsl:when test="fn:exists($var21_resultof_first_items)">
					<xsl:for-each select="$var21_resultof_first_items">
						<xsl:sequence select="fn:string(.)"/>
					</xsl:for-each>
				</xsl:when>
				<xsl:otherwise>
					<xsl:for-each select="$loi/@material">
						<xsl:sequence select="fn:string(.)"/>
					</xsl:for-each>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:variable>
		<xsl:variable name="var5_map_of_sci" as="node()*">
			<xsl:for-each select="$loi/ns2:sci">
				<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
				<entry xmlns="http://hl7.org/fhir">
					<fullUrl>
						<xsl:for-each select="$var4_guid">
							<xsl:for-each select="$var4_guid">
								<xsl:variable name="var1_resultof_FullURL_ServiceRequest" as="xs:string?">
									<xsl:call-template name="provisio:FullURL_ServiceRequest">
										<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1_resultof_FullURL_ServiceRequest">
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</fullUrl>
					<resource>
						<ServiceRequest>
							<identifier>
								<value>
									<xsl:for-each select="@id_sci_is">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</value>
							</identifier>
							<status>
								<xsl:for-each select="@prubeh">
									<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf2_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</status>
							<intent>
								<xsl:attribute name="value" namespace="" select="'order'"/>
							</intent>
							<xsl:for-each select="$loi/@urg">
								<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf3_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<priority>
									<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</priority>
							</xsl:for-each>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
									</system>
									<code>
										<xsl:for-each select="@klic_nclp">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="$var22_let"/>
							</subject>
							<note>
								<text>
									<xsl:for-each select="@krok">
										<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
									</xsl:for-each>
								</text>
							</note>
						</ServiceRequest>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:variable>
		<xsl:for-each select="$var5_map_of_sci">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var24_guid">
					<xsl:for-each select="$var24_guid">
						<xsl:variable name="var6_resultof_FullURL_Specimen" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Specimen">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var6_resultof_FullURL_Specimen">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var10_create_Specimen" as="node()">
				<Specimen>
					<xsl:for-each select="$var24_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<identifier>
						<value>
							<xsl:for-each select="$loi/@id_loi_is">
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</xsl:for-each>
						</value>
					</identifier>
					<type>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAIC.htm'))"/>
							</system>
							<code>
								<xsl:for-each select="$var23_typ_znac">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$var23_typ_znac">
									<xsl:variable name="var7_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf4_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var7_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</display>
						</coding>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAJS.htm'))"/>
							</system>
							<code>
								<xsl:if test="fn:exists($var20_test_resultof_exists)">
									<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var20_test_resultof_exists return xs:string($x), ' '))"/>
								</xsl:if>
							</code>
						</coding>
						<xsl:for-each select="$loi/@anal_vzorek">
							<xsl:variable name="var9_cur_as_string" as="xs:string" select="fn:string(.)"/>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSALQ.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="$var9_cur_as_string"/>
								</code>
								<xsl:variable name="var8_resultof_vmf__inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf5_inputtoresult">
										<xsl:with-param name="input" select="$var9_cur_as_string" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<display>
									<xsl:for-each select="$var8_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</display>
							</coding>
						</xsl:for-each>
					</type>
					<subject>
						<xsl:sequence select="$var22_let"/>
					</subject>
					<container>
						<type>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAJU.htm'))"/>
								</system>
								<code>
									<xsl:for-each select="$loi/@typ_obalu">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
							</coding>
						</type>
						<xsl:for-each select="$loi/@poc_obalu">
							<capacity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</value>
							</capacity>
						</xsl:for-each>
					</container>
					<xsl:for-each select="$loi/@pozn_loi">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</Specimen>
			</xsl:variable>
			<resource>
				<Specimen>
					<xsl:sequence select="($var10_create_Specimen/@node(), $var10_create_Specimen/node())"/>
				</Specimen>
			</resource>
		</entry>
		<xsl:for-each select="$loi/ns2:lop">
			<xsl:variable name="var14_resultof_lop" as="node()?">
				<xsl:call-template name="provisio:lop">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var22_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lop" as="node()">
						<lop xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lop>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" as="xs:string?">
						<xsl:for-each select="$var24_guid">
							<xsl:variable name="var13_vguid" as="node()?" select="$loi/@vguid"/>
							<xsl:for-each select="$var13_vguid">
								<xsl:for-each select="$var24_guid">
									<xsl:variable name="var12_cur" as="node()" select="."/>
									<xsl:for-each select="$var13_vguid">
										<xsl:variable name="var11_resultof_Reference_Specimen" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Specimen">
												<xsl:with-param name="GUID" select="fn:string($var12_cur)" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:sequence select="$var11_resultof_Reference_Specimen"/>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var14_resultof_lop">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var25_lopk">
			<xsl:variable name="var18_resultof_lopk" as="node()?">
				<xsl:call-template name="provisio:lopk">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var22_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lopk" as="node()">
						<lopk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lopk>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" as="xs:string?">
						<xsl:for-each select="$var24_guid">
							<xsl:variable name="var17_vguid" as="node()?" select="$loi/@vguid"/>
							<xsl:for-each select="$var17_vguid">
								<xsl:for-each select="$var24_guid">
									<xsl:variable name="var16_cur" as="node()" select="."/>
									<xsl:for-each select="$var17_vguid">
										<xsl:variable name="var15_resultof_Reference_Specimen" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Specimen">
												<xsl:with-param name="GUID" select="fn:string($var16_cur)" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:sequence select="$var15_resultof_Reference_Specimen"/>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var18_resultof_lopk">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$loi/ns2:lod">
			<xsl:variable name="var19_resultof_lod" as="node()?">
				<xsl:call-template name="provisio:lod">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var22_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lod" as="node()">
						<lod xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lod>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var19_resultof_lod">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:lopk">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lopk" select="()"/>
		<xsl:param name="specimenReference" select="()"/>
		<xsl:variable name="var5_guid" as="node()?" select="$lopk/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var5_guid">
					<xsl:for-each select="$var5_guid">
						<xsl:variable name="var1_resultof_FullURL_ServiceRequest" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_ServiceRequest">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_ServiceRequest">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var4_create_ServiceRequest" as="node()">
				<ServiceRequest>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<intent>
						<xsl:attribute name="value" namespace="" select="'order'"/>
					</intent>
					<xsl:for-each select="$lopk/@urg">
						<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf6_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<priority>
							<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</priority>
					</xsl:for-each>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lopk/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
						<xsl:for-each select="$lopk/@systspec_kod">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKQ.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lopk/@spec_text">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKQ.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<display>
									<xsl:for-each select="$lopk/@subspec_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lopk/@ziskmat_kod">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKT.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<display>
									<xsl:for-each select="$lopk/@ziskmat_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lopk/ns2:lopok">
							<xsl:variable name="var3_cur" as="node()" select="."/>
							<xsl:for-each select="@obj_mv_kod">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKP.htm'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<display>
										<xsl:for-each select="$var3_cur/@obj_mv_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</xsl:for-each>
						</xsl:for-each>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:if test="fn:exists($specimenReference)">
						<specimen>
							<reference>
								<xsl:attribute name="value" namespace="" select="$specimenReference"/>
							</reference>
						</specimen>
					</xsl:if>
				</ServiceRequest>
			</xsl:variable>
			<resource>
				<ServiceRequest>
					<xsl:sequence select="($var4_create_ServiceRequest/@node(), $var4_create_ServiceRequest/node())"/>
				</ServiceRequest>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:lop">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lop" select="()"/>
		<xsl:param name="specimenReference" select="()"/>
		<xsl:variable name="var4_guid" as="node()?" select="$lop/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_ServiceRequest" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_ServiceRequest">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_ServiceRequest">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var3_create_ServiceRequest" as="node()">
				<ServiceRequest>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<intent>
						<xsl:attribute name="value" namespace="" select="'order'"/>
					</intent>
					<xsl:for-each select="$lop/@urg">
						<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf7_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<priority>
							<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</priority>
					</xsl:for-each>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lop/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
						<xsl:for-each select="$lop/@systspec_klic">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKB.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lop/@syst_sp_klic">
							<coding>
								<version>
									<xsl:attribute name="value" namespace="" select="'https://dastacr.cz/dasta/hypertext/DSAKB.htm'"/>
								</version>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<display>
									<xsl:for-each select="$lop/@subsp_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lop/@ziskmat_klic">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKT.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
						<xsl:for-each select="$lop/@spec_proc">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAJW.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:if test="fn:exists($specimenReference)">
						<specimen>
							<reference>
								<xsl:attribute name="value" namespace="" select="$specimenReference"/>
							</reference>
						</specimen>
					</xsl:if>
					<xsl:for-each select="$lop/@pozn_lop">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
					<xsl:for-each select="$lop/@pozn_lop_lab">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</ServiceRequest>
			</xsl:variable>
			<resource>
				<ServiceRequest>
					<xsl:sequence select="($var3_create_ServiceRequest/@node(), $var3_create_ServiceRequest/node())"/>
				</ServiceRequest>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:lopz">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lopz" select="()"/>
		<xsl:param name="specimenReference" select="()"/>
		<xsl:variable name="var4_guid" as="node()?" select="$lopz/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_ServiceRequest" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_ServiceRequest">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_ServiceRequest">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var3_create_ServiceRequest" as="node()">
				<ServiceRequest>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<intent>
						<xsl:attribute name="value" namespace="" select="'order'"/>
					</intent>
					<priority>
						<xsl:for-each select="$lopz/@urg">
							<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf8_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</xsl:for-each>
					</priority>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lopz/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:if test="fn:exists($specimenReference)">
						<specimen>
							<reference>
								<xsl:attribute name="value" namespace="" select="$specimenReference"/>
							</reference>
						</specimen>
					</xsl:if>
					<xsl:for-each select="$lopz/ns2:text">
						<note>
							<text>
								<xsl:for-each select="ns2:ptext">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</note>
					</xsl:for-each>
				</ServiceRequest>
			</xsl:variable>
			<resource>
				<ServiceRequest>
					<xsl:sequence select="($var3_create_ServiceRequest/@node(), $var3_create_ServiceRequest/node())"/>
				</ServiceRequest>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:FullURL_ServiceRequest">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('ServiceRequest/', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:lopr">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lopr" select="()"/>
		<xsl:param name="specimenReference" select="()"/>
		<xsl:variable name="var4_guid" as="node()?" select="$lopr/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_ServiceRequest" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_ServiceRequest">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_ServiceRequest">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var3_create_ServiceRequest" as="node()">
				<ServiceRequest>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<intent>
						<xsl:attribute name="value" namespace="" select="'order'"/>
					</intent>
					<priority>
						<xsl:for-each select="$lopr/@urg">
							<xsl:variable name="var2_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf9_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var2_resultof_vmf__inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</xsl:for-each>
					</priority>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lopr/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:if test="fn:exists($specimenReference)">
						<specimen>
							<reference>
								<xsl:attribute name="value" namespace="" select="$specimenReference"/>
							</reference>
						</specimen>
					</xsl:if>
					<xsl:for-each select="$lopr/ns2:text">
						<note>
							<text>
								<xsl:for-each select="ns2:ptext">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</note>
					</xsl:for-each>
				</ServiceRequest>
			</xsl:variable>
			<resource>
				<ServiceRequest>
					<xsl:sequence select="($var3_create_ServiceRequest/@node(), $var3_create_ServiceRequest/node())"/>
				</ServiceRequest>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Observation">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('Observation/', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:lip">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="lip" select="()"/>
		<xsl:variable name="var5_guid" as="node()?" select="$lip/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var5_guid">
					<xsl:for-each select="$var5_guid">
						<xsl:variable name="var1_resultof_FullURL_Observation" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Observation">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Observation">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<xsl:variable name="var4_create_Observation" as="node()">
				<Observation>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/lab/ValueSet/cz-nclp-labpol-vs'))"/>
							</system>
							<code>
								<xsl:for-each select="$lip/@klic_nclp">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
						<xsl:for-each select="$lip/@mtv_klic">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAJT.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</coding>
						</xsl:for-each>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<valueQuantity>
						<xsl:for-each select="$lip/@hodnota">
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</xsl:for-each>
						<xsl:for-each select="$lip/@priznak_kvant">
							<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf10_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<comparator>
								<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</comparator>
						</xsl:for-each>
						<xsl:for-each select="$lip/@jednotka">
							<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf11_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<unit>
								<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</unit>
						</xsl:for-each>
					</valueQuantity>
				</Observation>
			</xsl:variable>
			<resource>
				<Observation>
					<xsl:sequence select="($var4_create_Observation/@node(), $var4_create_Observation/node())"/>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_o_lab_generalAttribute">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_o_labType" select="()"/>
		<xsl:param name="title" select="()"/>
		<xsl:param name="authorReference" select="()"/>
		<xsl:variable name="var22_loi" as="node()*" select="$ku_o_labType/ns2:loi"/>
		<xsl:variable name="var23_lopr" as="node()*" select="$ku_o_labType/ns2:lopr"/>
		<xsl:variable name="var24_lopz" as="node()*" select="$ku_o_labType/ns2:lopz"/>
		<xsl:variable name="var25_http___loinc_org_as_string" as="xs:string" select="xs:string(xs:anyURI('http://loinc.org'))"/>
		<xsl:variable name="var26_lop" as="node()*" select="$ku_o_labType/ns2:lop"/>
		<xsl:variable name="var27_lopk" as="node()*" select="$ku_o_labType/ns2:lopk"/>
		<xsl:variable name="var21_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var20_create_value_of_id_lo_is" as="node()?">
			<xsl:for-each select="$ku_o_labType/@id_lo_is">
				<xsl:attribute name="value" select="fn:string(.)"/>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var17_resultof_filter" as="node()*">
			<xsl:for-each select="$ku_o_labType/ns2:dat_du">
				<xsl:variable name="var16_cur_as_string" as="xs:string" select="fn:string(.)"/>
				<xsl:variable name="var15_test_resultof_equal" as="xs:string">
					<xsl:choose>
						<xsl:when test="(fn:string-length($var16_cur_as_string) = xs:decimal('16'))">
							<xsl:sequence select="fn:concat($var16_cur_as_string, ':00')"/>
						</xsl:when>
						<xsl:otherwise>
							<xsl:sequence select="$var16_cur_as_string"/>
						</xsl:otherwise>
					</xsl:choose>
				</xsl:variable>
				<xsl:if test="(($var15_test_resultof_equal != '') and ($var15_test_resultof_equal != '    -  -  '))">
					<xsl:sequence select="."/>
				</xsl:if>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var19_map_of_filter" as="node()*">
			<xsl:for-each select="$var17_resultof_filter">
				<xsl:variable name="var18_cur_as_string" as="xs:string" select="fn:string(.)"/>
				<xsl:attribute name="value">
					<xsl:choose>
						<xsl:when test="(fn:string-length($var18_cur_as_string) = xs:decimal('16'))">
							<xsl:sequence select="fn:concat($var18_cur_as_string, ':00')"/>
						</xsl:when>
						<xsl:otherwise>
							<xsl:sequence select="$var18_cur_as_string"/>
						</xsl:otherwise>
					</xsl:choose>
				</xsl:attribute>
			</xsl:for-each>
		</xsl:variable>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Composition>
					<identifier>
						<value>
							<xsl:sequence select="$var20_create_value_of_id_lo_is"/>
						</value>
					</identifier>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<subject>
						<xsl:sequence select="$var21_let"/>
					</subject>
					<date>
						<xsl:sequence select="$var19_map_of_filter"/>
					</date>
					<xsl:for-each select="$authorReference">
						<author>
							<xsl:sequence select="(./@node(), ./node())"/>
						</author>
					</xsl:for-each>
					<title>
						<xsl:if test="fn:exists($title)">
							<xsl:attribute name="value" namespace="" select="$title"/>
						</xsl:if>
					</title>
					<section>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var25_http___loinc_org_as_string"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'100828-3'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Portable medical order administrative information'"/>
								</display>
							</coding>
						</code>
						<entry>
							<reference>
								<xsl:attribute name="value" namespace="" select="'??? - doplnim diagnozu kvuli sekci'"/>
							</reference>
						</entry>
					</section>
					<section>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var25_http___loinc_org_as_string"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'31208-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Specimen'"/>
								</display>
							</coding>
						</code>
						<xsl:for-each select="$var22_loi/@guid">
							<entry>
								<reference>
									<xsl:attribute name="value" namespace="" select="fn:concat('Specimen/', fn:string(.))"/>
								</reference>
							</entry>
						</xsl:for-each>
					</section>
					<section>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var25_http___loinc_org_as_string"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'64286-8'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Diagnostic imaging order'"/>
								</display>
							</coding>
						</code>
						<xsl:for-each select="$var26_lop/@guid">
							<entry>
								<reference>
									<xsl:attribute name="value" namespace="" select="fn:concat('ServiceRequest/', fn:string(.))"/>
								</reference>
							</entry>
						</xsl:for-each>
						<xsl:for-each select="$var27_lopk/@guid">
							<entry>
								<reference>
									<xsl:attribute name="value" namespace="" select="fn:concat('ServiceRequest/', fn:string(.))"/>
								</reference>
							</entry>
						</xsl:for-each>
						<xsl:for-each select="$var24_lopz/@guid">
							<entry>
								<reference>
									<xsl:attribute name="value" namespace="" select="fn:concat('ServiceRequest/', fn:string(.))"/>
								</reference>
							</entry>
						</xsl:for-each>
						<xsl:for-each select="$var23_lopr/@guid">
							<entry>
								<reference>
									<xsl:attribute name="value" namespace="" select="fn:concat('ServiceRequest/', fn:string(.))"/>
								</reference>
							</entry>
						</xsl:for-each>
						<xsl:for-each select="$var22_loi">
							<xsl:variable name="var1_resultof_loi" as="node()*">
								<xsl:call-template name="provisio:loi">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var21_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="loi" as="node()">
										<loi xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
											<xsl:sequence select="(./@node(), ./node())"/>
										</loi>
									</xsl:with-param>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="($var1_resultof_loi/ns0:fullUrl/@value)[fn:starts-with(xs:string(xs:anyURI(fn:string(.))), 'ServiceRequest/')]">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
				</Composition>
				<ServiceRequest>
					<identifier>
						<value>
							<xsl:sequence select="$var20_create_value_of_id_lo_is"/>
						</value>
					</identifier>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<intent>
						<xsl:attribute name="value" namespace="" select="'order'"/>
					</intent>
					<xsl:for-each select="$ku_o_labType/@urg">
						<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf12_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<priority>
							<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</priority>
					</xsl:for-each>
					<xsl:for-each select="$ku_o_labType/@dodani">
						<xsl:variable name="var4_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAIB.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="$var4_cur_as_string"/>
								</code>
								<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf13_inputtoresult">
										<xsl:with-param name="input" select="$var4_cur_as_string" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<display>
									<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</display>
							</coding>
						</code>
					</xsl:for-each>
					<subject>
						<xsl:sequence select="$var21_let"/>
					</subject>
					<xsl:for-each select="$ku_o_labType/ns2:dat_poc_hosp">
						<xsl:variable name="var6_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<xsl:variable name="var5_test_resultof_equal" as="xs:string">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var6_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var6_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var6_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<occurrenceDateTime>
							<xsl:if test="(($var5_test_resultof_equal != '') and ($var5_test_resultof_equal != '    -  -  '))">
								<xsl:attribute name="value" namespace="" select="$var5_test_resultof_equal"/>
							</xsl:if>
						</occurrenceDateTime>
					</xsl:for-each>
					<authoredOn>
						<xsl:sequence select="$var19_map_of_filter"/>
					</authoredOn>
					<xsl:for-each select="$ku_o_labType/@duv_objed">
						<xsl:variable name="var8_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<reasonCode>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAHX.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="$var8_cur_as_string"/>
								</code>
								<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf14_inputtoresult">
										<xsl:with-param name="input" select="$var8_cur_as_string" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<display>
									<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</display>
							</coding>
						</reasonCode>
					</xsl:for-each>
				</ServiceRequest>
			</resource>
		</entry>
		<xsl:for-each select="$var22_loi">
			<xsl:variable name="var9_resultof_loi" as="node()*">
				<xsl:call-template name="provisio:loi">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="loi" as="node()">
						<loi xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</loi>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var9_resultof_loi">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var26_lop">
			<xsl:variable name="var10_resultof_lop" as="node()?">
				<xsl:call-template name="provisio:lop">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lop" as="node()">
						<lop xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lop>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" select="()" as="xs:string?"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var10_resultof_lop">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var27_lopk">
			<xsl:variable name="var11_resultof_lopk" as="node()?">
				<xsl:call-template name="provisio:lopk">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lopk" as="node()">
						<lopk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lopk>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" select="()" as="xs:string?"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var11_resultof_lopk">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var24_lopz">
			<xsl:variable name="var12_resultof_lopz" as="node()?">
				<xsl:call-template name="provisio:lopz">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lopz" as="node()">
						<lopz xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lopz>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" select="()" as="xs:string?"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var12_resultof_lopz">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var23_lopr">
			<xsl:variable name="var13_resultof_lopr" as="node()?">
				<xsl:call-template name="provisio:lopr">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lopr" as="node()">
						<lopr xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lopr>
					</xsl:with-param>
					<xsl:with-param name="specimenReference" select="()" as="xs:string?"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var13_resultof_lopr">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_o_labType/ns2:lip">
			<xsl:variable name="var14_resultof_lip" as="node()?">
				<xsl:call-template name="provisio:lip">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var21_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="lip" as="node()">
						<lip xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</lip>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var14_resultof_lip">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:garant_dat">
		<xsl:param name="garant_dat" select="()"/>
		<xsl:variable name="var2_odbornost" as="node()?" select="$garant_dat/@odbornost"/>
		<xsl:variable name="var3_guid" as="node()?" select="$garant_dat/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var3_guid">
				<fullUrl>
					<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('Practitioner/', fn:string(.))))"/>
				</fullUrl>
			</xsl:for-each>
			<resource>
				<Practitioner>
					<xsl:for-each select="$var3_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<xsl:for-each select="$garant_dat/@id_zp">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/krzp'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$garant_dat/@id_clk">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/clk'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<identifier>
						<use>
							<xsl:attribute name="value" namespace="" select="'official'"/>
						</use>
						<system>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/clek'))"/>
						</system>
					</identifier>
					<name>
						<text>
							<xsl:attribute name="value" namespace="" select="fn:string($garant_dat)"/>
						</text>
					</name>
					<qualification>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/UZAGT.htm'))"/>
								</system>
								<code>
									<xsl:for-each select="$var2_odbornost">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var2_odbornost">
										<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf15_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</code>
					</qualification>
				</Practitioner>
				<PractitionerRole>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBSK.htm'))"/>
							</system>
							<code>
								<xsl:for-each select="$garant_dat/@role_klic">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$garant_dat/@role_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</display>
						</coding>
					</code>
				</PractitionerRole>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="tbf:tbf1_ku_o_labType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_lo_is">
			<xsl:attribute name="id_lo_is" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodani">
			<xsl:attribute name="dodani" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@duv_objed">
			<xsl:attribute name="duv_objed" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:dat_poc_hosp)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf2_dat_xxType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:los)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf3_losType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dat_du)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf4_dat_duType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lip)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf5_lipType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:loi)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf6_loiType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lop)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf7_lopType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopk)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf8_lopkType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopz)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf9_lopzType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopr)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf10_loprType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:kuolabAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf2_dat_xxType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@format">
			<xsl:attribute name="format" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf3_losType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@prijeti">
			<xsl:attribute name="prijeti" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@kolize">
			<xsl:attribute name="kolize" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg_vysled">
			<xsl:attribute name="urg_vysled" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@rut_vysled">
			<xsl:attribute name="rut_vysled" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ext_vysled">
			<xsl:attribute name="ext_vysled" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodsest">
			<xsl:attribute name="dodsest" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodform">
			<xsl:attribute name="dodform" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodnadpis">
			<xsl:attribute name="dodnadpis" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodskal">
			<xsl:attribute name="dodskal" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typskal">
			<xsl:attribute name="typskal" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodkoment">
			<xsl:attribute name="dodkoment" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@dodgraf">
			<xsl:attribute name="dodgraf" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@fsvku">
			<xsl:attribute name="fsvku" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:losAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf4_dat_duType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@format">
			<xsl:attribute name="format" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf5_lipType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@priznak_kvant">
			<xsl:attribute name="priznak_kvant" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@hodnota">
			<xsl:attribute name="hodnota" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@mtv_klic">
			<xsl:attribute name="mtv_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@jednotka">
			<xsl:attribute name="jednotka" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lipAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf6_loiType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ_znac">
			<xsl:attribute name="typ_znac" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_loi_is">
			<xsl:attribute name="id_loi_is" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@odber_mist">
			<xsl:attribute name="odber_mist" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ_obalu">
			<xsl:attribute name="typ_obalu" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@poc_obalu">
			<xsl:attribute name="poc_obalu" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@material">
			<xsl:attribute name="material" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@anal_vzorek">
			<xsl:attribute name="anal_vzorek" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@indikace">
			<xsl:attribute name="indikace" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_loi">
			<xsl:attribute name="pozn_loi" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:o_pracovnik)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf12_pracovnikType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf13_textType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:sci)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf14_sciType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dat_zt)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf2_dat_xxType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lod)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf15_lodType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lop)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf7_lopType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopk)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf8_lopkType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:loiAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf7_lopType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@systspec_klic">
			<xsl:attribute name="systspec_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@syst_sp_klic">
			<xsl:attribute name="syst_sp_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@subsp_text">
			<xsl:attribute name="subsp_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ziskmat_klic">
			<xsl:attribute name="ziskmat_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@spec_proc">
			<xsl:attribute name="spec_proc" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop">
			<xsl:attribute name="pozn_lop" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop_lab">
			<xsl:attribute name="pozn_lop_lab" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lopAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf8_lopkType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@systspec_kod">
			<xsl:attribute name="systspec_kod" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@spec_text">
			<xsl:attribute name="spec_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@subspec_text">
			<xsl:attribute name="subspec_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ziskmat_kod">
			<xsl:attribute name="ziskmat_kod" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ziskmat_text">
			<xsl:attribute name="ziskmat_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lopok)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf16_lopokType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopkAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf9_lopzType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@systspec_klic">
			<xsl:attribute name="systspec_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@syst_sp_klic">
			<xsl:attribute name="syst_sp_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@subsp_text">
			<xsl:attribute name="subsp_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ziskmat_klic">
			<xsl:attribute name="ziskmat_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@spec_proc">
			<xsl:attribute name="spec_proc" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop">
			<xsl:attribute name="pozn_lop" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop_lab">
			<xsl:attribute name="pozn_lop_lab" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lopAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf13_textType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopzAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf10_loprType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@urg">
			<xsl:attribute name="urg" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@systspec_klic">
			<xsl:attribute name="systspec_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@syst_sp_klic">
			<xsl:attribute name="syst_sp_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@subsp_text">
			<xsl:attribute name="subsp_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ziskmat_klic">
			<xsl:attribute name="ziskmat_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@spec_proc">
			<xsl:attribute name="spec_proc" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop">
			<xsl:attribute name="pozn_lop" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@pozn_lop_lab">
			<xsl:attribute name="pozn_lop_lab" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lopAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf13_textType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:lopzAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf11_AnyType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::*)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="(./@node(), ./node())"/>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf12_pracovnikType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_zp">
			<xsl:attribute name="id_zp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@icl">
			<xsl:attribute name="icl" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@odbornost">
			<xsl:attribute name="odbornost" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_pracovnik">
			<xsl:attribute name="id_pracovnik" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_clk">
			<xsl:attribute name="id_clk" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_klic">
			<xsl:attribute name="role_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_text">
			<xsl:attribute name="role_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:titul_pred)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:jmeno)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:prijmeni)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:titul_za)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:a)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf17_aType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:pracovnikAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf13_textType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:autor)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf18_autorType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:ptext)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf19_">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:ktext)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf20_ktextType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:priloha)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf21_prilohaType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:textAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf14_sciType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_sci_is">
			<xsl:attribute name="id_sci_is" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@krok">
			<xsl:attribute name="krok" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@prubeh">
			<xsl:attribute name="prubeh" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:sciAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf15_lodType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@klic_nclp">
			<xsl:attribute name="klic_nclp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@priznak_kvant">
			<xsl:attribute name="priznak_kvant" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@hodnota">
			<xsl:attribute name="hodnota" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@mtv_klic">
			<xsl:attribute name="mtv_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@text">
			<xsl:attribute name="text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lodAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf16_lopokType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@obj_mv_kod">
			<xsl:attribute name="obj_mv_kod" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@obj_mv_text">
			<xsl:attribute name="obj_mv_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@upresneni">
			<xsl:attribute name="upresneni" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:lopokAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf17_aType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@ind_kont">
			<xsl:attribute name="ind_kont" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@sr_typ">
			<xsl:attribute name="sr_typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@sr_pois">
			<xsl:attribute name="sr_pois" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@sr_kod">
			<xsl:attribute name="sr_kod" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@sr_lekar">
			<xsl:attribute name="sr_lekar" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns1:dat_od)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf2_dat_xxType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:dat_do)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf2_dat_xxType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:o_jmeno)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:o_prijmeni)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:o_titul_pred)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:o_titul_za)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:f_jmeno)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:f_ico)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:jmeno)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:adr)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:dop1)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:dop2)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:psc)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:mesto)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:stat)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:stat_text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:gps)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf22_gpsType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:vztah)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:k_osoba_klic)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:k_osoba_text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:k_osoba_pozn)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:k_osoba_typ)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:k_osoba_pravo)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:icl)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:id_zp)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:pozn)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:autor)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf18_autorType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:as)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf23_asType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:aAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf18_autorType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_zp">
			<xsl:attribute name="id_zp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_autor">
			<xsl:attribute name="id_autor" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@odbornost">
			<xsl:attribute name="odbornost" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_clk">
			<xsl:attribute name="id_clk" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_klic">
			<xsl:attribute name="role_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_text">
			<xsl:attribute name="role_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf19_">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@xml:space">
			<xsl:attribute name="xml:space" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf20_ktextType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@encode">
			<xsl:attribute name="encode" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf21_prilohaType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@zdroj">
			<xsl:attribute name="zdroj" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf22_gpsType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@lat">
			<xsl:attribute name="lat" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@lon">
			<xsl:attribute name="lon" select="fn:string(.)"/>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf23_asType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@poradi">
			<xsl:attribute name="poradi" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns1:obsah)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:vnitrni)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:sdeleni)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:heslo)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns1:asAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf11_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="vmf:vmf1_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'slo'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'men ne'"/>
			</xsl:when>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'vt ne'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf2_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'zatek'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'prbh'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'konec'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf3_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf4_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'Volnm textem (implicitn)'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'slem'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'rovm kdem'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'ipem (elektronicky)'"/>
			</xsl:when>
			<xsl:when test="$input='Q'">
				<xsl:copy-of select="'QR kdem'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf5_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Nhodn vzorek moi'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Sbran mo'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf6_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf7_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf8_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf9_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf10_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'slo'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'men ne'"/>
			</xsl:when>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'vt ne'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf11_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'sekunda'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'minuta'"/>
			</xsl:when>
			<xsl:when test="$input='H'">
				<xsl:copy-of select="'hodina'"/>
			</xsl:when>
			<xsl:when test="$input='D'">
				<xsl:copy-of select="'den'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'tyden'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'rok'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf12_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vitln indikace'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Ve statim'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Ve pednostn'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Ve rutina'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Statim i rutina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf13_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'Bnou cestou (donka, svoz)
'"/>
			</xsl:when>
			<xsl:when test="$input='R'">
				<xsl:copy-of select="'Potrubn potou 
'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Pacientem'"/>
			</xsl:when>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'Realizace odbru v laboratoi
'"/>
			</xsl:when>
			<xsl:when test="$input='O'">
				<xsl:copy-of select="'Realizace odbru pracovnkem laboratoe na oddlen
'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'Uloeno v laboratoi, doobjednvka
'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Vzorky se v tto situaci nedodvaj'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf14_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'Bn vyeten (implicitn)'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Preventivn vyeten'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Screeningov vyeten
'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'Epidemiologick studie
'"/>
			</xsl:when>
			<xsl:when test="$input='UZ'">
				<xsl:copy-of select="'Zhoren stavu
'"/>
			</xsl:when>
			<xsl:when test="$input='UP'">
				<xsl:copy-of select="'Neodkladn pijet
'"/>
			</xsl:when>
			<xsl:when test="$input='UO'">
				<xsl:copy-of select="'Po operaci
'"/>
			</xsl:when>
			<xsl:when test="$input='D'">
				<xsl:copy-of select="'Dlouhodob sledovn
'"/>
			</xsl:when>
			<xsl:when test="$input='V'">
				<xsl:copy-of select="'Vzkum
'"/>
			</xsl:when>
			<xsl:when test="$input='DS'">
				<xsl:copy-of select="'Ped dialzou'"/>
			</xsl:when>
			<xsl:when test="$input='DE'">
				<xsl:copy-of select="'Po dialze
'"/>
			</xsl:when>
			<xsl:when test="$input=''">
				<xsl:copy-of select="'
'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf15_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='001'">
				<xsl:copy-of select="'veobecn praktick lkastv'"/>
			</xsl:when>
			<xsl:when test="$input='002'">
				<xsl:copy-of select="'praktick lkastv pro dti a dorost a pediatrie'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:output method="xml" encoding="UTF-8" byte-order-mark="no" indent="yes"/>
	<xsl:template match="/">
		<xsl:variable name="var6_dasta" as="node()?" select="ns1:dasta"/>
		<Bundle xmlns="http://hl7.org/fhir" xmlns:xhtml="http://www.w3.org/1999/xhtml">
			<xsl:attribute name="xsi:schemaLocation" namespace="http://www.w3.org/2001/XMLSchema-instance" select="'http://hl7.org/fhir file:///C:/PROVISIO/Mapping/schemas/hl7-fhir/bundle.xsd'"/>
			<type>
				<xsl:attribute name="value" namespace="" select="'message'"/>
			</type>
			<xsl:for-each select="$var6_dasta/ns1:is/ns2:ip">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<xsl:for-each select="ns2:ku/ns2:ku_o">
					<xsl:variable name="var3_cur" as="node()" select="."/>
					<xsl:for-each select="ns2:ku_o_lab">
						<xsl:variable name="var2_resultof_ku_o_lab_generalAttribute" as="node()*">
							<xsl:call-template name="provisio:ku_o_lab_generalAttribute">
								<xsl:with-param name="patientReference" as="node()">
									<Reference>
										<identifier>
											<use>
												<xsl:attribute name="value" namespace="" select="'official'"/>
											</use>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/cpoj'))"/>
											</system>
											<value>
												<xsl:attribute name="value" namespace="" select="fn:string($var4_cur/@id_pac)"/>
											</value>
										</identifier>
									</Reference>
								</xsl:with-param>
								<xsl:with-param name="ku_o_labType" as="node()">
									<ku_o_labType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
										<xsl:call-template name="tbf:tbf1_ku_o_labType">
											<xsl:with-param name="input" select="." as="node()"/>
										</xsl:call-template>
									</ku_o_labType>
								</xsl:with-param>
								<xsl:with-param name="title" as="xs:string?">
									<xsl:for-each select="$var3_cur/@idku">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:with-param>
								<xsl:with-param name="authorReference" as="node()">
									<Reference>
										<reference>
											<xsl:for-each select="$var6_dasta/ns1:garant_dat">
												<xsl:variable name="var1_resultof_garant_dat" as="node()?">
													<xsl:call-template name="provisio:garant_dat">
														<xsl:with-param name="garant_dat" as="node()">
															<garant_dat xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
																<xsl:sequence select="(./@node(), ./node())"/>
															</garant_dat>
														</xsl:with-param>
													</xsl:call-template>
												</xsl:variable>
												<xsl:for-each select="$var1_resultof_garant_dat/ns0:fullUrl/@value">
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
												</xsl:for-each>
											</xsl:for-each>
										</reference>
									</Reference>
								</xsl:with-param>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var2_resultof_ku_o_lab_generalAttribute">
							<entry>
								<xsl:sequence select="(./@node(), ./node())"/>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<xsl:for-each select="$var6_dasta/ns1:garant_dat">
				<xsl:variable name="var5_resultof_garant_dat" as="node()?">
					<xsl:call-template name="provisio:garant_dat">
						<xsl:with-param name="garant_dat" as="node()">
							<garant_dat xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
								<xsl:sequence select="(./@node(), ./node())"/>
							</garant_dat>
						</xsl:with-param>
					</xsl:call-template>
				</xsl:variable>
				<xsl:for-each select="$var5_resultof_garant_dat">
					<entry>
						<xsl:sequence select="(./@node(), ./node())"/>
					</entry>
				</xsl:for-each>
			</xsl:for-each>
		</Bundle>
	</xsl:template>
</xsl:stylesheet>
