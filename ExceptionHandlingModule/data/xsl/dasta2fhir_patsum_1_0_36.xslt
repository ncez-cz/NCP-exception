<?xml version="1.0" encoding="UTF-8"?>
<!--
This file was generated by Altova MapForce 2024r2sp1

YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.

Refer to the Altova MapForce Documentation for further details.
http://www.altova.com/mapforce
-->
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://hl7.org/fhir" xmlns:provisio="http://www.altova.com/MapForce/UDF/provisio" xmlns:vmf="http://www.altova.com/MapForce/UDF/vmf" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:ns1="urn:cz-mzcr:ns:dasta:ds4:ds_dasta" xmlns:ns2="urn:cz-mzcr:ns:dasta:ds4:ds_ip" exclude-result-prefixes="ns0 provisio vmf xs fn ns1 ns2">
	<xsl:template name="provisio:FullURL_AllergyIntolerance">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ua">
		<xsl:param name="uaType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$uaType">
			<xsl:variable name="var20_cur" as="node()" select="."/>
			<xsl:variable name="var17_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var18_uaf" as="node()*" select="ns2:uaf"/>
			<xsl:variable name="var19_stav" as="node()*" select="ns2:stav"/>
			<xsl:variable name="var16_test_resultof_any" as="xs:string*">
				<xsl:choose>
					<xsl:when test="fn:exists(($var18_uaf)[fn:exists(@guid)])">
						<xsl:for-each select="$var18_uaf/@guid">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:for-each>
					</xsl:when>
					<xsl:otherwise>
						<xsl:for-each select="@guid">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:for-each>
					</xsl:otherwise>
				</xsl:choose>
			</xsl:variable>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var16_test_resultof_any">
					<xsl:variable name="var1_resultof_FullURL_AllergyIntolerance" as="xs:string?">
						<xsl:call-template name="provisio:FullURL_AllergyIntolerance">
							<xsl:with-param name="GUID" select="." as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var1_resultof_FullURL_AllergyIntolerance">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
						</fullUrl>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<AllergyIntolerance>
						<xsl:for-each select="$var16_test_resultof_any">
							<id>
								<xsl:attribute name="value" namespace="" select="."/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:variable name="var2_test_resultof_any" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists(($var18_uaf)[fn:exists(@vguid)])">
										<xsl:for-each select="$var18_uaf/@vguid">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="@vguid">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var2_test_resultof_any">
								<versionId>
									<xsl:attribute name="value" namespace="" select="."/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/AllergyIntolerance-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>AllergyIntolerance</xhtml:div>
						</text>
						<clinicalStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical'))"/>
								</system>
								<xsl:variable name="var4_resultof_filter" as="node()*">
									<xsl:for-each select="$var19_stav">
										<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf1_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:if test="fn:exists($var3_resultof_vmf__inputtoresult)">
											<xsl:sequence select="."/>
										</xsl:if>
									</xsl:for-each>
								</xsl:variable>
								<xsl:variable name="var5_test_resultof_any" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var4_resultof_filter)">
											<xsl:for-each select="$var19_stav">
												<xsl:call-template name="vmf:vmf1_inputtoresult">
													<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
												</xsl:call-template>
											</xsl:for-each>
										</xsl:when>
										<xsl:otherwise>
											<xsl:sequence select="'active'"/>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<code>
									<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var5_test_resultof_any return xs:string($x), ' '))"/>
								</code>
							</coding>
						</clinicalStatus>
						<verificationStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/allergyintolerance-verification'))"/>
								</system>
								<xsl:variable name="var7_resultof_filter" as="node()*">
									<xsl:for-each select="$var19_stav">
										<xsl:variable name="var6_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf2_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:if test="fn:exists($var6_resultof_vmf__inputtoresult)">
											<xsl:sequence select="."/>
										</xsl:if>
									</xsl:for-each>
								</xsl:variable>
								<xsl:variable name="var8_test_resultof_any" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var7_resultof_filter)">
											<xsl:for-each select="$var19_stav">
												<xsl:call-template name="vmf:vmf2_inputtoresult">
													<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
												</xsl:call-template>
											</xsl:for-each>
										</xsl:when>
										<xsl:otherwise>
											<xsl:sequence select="'unconfirmed'"/>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<code>
									<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var8_test_resultof_any return xs:string($x), ' '))"/>
								</code>
							</coding>
						</verificationStatus>
						<xsl:for-each select="$var18_uaf/@typ_reakce">
							<xsl:variable name="var9_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf3_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<type>
								<xsl:for-each select="$var9_resultof_vmf__inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</type>
						</xsl:for-each>
						<xsl:for-each select="$var18_uaf/@typ_agens">
							<xsl:variable name="var10_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf4_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<category>
								<xsl:for-each select="$var10_resultof_vmf__inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</category>
						</xsl:for-each>
						<xsl:for-each select="$var18_uaf/@szp_klic">
							<xsl:variable name="var11_resultof_vmf__inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf5_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var11_resultof_vmf__inputtoresult">
								<criticality>
									<xsl:attribute name="value" namespace="" select="."/>
								</criticality>
							</xsl:for-each>
						</xsl:for-each>
						<code>
							<xsl:for-each select="$var18_uaf">
								<xsl:variable name="var12_cur" as="node()" select="."/>
								<xsl:for-each select="ns2:alerg_lek_klic">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var12_cur/ns2:alerg_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var18_uaf">
								<xsl:variable name="var13_cur" as="node()" select="."/>
								<xsl:for-each select="ns2:alerg_nelek_klic">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var13_cur/ns2:alerg_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="ns2:u_al">
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</xsl:for-each>
						</code>
						<patient>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</patient>
						<xsl:for-each select="ns2:dat_du">
							<onsetPeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var20_cur/ns2:dat_up">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</onsetPeriod>
						</xsl:for-each>
						<xsl:variable name="var14_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var17_dat_ab)">
									<xsl:sequence select="xs:string(xs:dateTime(fn:string($var17_dat_ab)))"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var14_test_resultof_exists">
							<recordedDate>
								<xsl:attribute name="value" namespace="" select="."/>
							</recordedDate>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<recorder>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</recorder>
						</xsl:for-each>
						<xsl:for-each select="$var18_uaf">
							<xsl:variable name="var15_cur" as="node()" select="."/>
							<xsl:for-each select="@ar_klic">
								<reaction>
									<manifestation>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
											<display>
												<xsl:for-each select="$var15_cur/@ar_text">
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</xsl:for-each>
											</display>
										</coding>
									</manifestation>
								</reaction>
							</xsl:for-each>
						</xsl:for-each>
					</AllergyIntolerance>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:uot">
		<xsl:param name="uotType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$uotType">
			<xsl:variable name="var3_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var4_dat_ab" as="node()?" select="@dat_ab"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var3_guid">
					<xsl:for-each select="$var3_guid">
						<xsl:variable name="var1_resultof_FullURL_Flag" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Flag">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Flag">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Flag>
						<xsl:for-each select="$var3_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var4_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var4_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_ab">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var2_test_resultof_exists">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Flag-alert-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Flag</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'active'"/>
						</status>
						<code>
							<text>
								<xsl:attribute name="value" namespace="" select="'Očkování proti tetanu'"/>
							</text>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:dat_du">
							<period>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
							</period>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<author>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</author>
						</xsl:for-each>
					</Flag>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:urf">
		<xsl:param name="urfType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$urfType">
			<xsl:variable name="var9_cur" as="node()" select="."/>
			<xsl:variable name="var6_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var7_urff" as="node()*" select="ns2:urff"/>
			<xsl:variable name="var8_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var8_guid">
					<xsl:for-each select="$var8_guid">
						<xsl:variable name="var1_resultof_FullURL_Flag" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Flag">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Flag">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Flag>
						<xsl:for-each select="$var8_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var6_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var6_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_ab">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var2_test_resultof_exists">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Flag-alert-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Flag</xhtml:div>
						</text>
						<status>
							<xsl:for-each select="@typ">
								<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf6_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</xsl:for-each>
						</status>
						<code>
							<xsl:for-each select="$var7_urff">
								<xsl:variable name="var4_cur" as="node()" select="."/>
								<xsl:for-each select="@rf_klic">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/sid/icd-10'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var4_cur/@rf_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var5_test_resultof_any" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists(($var7_urff)[fn:exists(@info_text)])">
										<xsl:for-each select="$var7_urff/@info_text">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="ns2:u_rf">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var5_test_resultof_any">
								<text>
									<xsl:attribute name="value" namespace="" select="."/>
								</text>
							</xsl:for-each>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:dat_du">
							<period>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var9_cur/ns2:dat_up">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</period>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<author>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</author>
						</xsl:for-each>
					</Flag>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:uks">
		<xsl:param name="uksType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$uksType">
			<xsl:variable name="var8_cur" as="node()" select="."/>
			<xsl:variable name="var5_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var6_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var7_ks_rh" as="node()*" select="ns2:ks_rh"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var5_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var5_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAJQ.htm'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'PKS'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Krevní skupina - popis'"/>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var1_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var6_dat_ab)">
									<xsl:sequence select="xs:string(xs:dateTime(fn:string($var6_dat_ab)))"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var1_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:variable name="var3_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var7_ks_rh)">
									<xsl:for-each select="$var7_ks_rh">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="ns2:krevskup">
										<xsl:variable name="var2_cur" as="node()" select="."/>
										<xsl:for-each select="$var8_cur/ns2:rh">
											<xsl:sequence select="fn:concat(fn:string($var2_cur), fn:string(.))"/>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var3_test_resultof_exists">
							<valueCodeableConcept>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAIR.htm'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="."/>
									</code>
									<xsl:variable name="var4_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf7_inputtoresult">
											<xsl:with-param name="input" select="." as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<display>
										<xsl:for-each select="$var4_resultof_vmf__inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</display>
								</coding>
							</valueCodeableConcept>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Flag">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:utm">
		<xsl:param name="utmType" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:for-each select="$utmType">
			<xsl:variable name="var3_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_Flag" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Flag">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Flag">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Flag>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var3_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var3_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_ab">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var2_test_resultof_exists">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Flag-alert-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Flag</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'active'"/>
						</status>
						<code>
							<text>
								<xsl:for-each select="ns2:u_tm">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:dat_du">
							<period>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
							</period>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<author>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</author>
						</xsl:for-each>
					</Flag>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Device">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:FullURL_DeviceUseStatement">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:uniz">
		<xsl:param name="unizType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$unizType">
			<xsl:variable name="var6_cur" as="node()" select="."/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var5_dat_ab" as="node()?" select="@dat_ab"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_DeviceUseStatement" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_DeviceUseStatement">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_DeviceUseStatement">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<DeviceUseStatement>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var5_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var5_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_ab">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var2_test_resultof_exists">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/DeviceUseStatement-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>DeviceUseStatement</xhtml:div>
						</text>
						<status>
							<xsl:for-each select="@typ">
								<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf8_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</xsl:for-each>
						</status>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:dat_du">
							<timingPeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var6_cur/ns2:dat_up">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</timingPeriod>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<source>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</source>
						</xsl:for-each>
						<device>
							<reference>
								<xsl:for-each select="ns2:unizf/@guid">
									<xsl:attribute name="value" namespace="" select="fn:concat('urn:uuid:', fn:string(.))"/>
								</xsl:for-each>
							</reference>
						</device>
					</DeviceUseStatement>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$unizType">
			<xsl:variable name="var12_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:unizf">
				<xsl:variable name="var10_dat_ab" as="node()?" select="$var12_cur/@dat_ab"/>
				<xsl:variable name="var11_guid" as="node()?" select="@guid"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var11_guid">
						<xsl:for-each select="$var11_guid">
							<xsl:variable name="var7_resultof_FullURL_Device" as="xs:string?">
								<xsl:call-template name="provisio:FullURL_Device">
									<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var7_resultof_FullURL_Device">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Device>
							<xsl:for-each select="$var11_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="@vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<xsl:variable name="var8_test_resultof_exists" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var10_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var10_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$dat_ab">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<xsl:for-each select="$var8_test_resultof_exists">
									<lastUpdated>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
									</lastUpdated>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Device-uv-ips'))"/>
								</profile>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>Device</xhtml:div>
							</text>
							<status>
								<xsl:for-each select="$var12_cur/@typ">
									<xsl:variable name="var9_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf8_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var9_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</status>
							<xsl:for-each select="@niz_ident">
								<modelNumber>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</modelNumber>
							</xsl:for-each>
							<type>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:for-each select="@niz_klic">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="@niz_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</type>
							<patient>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</patient>
						</Device>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:u_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ip_u" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="patsumdat_u" select="()"/>
		<xsl:variable name="var13_create_dat_ab_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_ab>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_ua" as="node()*">
			<xsl:call-template name="provisio:ua">
				<xsl:with-param name="uaType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:ua">
						<uaType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uaType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_ua">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_urf" as="node()*">
			<xsl:call-template name="provisio:urf">
				<xsl:with-param name="urfType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:urf">
						<urfType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</urfType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_urf">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var3_resultof_uniz" as="node()*">
			<xsl:call-template name="provisio:uniz">
				<xsl:with-param name="unizType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:uniz">
						<unizType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</unizType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_uniz">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_utm" as="node()*">
			<xsl:call-template name="provisio:utm">
				<xsl:with-param name="utmType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:utm">
						<utmType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</utmType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_utm">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var5_resultof_uks" as="node()*">
			<xsl:call-template name="provisio:uks">
				<xsl:with-param name="uksType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:uks">
						<uksType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uksType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var5_resultof_uks">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var6_resultof_uot" as="node()*">
			<xsl:call-template name="provisio:uot">
				<xsl:with-param name="uotType" as="node()*">
					<xsl:for-each select="$ip_u/ns2:uot">
						<uotType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uotType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var6_resultof_uot">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var7_resultof_ua" as="node()*">
			<xsl:call-template name="provisio:ua">
				<xsl:with-param name="uaType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:ua">
						<uaType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uaType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var7_resultof_ua">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var8_resultof_urf" as="node()*">
			<xsl:call-template name="provisio:urf">
				<xsl:with-param name="urfType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:urf">
						<urfType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</urfType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var8_resultof_urf">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var9_resultof_uniz" as="node()*">
			<xsl:call-template name="provisio:uniz">
				<xsl:with-param name="unizType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:uniz">
						<unizType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</unizType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var9_resultof_uniz">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var10_resultof_utm" as="node()*">
			<xsl:call-template name="provisio:utm">
				<xsl:with-param name="utmType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:utm">
						<utmType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</utmType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var10_resultof_utm">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var11_resultof_uks" as="node()*">
			<xsl:call-template name="provisio:uks">
				<xsl:with-param name="uksType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:uks">
						<uksType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uksType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var11_resultof_uks">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var12_resultof_uot" as="node()*">
			<xsl:call-template name="provisio:uot">
				<xsl:with-param name="uotType" as="node()*">
					<xsl:for-each select="$patsumdat_u/ns2:uot">
						<uotType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uotType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var13_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var12_resultof_uot">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Patient">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Patient/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:adresa_spojeni">
		<xsl:param name="as" select="()"/>
		<xsl:for-each select="$as">
			<xsl:variable name="var3_typ" as="node()?" select="@typ"/>
			<ContactPoint xmlns="http://hl7.org/fhir">
				<system>
					<xsl:for-each select="$var3_typ">
						<xsl:variable name="var1_resultof_vmf__inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf9_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_vmf__inputtoresult">
							<xsl:attribute name="value" namespace="" select="."/>
						</xsl:for-each>
					</xsl:for-each>
				</system>
				<xsl:for-each select="ns1:obsah">
					<value>
						<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
					</value>
				</xsl:for-each>
				<xsl:for-each select="$var3_typ">
					<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
						<xsl:call-template name="vmf:vmf10_inputtoresult">
							<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
						<use>
							<xsl:attribute name="value" namespace="" select="."/>
						</use>
					</xsl:for-each>
				</xsl:for-each>
				<xsl:for-each select="@poradi">
					<rank>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
					</rank>
				</xsl:for-each>
			</ContactPoint>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:adresa">
		<xsl:param name="a" select="()"/>
		<xsl:variable name="var16_typ" as="node()?" select="$a/@typ"/>
		<xsl:variable name="var17_jmeno" as="node()*" select="$a/ns1:jmeno"/>
		<Address xmlns="http://hl7.org/fhir">
			<use>
				<xsl:for-each select="$var16_typ">
					<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
						<xsl:call-template name="vmf:vmf11_inputtoresult">
							<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
						<xsl:attribute name="value" namespace="" select="."/>
					</xsl:for-each>
				</xsl:for-each>
			</use>
			<xsl:for-each select="$a/@ind_kont">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<type>
					<xsl:for-each select="$var16_typ">
						<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:boolean">
							<xsl:call-template name="vmf:vmf12_inputtoresult">
								<xsl:with-param name="input" select="fn:string($var4_cur)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:boolean">
							<xsl:call-template name="vmf:vmf13_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="($var2_resultof_vmf___inputtoresult and $var3_resultof_vmf___inputtoresult)">
									<xsl:sequence select="'postal'"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="'physical'"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</xsl:for-each>
				</type>
			</xsl:for-each>
			<text>
				<xsl:for-each select="$var16_typ">
					<xsl:variable name="var5_resultof_vmf___inputtoresult" as="xs:string?">
						<xsl:call-template name="vmf:vmf14_inputtoresult">
							<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var5_resultof_vmf___inputtoresult">
						<xsl:attribute name="value" namespace="" select="."/>
					</xsl:for-each>
				</xsl:for-each>
			</text>
			<xsl:variable name="var7_test_resultof_exists" as="xs:string*">
				<xsl:choose>
					<xsl:when test="fn:exists($var17_jmeno)">
						<xsl:for-each select="$var17_jmeno">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:for-each>
					</xsl:when>
					<xsl:otherwise>
						<xsl:for-each select="$a/ns1:o_jmeno">
							<xsl:variable name="var6_cur" as="node()" select="."/>
							<xsl:for-each select="$a/ns1:o_prijmeni">
								<xsl:sequence select="fn:concat(fn:concat(fn:string($var6_cur), ' '), fn:string(.))"/>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:otherwise>
				</xsl:choose>
			</xsl:variable>
			<line>
				<xsl:for-each select="$var7_test_resultof_exists">
					<xsl:attribute name="value" namespace="" select="."/>
				</xsl:for-each>
			</line>
			<xsl:for-each select="$a/ns1:adr">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:dop1">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:dop2">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:mesto">
				<city>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</city>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:psc">
				<postalCode>
					<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
				</postalCode>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:stat">
				<country>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</country>
			</xsl:for-each>
			<period>
				<xsl:variable name="var10_resultof_filter" as="node()*">
					<xsl:for-each select="$a/ns1:dat_od">
						<xsl:variable name="var9_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<xsl:variable name="var8_test_resultof_equal" as="xs:string">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var9_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var9_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var9_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:if test="(($var8_test_resultof_equal != '') and ($var8_test_resultof_equal != '    -  -  '))">
							<xsl:sequence select="."/>
						</xsl:if>
					</xsl:for-each>
				</xsl:variable>
				<xsl:for-each select="$var10_resultof_filter">
					<xsl:variable name="var11_cur_as_string" as="xs:string" select="fn:string(.)"/>
					<start>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var11_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var11_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var11_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</start>
				</xsl:for-each>
				<xsl:variable name="var14_resultof_filter" as="node()*">
					<xsl:for-each select="$a/ns1:dat_do">
						<xsl:variable name="var13_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<xsl:variable name="var12_test_resultof_equal" as="xs:string">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var13_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var13_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var13_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:if test="(($var12_test_resultof_equal != '') and ($var12_test_resultof_equal != '    -  -  '))">
							<xsl:sequence select="."/>
						</xsl:if>
					</xsl:for-each>
				</xsl:variable>
				<xsl:for-each select="$var14_resultof_filter">
					<xsl:variable name="var15_cur_as_string" as="xs:string" select="fn:string(.)"/>
					<end>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var15_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var15_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var15_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</end>
				</xsl:for-each>
			</period>
		</Address>
	</xsl:template>
	<xsl:template name="provisio:ip_ip">
		<xsl:param name="ip" select="()"/>
		<xsl:for-each select="$ip">
			<xsl:variable name="var77_current" as="node()" select="."/>
			<xsl:variable name="var69_jmeno" as="node()*" select="ns2:jmeno"/>
			<xsl:variable name="var70_prijmeni" as="node()*" select="ns2:prijmeni"/>
			<xsl:variable name="var71_a" as="node()*" select="ns1:a"/>
			<xsl:variable name="var72_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var73_ipi_v" as="node()*" select="ns2:ipi_v"/>
			<xsl:variable name="var74_id_pac" as="node()?" select="@id_pac"/>
			<xsl:variable name="var75_ipi_o" as="node()*" select="ns2:ipi_o"/>
			<xsl:variable name="var76_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var76_guid">
					<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
				</xsl:for-each>
				<xsl:for-each select="$var76_guid">
					<xsl:for-each select="$var76_guid">
						<xsl:variable name="var1_resultof_FullURL_Patient" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Patient">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Patient">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Patient>
						<xsl:for-each select="$var76_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var72_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:for-each select="$var69_jmeno">
										<xsl:variable name="var3_cur" as="node()" select="."/>
										<xsl:for-each select="$var70_prijmeni">
											<xsl:variable name="var2_cur" as="node()" select="."/>
											<xsl:for-each select="$var74_id_pac">
												<xsl:sequence select="fn:concat(fn:concat(fn:concat(fn:concat(fn:string($var3_cur), ' '), fn:string($var2_cur)), ' '), fn:string(.))"/>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</xhtml:p>
							</xhtml:div>
						</text>
						<xsl:for-each select="ns2:misto_nar">
							<extension>
								<xsl:attribute name="url" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/patient-birthPlace'))"/>
								<valueAddress>
									<city>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</city>
								</valueAddress>
							</extension>
						</xsl:for-each>
						<xsl:for-each select="ns2:stat_pris">
							<extension>
								<xsl:attribute name="url" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/patient-nationality'))"/>
								<extension>
									<xsl:attribute name="url" namespace="" select="xs:string(xs:anyURI('code'))"/>
									<valueCodeableConcept>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:iso:std:iso:3166'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
										</coding>
									</valueCodeableConcept>
								</extension>
							</extension>
						</xsl:for-each>
						<xsl:for-each select="ns2:povolani">
							<xsl:variable name="var4_cur" as="node()" select="."/>
							<extension>
								<xsl:attribute name="url" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/patient-occupation'))"/>
								<valueString>
									<xsl:for-each select="ns2:povolani_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</valueString>
								<xsl:for-each select="ns2:dat_od">
									<valuePeriod>
										<start>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</start>
										<xsl:for-each select="$var4_cur/ns2:dat_do">
											<end>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</end>
										</xsl:for-each>
									</valuePeriod>
								</xsl:for-each>
								<xsl:for-each select="@dat_ab">
									<valueMeta>
										<lastUpdated>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
										</lastUpdated>
									</valueMeta>
								</xsl:for-each>
							</extension>
						</xsl:for-each>
						<xsl:for-each select="$var74_id_pac">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/cpoj'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="ns2:rodcis">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/rcis'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="ns2:pv_pac/ns2:pv_zp/ns2:kodpoj">
							<xsl:variable name="var6_cur_as_string" as="xs:string" select="xs:string(xs:integer(fn:string(.)))"/>
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v2-0203'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'NIIP'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'National Insurance Payor Identifier (Payor)'"/>
										</display>
									</coding>
								</type>
								<assigner>
									<identifier>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.vzp.cz/poskytovatele/ciselniky/zdravotni-pojistovny'))"/>
										</system>
										<value>
											<xsl:attribute name="value" namespace="" select="$var6_cur_as_string"/>
										</value>
									</identifier>
									<xsl:variable name="var5_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf15_inputtoresult">
											<xsl:with-param name="input" select="$var6_cur_as_string" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<display>
										<xsl:for-each select="$var5_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</display>
								</assigner>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="ns2:rip">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/rid'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="ns2:id_card">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/op'))"/>
								</system>
								<value>
									<xsl:for-each select="ns2:id_number">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</value>
								<period>
									<end>
										<xsl:for-each select="ns2:dat_pl">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</end>
								</period>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="ns2:passport">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v2-0203'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'PPN'"/>
										</code>
									</coding>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/sid/passport-CZE'))"/>
								</system>
								<value>
									<xsl:for-each select="ns2:id_number">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</value>
								<period>
									<end>
										<xsl:for-each select="ns2:dat_pl">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</end>
								</period>
								<assigner>
									<display>
										<xsl:for-each select="ns2:stat">
											<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
												<xsl:call-template name="vmf:vmf16_inputtoresult">
													<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</xsl:for-each>
									</display>
								</assigner>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var75_ipi_o/@nem_cis">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'LR'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/nem_cis'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var75_ipi_o/@kat_pac">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'PI'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/kat_pac'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var75_ipi_o/@cis_chor">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'SNO'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/cis_chor'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var75_ipi_o/@cis_is">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'MR'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/cis_is'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var73_ipi_v/@nem_cis">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'LR'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/nem_cis'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var73_ipi_v/@kat_pac">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'PI'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/kat_pac'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var73_ipi_v/@cis_chor">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'SNO'"/>
									</text>
								</type>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/cis_chor'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="$var73_ipi_v/@cis_is">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'MR'"/>
								</use>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="'urn:ietf:rfc:3986:http://doménanemocnice.cz/sid/cis_is'"/>
									</text>
								</type>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<active>
							<xsl:attribute name="value" namespace="" select="xs:string(fn:true())"/>
						</active>
						<xsl:for-each select="$var70_prijmeni">
							<name>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<family>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</family>
								<xsl:for-each select="$var69_jmeno">
									<given>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</given>
								</xsl:for-each>
								<xsl:for-each select="$var77_current/ns2:titul_pred">
									<prefix>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</prefix>
								</xsl:for-each>
								<xsl:for-each select="$var77_current/ns2:titul_za">
									<suffix>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</suffix>
								</xsl:for-each>
							</name>
						</xsl:for-each>
						<xsl:for-each select="ns2:rod_prijm">
							<name>
								<use>
									<xsl:attribute name="value" namespace="" select="'maiden'"/>
								</use>
								<family>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</family>
							</name>
						</xsl:for-each>
						<xsl:for-each select="$var71_a">
							<xsl:variable name="var19_cur" as="node()" select="."/>
							<xsl:variable name="var10_resultof_filter" as="node()*">
								<xsl:for-each select="ns1:as">
									<xsl:variable name="var9_resultof_filter" as="node()*">
										<xsl:for-each select="$var19_cur/@typ">
											<xsl:variable name="var8_cur_as_string" as="xs:string" select="fn:string(.)"/>
											<xsl:if test="fn:exists(((($var8_cur_as_string = '1'), ($var8_cur_as_string = '2')))[.])">
												<xsl:sequence select="."/>
											</xsl:if>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists($var9_resultof_filter)">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var10_resultof_filter">
								<xsl:variable name="var18_let" as="node()*" select="(./@node(), ./node())"/>
								<telecom>
									<xsl:variable name="var11_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var11_resultof_adresa_spojeni/@id">
										<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
									<xsl:variable name="var12_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var12_resultof_adresa_spojeni/ns0:extension">
										<extension>
											<xsl:sequence select="(./@node(), ./node())"/>
										</extension>
									</xsl:for-each>
									<xsl:variable name="var13_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var13_resultof_adresa_spojeni/ns0:system">
										<system>
											<xsl:sequence select="(./@node(), ./node())"/>
										</system>
									</xsl:for-each>
									<xsl:variable name="var14_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var14_resultof_adresa_spojeni/ns0:value">
										<value>
											<xsl:sequence select="(./@node(), ./node())"/>
										</value>
									</xsl:for-each>
									<xsl:variable name="var15_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var15_resultof_adresa_spojeni/ns0:use">
										<use>
											<xsl:sequence select="(./@node(), ./node())"/>
										</use>
									</xsl:for-each>
									<xsl:variable name="var16_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var16_resultof_adresa_spojeni/ns0:rank">
										<rank>
											<xsl:sequence select="(./@node(), ./node())"/>
										</rank>
									</xsl:for-each>
									<xsl:variable name="var17_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var18_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var17_resultof_adresa_spojeni/ns0:period">
										<period>
											<xsl:sequence select="(./@node(), ./node())"/>
										</period>
									</xsl:for-each>
								</telecom>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="ns2:sex">
							<xsl:variable name="var20_resultof_vmf___inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf17_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<gender>
								<xsl:for-each select="$var20_resultof_vmf___inputtoresult">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</gender>
						</xsl:for-each>
						<xsl:for-each select="ns2:dat_dn">
							<birthDate>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</birthDate>
						</xsl:for-each>
						<xsl:for-each select="ns2:dat_de">
							<deceasedDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</deceasedDateTime>
						</xsl:for-each>
						<xsl:variable name="var23_resultof_filter" as="node()*">
							<xsl:for-each select="$var71_a">
								<xsl:variable name="var22_resultof_filter" as="node()*">
									<xsl:for-each select="@typ">
										<xsl:variable name="var21_cur_as_string" as="xs:string" select="fn:string(.)"/>
										<xsl:if test="fn:exists(((($var21_cur_as_string = '1'), ($var21_cur_as_string = '2')))[.])">
											<xsl:sequence select="."/>
										</xsl:if>
									</xsl:for-each>
								</xsl:variable>
								<xsl:if test="fn:exists($var22_resultof_filter)">
									<xsl:sequence select="."/>
								</xsl:if>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var23_resultof_filter">
							<xsl:variable name="var36_let" as="node()*" select="(./@node(), ./node())"/>
							<address>
								<xsl:variable name="var24_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var24_resultof_adresa/@id">
									<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
								<xsl:variable name="var25_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var25_resultof_adresa/ns0:extension">
									<extension>
										<xsl:sequence select="(./@node(), ./node())"/>
									</extension>
								</xsl:for-each>
								<xsl:variable name="var26_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var26_resultof_adresa/ns0:use">
									<use>
										<xsl:sequence select="(./@node(), ./node())"/>
									</use>
								</xsl:for-each>
								<xsl:variable name="var27_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var27_resultof_adresa/ns0:type">
									<type>
										<xsl:sequence select="(./@node(), ./node())"/>
									</type>
								</xsl:for-each>
								<xsl:variable name="var28_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var28_resultof_adresa/ns0:text">
									<text>
										<xsl:sequence select="(./@node(), ./node())"/>
									</text>
								</xsl:for-each>
								<xsl:variable name="var29_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var29_resultof_adresa/ns0:line">
									<line>
										<xsl:sequence select="(./@node(), ./node())"/>
									</line>
								</xsl:for-each>
								<xsl:variable name="var30_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var30_resultof_adresa/ns0:city">
									<city>
										<xsl:sequence select="(./@node(), ./node())"/>
									</city>
								</xsl:for-each>
								<xsl:variable name="var31_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var31_resultof_adresa/ns0:district">
									<district>
										<xsl:sequence select="(./@node(), ./node())"/>
									</district>
								</xsl:for-each>
								<xsl:variable name="var32_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var32_resultof_adresa/ns0:state">
									<state>
										<xsl:sequence select="(./@node(), ./node())"/>
									</state>
								</xsl:for-each>
								<xsl:variable name="var33_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var33_resultof_adresa/ns0:postalCode">
									<postalCode>
										<xsl:sequence select="(./@node(), ./node())"/>
									</postalCode>
								</xsl:for-each>
								<xsl:variable name="var34_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var34_resultof_adresa/ns0:country">
									<country>
										<xsl:sequence select="(./@node(), ./node())"/>
									</country>
								</xsl:for-each>
								<xsl:variable name="var35_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="$var36_let"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var35_resultof_adresa/ns0:period">
									<period>
										<xsl:sequence select="(./@node(), ./node())"/>
									</period>
								</xsl:for-each>
							</address>
						</xsl:for-each>
						<xsl:variable name="var39_resultof_filter" as="node()*">
							<xsl:for-each select="$var71_a">
								<xsl:variable name="var38_resultof_filter" as="node()*">
									<xsl:for-each select="@typ">
										<xsl:variable name="var37_cur_as_string" as="xs:string" select="fn:string(.)"/>
										<xsl:if test="fn:exists(((($var37_cur_as_string = 'K'), ($var37_cur_as_string = 'Z')))[.])">
											<xsl:sequence select="."/>
										</xsl:if>
									</xsl:for-each>
								</xsl:variable>
								<xsl:if test="fn:exists($var38_resultof_filter)">
									<xsl:sequence select="."/>
								</xsl:if>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var39_resultof_filter">
							<xsl:variable name="var54_typ" as="node()?" select="@typ"/>
							<contact>
								<relationship>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v2-0131'))"/>
										</system>
										<code>
											<xsl:for-each select="$var54_typ">
												<xsl:variable name="var40_resultof_vmf___inputtoresult" as="xs:string?">
													<xsl:call-template name="vmf:vmf18_inputtoresult">
														<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
													</xsl:call-template>
												</xsl:variable>
												<xsl:for-each select="$var40_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="$var54_typ">
												<xsl:variable name="var41_resultof_vmf___inputtoresult" as="xs:string?">
													<xsl:call-template name="vmf:vmf19_inputtoresult">
														<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
													</xsl:call-template>
												</xsl:variable>
												<xsl:for-each select="$var41_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</xsl:for-each>
										</display>
									</coding>
								</relationship>
								<xsl:variable name="var44_resultof_filter" as="node()*">
									<xsl:for-each select="ns1:as">
										<xsl:variable name="var43_resultof_filter" as="node()*">
											<xsl:for-each select="$var54_typ">
												<xsl:variable name="var42_cur_as_string" as="xs:string" select="fn:string(.)"/>
												<xsl:if test="fn:exists(((($var42_cur_as_string = 'K'), ($var42_cur_as_string = 'Z')))[.])">
													<xsl:sequence select="."/>
												</xsl:if>
											</xsl:for-each>
										</xsl:variable>
										<xsl:if test="fn:exists($var43_resultof_filter)">
											<xsl:sequence select="."/>
										</xsl:if>
									</xsl:for-each>
								</xsl:variable>
								<xsl:for-each select="$var44_resultof_filter">
									<xsl:variable name="var52_let" as="node()*" select="(./@node(), ./node())"/>
									<telecom>
										<xsl:variable name="var45_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var45_resultof_adresa_spojeni/@id">
											<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
										<xsl:variable name="var46_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var46_resultof_adresa_spojeni/ns0:extension">
											<extension>
												<xsl:sequence select="(./@node(), ./node())"/>
											</extension>
										</xsl:for-each>
										<xsl:variable name="var47_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var47_resultof_adresa_spojeni/ns0:system">
											<system>
												<xsl:sequence select="(./@node(), ./node())"/>
											</system>
										</xsl:for-each>
										<xsl:variable name="var48_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var48_resultof_adresa_spojeni/ns0:value">
											<value>
												<xsl:sequence select="(./@node(), ./node())"/>
											</value>
										</xsl:for-each>
										<xsl:variable name="var49_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var49_resultof_adresa_spojeni/ns0:use">
											<use>
												<xsl:sequence select="(./@node(), ./node())"/>
											</use>
										</xsl:for-each>
										<xsl:variable name="var50_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var50_resultof_adresa_spojeni/ns0:rank">
											<rank>
												<xsl:sequence select="(./@node(), ./node())"/>
											</rank>
										</xsl:for-each>
										<xsl:variable name="var51_resultof_adresa_spojeni" as="node()*">
											<xsl:call-template name="provisio:adresa_spojeni">
												<xsl:with-param name="as" as="node()">
													<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
														<xsl:sequence select="$var52_let"/>
													</as>
												</xsl:with-param>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var51_resultof_adresa_spojeni/ns0:period">
											<period>
												<xsl:sequence select="(./@node(), ./node())"/>
											</period>
										</xsl:for-each>
									</telecom>
								</xsl:for-each>
								<xsl:variable name="var53_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="(./@node(), ./node())"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var53_resultof_adresa">
									<address>
										<xsl:sequence select="(./@node(), ./node())"/>
									</address>
								</xsl:for-each>
							</contact>
						</xsl:for-each>
						<xsl:for-each select="ns2:jazyk">
							<xsl:variable name="var56_cur" as="node()" select="."/>
							<communication>
								<language>
									<xsl:for-each select="@jazyk_klic">
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBRX.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
											<xsl:for-each select="$var56_cur/@jazyk_text">
												<display>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</display>
											</xsl:for-each>
										</coding>
									</xsl:for-each>
									<xsl:for-each select="@pozn">
										<text>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</text>
									</xsl:for-each>
								</language>
								<xsl:for-each select="@pref">
									<xsl:variable name="var55_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf20_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<preferred>
										<xsl:for-each select="$var55_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="xs:string(xs:boolean(.))"/>
										</xsl:for-each>
									</preferred>
								</xsl:for-each>
							</communication>
						</xsl:for-each>
					</Patient>
					<xsl:for-each select="($var71_a)[fn:exists((./@typ)[(fn:string(.) = '3')])]">
						<xsl:variable name="var68_cur" as="node()" select="."/>
						<RelatedPerson>
							<patient>
								<reference>
									<xsl:for-each select="$var76_guid">
										<xsl:for-each select="$var72_vguid">
											<xsl:for-each select="$var76_guid">
												<xsl:variable name="var58_cur" as="node()" select="."/>
												<xsl:for-each select="$var72_vguid">
													<xsl:variable name="var57_resultof_Reference_Patient" as="xs:string?">
														<xsl:call-template name="provisio:Reference_Patient">
															<xsl:with-param name="GUID" select="fn:string($var58_cur)" as="xs:string"/>
															<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
														</xsl:call-template>
													</xsl:variable>
													<xsl:for-each select="$var57_resultof_Reference_Patient">
														<xsl:attribute name="value" namespace="" select="."/>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</patient>
							<relationship>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-RoleCode'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'FAMMEMB'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'family member'"/>
									</display>
								</coding>
							</relationship>
							<xsl:for-each select="(./ns1:as)[fn:exists(($var68_cur/@typ)[(fn:string(.) = '3')])]">
								<xsl:variable name="var66_let" as="node()*" select="(./@node(), ./node())"/>
								<telecom>
									<xsl:variable name="var59_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var59_resultof_adresa_spojeni/@id">
										<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
									<xsl:variable name="var60_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var60_resultof_adresa_spojeni/ns0:extension">
										<extension>
											<xsl:sequence select="(./@node(), ./node())"/>
										</extension>
									</xsl:for-each>
									<xsl:variable name="var61_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var61_resultof_adresa_spojeni/ns0:system">
										<system>
											<xsl:sequence select="(./@node(), ./node())"/>
										</system>
									</xsl:for-each>
									<xsl:variable name="var62_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var62_resultof_adresa_spojeni/ns0:value">
										<value>
											<xsl:sequence select="(./@node(), ./node())"/>
										</value>
									</xsl:for-each>
									<xsl:variable name="var63_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var63_resultof_adresa_spojeni/ns0:use">
										<use>
											<xsl:sequence select="(./@node(), ./node())"/>
										</use>
									</xsl:for-each>
									<xsl:variable name="var64_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var64_resultof_adresa_spojeni/ns0:rank">
										<rank>
											<xsl:sequence select="(./@node(), ./node())"/>
										</rank>
									</xsl:for-each>
									<xsl:variable name="var65_resultof_adresa_spojeni" as="node()*">
										<xsl:call-template name="provisio:adresa_spojeni">
											<xsl:with-param name="as" as="node()">
												<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="$var66_let"/>
												</as>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var65_resultof_adresa_spojeni/ns0:period">
										<period>
											<xsl:sequence select="(./@node(), ./node())"/>
										</period>
									</xsl:for-each>
								</telecom>
							</xsl:for-each>
							<xsl:variable name="var67_resultof_adresa" as="node()?">
								<xsl:call-template name="provisio:adresa">
									<xsl:with-param name="a" as="node()">
										<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
											<xsl:sequence select="(./@node(), ./node())"/>
										</a>
									</xsl:with-param>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var67_resultof_adresa">
								<address>
									<xsl:sequence select="(./@node(), ./node())"/>
								</address>
							</xsl:for-each>
						</RelatedPerson>
					</xsl:for-each>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Composition_EU_PS">
		<xsl:param name="HDRdate" select="()"/>
		<xsl:param name="sectionMedications_le" select="()"/>
		<xsl:param name="sectionAllergies_ua" select="()"/>
		<xsl:param name="guid" select="()"/>
		<xsl:param name="sectionFunctionalStatus_fs" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="sectionPlanOfCare_ld" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="sectionProceduresHx_chv" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="sectionImmunizations_oc" select="()"/>
		<xsl:param name="sectionVitalSigns_h" select="()"/>
		<xsl:param name="sectionVitalSigns_fyznal" select="()"/>
		<xsl:param name="sectionResults_uks" select="()"/>
		<xsl:param name="sectionResults_an" select="()"/>
		<xsl:param name="sectionPregnancyHx_grav" select="()"/>
		<xsl:param name="sectionMedicalDevices_uniz" select="()"/>
		<xsl:param name="sectionAlert_urf_utm_uot" select="()"/>
		<xsl:param name="sectionProblems_anf_anam_prob" select="()"/>
		<xsl:param name="sectionFamilyMemberHistory_anf_rao" select="()"/>
		<xsl:param name="sectionSocialHistory_anf_inf_infc_sa" select="()"/>
		<xsl:param name="sectionProblems_dg" select="()"/>
		<xsl:for-each select="$HDRdate">
			<xsl:variable name="var2_resultof_exists" as="xs:boolean" select="fn:exists($guid)"/>
			<xsl:variable name="var1_http___loinc_org_as_string" as="xs:string" select="xs:string(xs:anyURI('http://loinc.org'))"/>
			<entry xmlns="http://hl7.org/fhir">
				<fullUrl>
					<xsl:if test="$var2_resultof_exists">
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', $guid)))"/>
					</xsl:if>
				</fullUrl>
				<resource>
					<Composition>
						<id>
							<xsl:if test="$var2_resultof_exists">
								<xsl:attribute name="value" namespace="" select="$guid"/>
							</xsl:if>
						</id>
						<meta>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>Patient summary Document</xhtml:p>
							</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<type>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'60591-5'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Patient summary Document'"/>
								</display>
							</coding>
						</type>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<date>
							<xsl:attribute name="value" namespace="" select="."/>
						</date>
						<xsl:for-each select="$practitionerReference">
							<author>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</author>
						</xsl:for-each>
						<title>
							<xsl:attribute name="value" namespace="" select="'Patient Summary'"/>
						</title>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Problems section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'11450-4'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Problem list - Reported'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Problems section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionProblems_anf_anam_prob">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$sectionProblems_dg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionProblems_anf_anam_prob))">
								<xsl:if test="fn:not(fn:exists($sectionProblems_dg))">
									<emptyReason>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
											</display>
										</coding>
									</emptyReason>
								</xsl:if>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Allergies section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'48765-2'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Allergies and adverse reactions Document'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Allergies section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionAllergies_ua">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionAllergies_ua))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Medication section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'10160-0'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of Medication use Narrative'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Medication section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionMedications_le">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionMedications_le))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Immunizations section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'11369-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of Immunization note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Immunizations section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionImmunizations_oc">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionImmunizations_oc))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Results section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'30954-2'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Relevant diagnostic tests/laboratory data note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Results section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionResults_uks">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$sectionResults_an">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionResults_uks))">
								<xsl:if test="fn:not(fn:exists($sectionResults_an))">
									<emptyReason>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
											</display>
										</coding>
									</emptyReason>
								</xsl:if>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'ProceduresHx section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'47519-4'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of Procedures Document'"/>
									</display>
								</coding>
								<text>
									<xsl:attribute name="value" namespace="" select="'ProceduresHx section'"/>
								</text>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>ProceduresHx section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionProceduresHx_chv">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionProceduresHx_chv))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'MedicalDevices section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'46264-8'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of medical device use'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>MedicalDevices section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionMedicalDevices_uniz">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionMedicalDevices_uniz))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'AdvanceDirectives section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'42348-3'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Advance healthcare directives'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>AdvanceDirectives section</xhtml:p>
								</xhtml:div>
							</text>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Alerts section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'104605-1'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Alert'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Alerts section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionAlert_urf_utm_uot">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionAlert_urf_utm_uot))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'FunctionalStatus section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'47420-5'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Functional status assessment note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>FunctionalStatus section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionFunctionalStatus_fs">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionFunctionalStatus_fs))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'PastIllnessHx section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'11348-0'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of Past illness note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>PastIllnessHx section</xhtml:p>
								</xhtml:div>
							</text>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'PatientStory section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'81338-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Patient Goals, preferences, and priorities for care experience'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>PatientStory section</xhtml:p>
								</xhtml:div>
							</text>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'PregnancyHx section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'10162-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of pregnancies Narrative'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>PregnancyHx section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionPregnancyHx_grav">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionPregnancyHx_grav))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'PlanOfCare section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'18776-5'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Plan of care note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>PlanOfCare section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionPlanOfCare_ld">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionPlanOfCare_ld))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'SocialHistory section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'29762-2'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Social history note'"/>
									</display>
								</coding>
								<text>
									<xsl:attribute name="value" namespace="" select="'SocialHistory section'"/>
								</text>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>SocialHistory section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionSocialHistory_anf_inf_infc_sa">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionSocialHistory_anf_inf_infc_sa))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'VitalSigns section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital signs note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>VitalSigns section</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionVitalSigns_h">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$sectionVitalSigns_fyznal">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionVitalSigns_h))">
								<xsl:if test="fn:not(fn:exists($sectionVitalSigns_fyznal))">
									<emptyReason>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
											</display>
										</coding>
									</emptyReason>
								</xsl:if>
							</xsl:if>
						</section>
						<section>
							<title>
								<xsl:attribute name="value" namespace="" select="'Family History Section'"/>
							</title>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'10157-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'History of family member diseases note'"/>
									</display>
								</coding>
							</code>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>History of family member diseases note</xhtml:p>
								</xhtml:div>
							</text>
							<xsl:for-each select="$sectionFamilyMemberHistory_anf_rao">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:if test="fn:not(fn:exists($sectionFamilyMemberHistory_anf_rao))">
								<emptyReason>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/data-absent-reason'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'not-applicable'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Not Applicable'"/>
										</display>
									</coding>
								</emptyReason>
							</xsl:if>
						</section>
					</Composition>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:fyznal">
		<xsl:param name="fyznalType" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var4_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:tk_syst">
				<xsl:variable name="var1_http___unitsofmeasure_org_as_string" as="xs:string" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
				<xsl:variable name="var2_guid_tk" as="node()?" select="$var4_cur/@guid_tk"/>
				<xsl:variable name="var3_http___loinc_org_as_string" as="xs:string" select="xs:string(xs:anyURI('http://loinc.org'))"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var2_guid_tk">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var2_guid_tk">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var4_cur/@vguid_tk">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>Blood pressure panel with all children optional</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var3_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'85354-9'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Blood pressure panel with all children optional'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var4_cur/ns2:pozn">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
							<component>
								<code>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="$var3_http___loinc_org_as_string"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'8480-6'"/>
										</code>
										<display>
											<xsl:attribute name="value" namespace="" select="'Systolic blood pressure'"/>
										</display>
									</coding>
								</code>
								<valueQuantity>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
									<unit>
										<xsl:attribute name="value" namespace="" select="'mmHg'"/>
									</unit>
									<system>
										<xsl:attribute name="value" namespace="" select="$var1_http___unitsofmeasure_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'mm[Hg]'"/>
									</code>
								</valueQuantity>
							</component>
							<xsl:for-each select="$var4_cur/ns2:tk_diast">
								<component>
									<code>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="$var3_http___loinc_org_as_string"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'8462-4'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Diastolic blood pressure'"/>
											</display>
										</coding>
									</code>
									<valueQuantity>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</value>
										<unit>
											<xsl:attribute name="value" namespace="" select="'mmHg'"/>
										</unit>
										<system>
											<xsl:attribute name="value" namespace="" select="$var1_http___unitsofmeasure_org_as_string"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'mm[Hg]'"/>
										</code>
									</valueQuantity>
								</component>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var6_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:pulz">
				<xsl:variable name="var5_guid_pulz" as="node()?" select="$var6_cur/@guid_pulz"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var5_guid_pulz">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var5_guid_pulz">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var6_cur/@vguid_pulz">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>Heart rate</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8867-4'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Heart rate'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'/min'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'/min'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var8_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:o2sat">
				<xsl:variable name="var7_guid_o_sat" as="node()?" select="$var8_cur/@guid_o2sat"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var7_guid_o_sat">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var7_guid_o_sat">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var8_cur/@vguid_o2sat">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>Oxygen saturation in Arterial blood</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'2708-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Oxygen saturation in Arterial blood'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'%'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'%'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var10_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:dech">
				<xsl:variable name="var9_guid_dech" as="node()?" select="$var10_cur/@guid_dech"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var9_guid_dech">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var9_guid_dech">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var10_cur/@vguid_dech">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>Respiratory rate</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'9279-1'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Respiratory rate'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'/min'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'/min'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var12_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:teplota">
				<xsl:variable name="var11_guid_teplota" as="node()?" select="$var12_cur/@guid_teplota"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var11_guid_teplota">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var11_guid_teplota">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var12_cur/@vguid_teplota">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Body temperature</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8310-5'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Body temperature'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'°C'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'Cel'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:fyznal_-_all">
		<xsl:param name="ip_fyznal" select="()"/>
		<xsl:param name="patsumdat_fyznal" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:variable name="var3_create_dat_prov_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_fyznal" as="node()*">
			<xsl:call-template name="provisio:fyznal">
				<xsl:with-param name="fyznalType" as="node()*">
					<xsl:for-each select="$ip_fyznal">
						<fyznalType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</fyznalType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_fyznal">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_fyznal" as="node()*">
			<xsl:call-template name="provisio:fyznal">
				<xsl:with-param name="fyznalType" as="node()*">
					<xsl:for-each select="$patsumdat_fyznal">
						<fyznalType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</fyznalType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_fyznal">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_prob">
		<xsl:param name="anam_probType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$anam_probType">
			<xsl:variable name="var4_cur" as="node()" select="."/>
			<xsl:variable name="var3_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var3_guid">
					<xsl:for-each select="$var3_guid">
						<xsl:variable name="var1_resultof_FullURL_Condition" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Condition">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Condition">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Condition>
						<xsl:for-each select="$var3_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:for-each select="$dat_ab">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Condition</xhtml:div>
						</text>
						<clinicalStatus>
							<xsl:for-each select="ns2:prob_klin">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-clinical'))"/>
									</system>
									<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf21_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<code>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</code>
								</coding>
							</xsl:for-each>
						</clinicalStatus>
						<verificationStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-ver-status'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'confirmed'"/>
								</code>
							</coding>
						</verificationStatus>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'encounter-diagnosis'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Encounter Diagnosis'"/>
								</display>
							</coding>
						</category>
						<xsl:for-each select="ns2:prob_zav_text">
							<severity>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</severity>
						</xsl:for-each>
						<code>
							<xsl:for-each select="ns2:prob_kod">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWI.htm'))"/>
									</system>
									<code>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</xsl:for-each>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:prob_dat_od">
							<onsetPeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var4_cur/ns2:prob_dat_do">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</onsetPeriod>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<recorder>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</recorder>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_stad_kod">
							<stage>
								<summary>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWI.htm'))"/>
										</system>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</summary>
							</stage>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_popis">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_okol">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_stad_text">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Condition>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_abd">
		<xsl:param name="anam_abd" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$anam_abd">
			<xsl:variable name="var4_current" as="node()" select="."/>
			<xsl:variable name="var3_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var3_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var3_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'social-history'"/>
								</code>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWG.htm'))"/>
								</system>
								<xsl:for-each select="ns2:abd_stav_kod">
									<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf22_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<code>
										<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</code>
								</xsl:for-each>
								<xsl:for-each select="ns2:abd_stav_text">
									<display>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</display>
								</xsl:for-each>
							</coding>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWH.htm'))"/>
								</system>
								<xsl:for-each select="ns2:abd_lattyp_kod">
									<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf23_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<code>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</code>
								</xsl:for-each>
								<xsl:for-each select="ns2:abd_lattyp_text">
									<display>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</display>
								</xsl:for-each>
							</coding>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBSE.htm'))"/>
								</system>
								<code>
									<xsl:for-each select="ns2:abd_latzp_kod">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="ns2:abd_latzp_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:abd_dat_od">
							<effectivePeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var4_current/ns2:abd_dat_do">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</effectivePeriod>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:abd_mnoz_text">
							<valueCodeableConcept>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</valueCodeableConcept>
						</xsl:for-each>
						<xsl:for-each select="ns2:abd_koment">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_aba">
		<xsl:param name="anam_aba" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:for-each select="$anam_aba">
			<xsl:variable name="var1_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var1_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var1_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-alcoholuse-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'social-history'"/>
								</code>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'74013-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Alcoholic drinks per day'"/>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_ab">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:aba_mnoz_text">
							<valueCodeableConcept>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</valueCodeableConcept>
						</xsl:for-each>
						<xsl:for-each select="ns2:aba_koment">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_FamilyMemberHistory">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_rao">
		<xsl:param name="anam_rao" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$anam_rao">
			<xsl:variable name="var4_current" as="node()" select="."/>
			<xsl:variable name="var3_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var3_guid">
					<xsl:for-each select="$var3_guid">
						<xsl:variable name="var1_resultof_FullURL_FamilyMemberHistory" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_FamilyMemberHistory">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_FamilyMemberHistory">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<FamilyMemberHistory>
						<xsl:for-each select="$var3_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:for-each select="$dat_ab">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
								</lastUpdated>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>FamilyMemberHistory</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'completed'"/>
						</status>
						<patient>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</patient>
						<xsl:for-each select="ns2:rao_vztah_kod">
							<relationship>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-RoleCode'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var4_current/ns2:rao_vztah_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</relationship>
						</xsl:for-each>
						<xsl:for-each select="ns2:rao_dat_nar">
							<bornDate>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</bornDate>
						</xsl:for-each>
						<xsl:for-each select="ns2:rao_dat_um">
							<deceasedDate>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</deceasedDate>
						</xsl:for-each>
						<xsl:for-each select="ns2:rao_vzdel">
							<note>
								<xsl:for-each select="$practitionerReference">
									<authorReference>
										<reference>
											<xsl:attribute name="value" namespace="" select="."/>
										</reference>
									</authorReference>
								</xsl:for-each>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
						<xsl:for-each select="ns2:rao_zdrprob_kod">
							<xsl:variable name="var2_http___snomed_info_sct_as_string" as="xs:string" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
							<condition>
								<code>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="$var2_http___snomed_info_sct_as_string"/>
										</system>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</code>
								<xsl:for-each select="$var4_current/ns2:rao_duvum_kod">
									<outcome>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="$var2_http___snomed_info_sct_as_string"/>
											</system>
											<code>
												<xsl:for-each select="ns2:kod">
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</xsl:for-each>
											</code>
											<display>
												<xsl:for-each select="ns2:kod_text">
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</xsl:for-each>
											</display>
										</coding>
									</outcome>
								</xsl:for-each>
							</condition>
						</xsl:for-each>
					</FamilyMemberHistory>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_abj">
		<xsl:param name="anam_abj" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:for-each select="$anam_abj">
			<xsl:variable name="var1_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var2_abj_kod" as="node()*" select="ns2:abj_kod"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var1_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var1_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'social-history'"/>
								</code>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
								</system>
								<xsl:for-each select="$var2_abj_kod/ns2:kod">
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
								</xsl:for-each>
								<display>
									<xsl:for-each select="$var2_abj_kod/ns2:kod_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_ab">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:abj_text">
							<valueCodeableConcept>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</valueCodeableConcept>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_abk">
		<xsl:param name="anam_abk" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$anam_abk">
			<xsl:variable name="var1_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var1_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var1_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-tobaccouse-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'social-history'"/>
								</code>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'72166-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Tobacco smoking status'"/>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_ab">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:abk_mnoz_text">
							<valueCodeableConcept>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</valueCodeableConcept>
						</xsl:for-each>
						<xsl:for-each select="ns2:abk_koment">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_sa">
		<xsl:param name="anam_sa" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:for-each select="$anam_sa">
			<xsl:variable name="var10_current" as="node()" select="."/>
			<xsl:variable name="var9_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var9_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var9_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'social-history'"/>
								</code>
							</coding>
						</category>
						<code>
							<text>
								<xsl:attribute name="value" namespace="" select="'Sociální anamnéza'"/>
							</text>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_ab">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:sau_prac">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Pracovní zapojení'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sau_zajmy">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Koníčky'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sau_soc">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Sociální síť'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sav_vzdel">
							<xsl:variable name="var2_cur_as_string" as="xs:string" select="fn:string(.)"/>
							<component>
								<code>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-EducationLevel'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="$var2_cur_as_string"/>
										</code>
										<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf24_inputtoresult">
												<xsl:with-param name="input" select="$var2_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<display>
											<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</display>
									</coding>
								</code>
								<valueString>
									<xsl:for-each select="$var10_current/ns2:sav_koment">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sab_zpbydl_text">
							<component>
								<code>
									<xsl:for-each select="$var10_current/ns2:sab_zpbydl_kod">
										<xsl:variable name="var4_cur_as_string" as="xs:string" select="fn:string(.)"/>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWB.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="$var4_cur_as_string"/>
											</code>
											<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
												<xsl:call-template name="vmf:vmf25_inputtoresult">
													<xsl:with-param name="input" select="$var4_cur_as_string" as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<display>
												<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</display>
										</coding>
									</xsl:for-each>
									<text>
										<xsl:attribute name="value" namespace="" select="'Způsob bydlení'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sab_prizp_text">
							<component>
								<code>
									<xsl:for-each select="$var10_current/ns2:sab_prizp_kod">
										<xsl:variable name="var6_cur_as_string" as="xs:string" select="fn:string(.)"/>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWC.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="$var6_cur_as_string"/>
											</code>
											<xsl:variable name="var5_resultof_vmf___inputtoresult" as="xs:string?">
												<xsl:call-template name="vmf:vmf26_inputtoresult">
													<xsl:with-param name="input" select="$var6_cur_as_string" as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<display>
												<xsl:for-each select="$var5_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</display>
										</coding>
									</xsl:for-each>
									<text>
										<xsl:attribute name="value" namespace="" select="'Přizpůsobení domácnosti'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sab_bariery_text">
							<component>
								<code>
									<xsl:for-each select="$var10_current/ns2:sab_bariery_kod">
										<xsl:variable name="var8_cur_as_string" as="xs:string" select="fn:string(.)"/>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWD.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="$var8_cur_as_string"/>
											</code>
											<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
												<xsl:call-template name="vmf:vmf27_inputtoresult">
													<xsl:with-param name="input" select="$var8_cur_as_string" as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<display>
												<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</display>
										</coding>
									</xsl:for-each>
									<text>
										<xsl:attribute name="value" namespace="" select="'Bariéry'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_koment">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Rodinná situace'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_slozrod_text">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Složení rodiny'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_rodstav_text">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Rodinný stav'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_pocdet">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Počet dětí'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_pocdetd">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Počet dětí ve společné domácnosti'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_dite">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Podrobnosti o dítěti'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
						<xsl:for-each select="ns2:sar_pecezc">
							<component>
								<code>
									<text>
										<xsl:attribute name="value" namespace="" select="'Pečuje o závislého člena'"/>
									</text>
								</code>
								<valueString>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</valueString>
							</component>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_infc">
		<xsl:param name="anam_infcType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:for-each select="$anam_infcType">
			<xsl:variable name="var2_cur" as="node()" select="."/>
			<xsl:variable name="var1_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var1_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var1_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'82753-5'"/>
								</code>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="ns2:infc_dat_od">
							<effectivePeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var2_cur/ns2:infc_dat_do">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</effectivePeriod>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:infc_stat_kod">
							<valueCodeableConcept>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:iso:std:iso:3166'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<display>
										<xsl:for-each select="$var2_cur/ns2:infc_stat_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
								<xsl:for-each select="$var2_cur/ns2:infc_koment">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</valueCodeableConcept>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_anam_inf">
		<xsl:param name="anam_infType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$anam_infType">
			<xsl:variable name="var7_cur" as="node()" select="."/>
			<xsl:variable name="var3_inf_agens" as="node()*" select="ns2:inf_agens"/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var5_inf_expoz_kod" as="node()*" select="ns2:inf_expoz_kod"/>
			<xsl:variable name="var6_http___snomed_info_sct_as_string" as="xs:string" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Observation</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'encounter-diagnosis'"/>
								</code>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var6_http___snomed_info_sct_as_string"/>
								</system>
								<xsl:for-each select="$var3_inf_agens/ns2:kod">
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
								</xsl:for-each>
								<display>
									<xsl:for-each select="$var3_inf_agens/ns2:kod_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="$var6_http___snomed_info_sct_as_string"/>
								</system>
								<code>
									<xsl:for-each select="$var5_inf_expoz_kod">
										<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf28_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var5_inf_expoz_kod">
										<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf29_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<effectivePeriod>
							<xsl:for-each select="ns2:inf_dat_od">
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
							</xsl:for-each>
							<xsl:for-each select="ns2:inf_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:inf_stat_kod">
							<valueCodeableConcept>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:iso:std:iso:3166'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<display>
										<xsl:for-each select="$var7_cur/ns2:inf_stat_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</valueCodeableConcept>
						</xsl:for-each>
						<xsl:for-each select="ns2:inf_expoz_text">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
						<xsl:for-each select="ns2:inf_koment">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:anf_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ip_anf" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patsumdat_anf" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var20_create_dat_ab_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_ab>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var19_map_of_ip_anf" as="node()*">
			<xsl:for-each select="$ip_anf/ns2:dat_ab">
				<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_ab>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_anf_anam_prob" as="node()*">
			<xsl:call-template name="provisio:anf_anam_prob">
				<xsl:with-param name="anam_probType" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_prob">
						<anam_probType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_probType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_anf_anam_prob">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_anf_anam_inf" as="node()*">
			<xsl:call-template name="provisio:anf_anam_inf">
				<xsl:with-param name="anam_infType" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_inf">
						<anam_infType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_anf_anam_inf">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var3_resultof_anf_anam_infc" as="node()*">
			<xsl:call-template name="provisio:anf_anam_infc">
				<xsl:with-param name="anam_infcType" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_infc">
						<anam_infcType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infcType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_anf_anam_infc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_anf_anam_rao" as="node()*">
			<xsl:call-template name="provisio:anf_anam_rao">
				<xsl:with-param name="anam_rao" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_rao">
						<anam_rao xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_rao>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_anf_anam_rao">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var5_resultof_anf_anam_sa" as="node()*">
			<xsl:call-template name="provisio:anf_anam_sa">
				<xsl:with-param name="anam_sa" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_sa">
						<anam_sa xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_sa>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var5_resultof_anf_anam_sa">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var6_resultof_anf_anam_aba" as="node()*">
			<xsl:call-template name="provisio:anf_anam_aba">
				<xsl:with-param name="anam_aba" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_aba">
						<anam_aba xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_aba>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var6_resultof_anf_anam_aba">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var7_resultof_anf_anam_abk" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abk">
				<xsl:with-param name="anam_abk" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_abk">
						<anam_abk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abk>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var7_resultof_anf_anam_abk">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var8_resultof_anf_anam_abd" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abd">
				<xsl:with-param name="anam_abd" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_abd">
						<anam_abd xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abd>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var8_resultof_anf_anam_abd">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var9_resultof_anf_anam_abj" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abj">
				<xsl:with-param name="anam_abj" as="node()*">
					<xsl:for-each select="$ip_anf/ns2:anam_abj">
						<anam_abj xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abj>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var19_map_of_ip_anf" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var9_resultof_anf_anam_abj">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var10_resultof_anf_anam_prob" as="node()*">
			<xsl:call-template name="provisio:anf_anam_prob">
				<xsl:with-param name="anam_probType" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_prob">
						<anam_probType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_probType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var10_resultof_anf_anam_prob">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var11_resultof_anf_anam_inf" as="node()*">
			<xsl:call-template name="provisio:anf_anam_inf">
				<xsl:with-param name="anam_infType" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_inf">
						<anam_infType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var11_resultof_anf_anam_inf">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var12_resultof_anf_anam_infc" as="node()*">
			<xsl:call-template name="provisio:anf_anam_infc">
				<xsl:with-param name="anam_infcType" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_infc">
						<anam_infcType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infcType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var12_resultof_anf_anam_infc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var13_resultof_anf_anam_rao" as="node()*">
			<xsl:call-template name="provisio:anf_anam_rao">
				<xsl:with-param name="anam_rao" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_rao">
						<anam_rao xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_rao>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var13_resultof_anf_anam_rao">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var14_resultof_anf_anam_sa" as="node()*">
			<xsl:call-template name="provisio:anf_anam_sa">
				<xsl:with-param name="anam_sa" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_sa">
						<anam_sa xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_sa>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var14_resultof_anf_anam_sa">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var15_resultof_anf_anam_aba" as="node()*">
			<xsl:call-template name="provisio:anf_anam_aba">
				<xsl:with-param name="anam_aba" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_aba">
						<anam_aba xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_aba>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var15_resultof_anf_anam_aba">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var16_resultof_anf_anam_abk" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abk">
				<xsl:with-param name="anam_abk" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_abk">
						<anam_abk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abk>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var16_resultof_anf_anam_abk">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var17_resultof_anf_anam_abd" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abd">
				<xsl:with-param name="anam_abd" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_abd">
						<anam_abd xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abd>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var17_resultof_anf_anam_abd">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var18_resultof_anf_anam_abj" as="node()*">
			<xsl:call-template name="provisio:anf_anam_abj">
				<xsl:with-param name="anam_abj" as="node()*">
					<xsl:for-each select="$patsumdat_anf/ns2:anam_abj">
						<anam_abj xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abj>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" select="$var20_create_dat_ab_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var18_resultof_anf_anam_abj">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:dg">
		<xsl:param name="dgzType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$dgzType">
			<xsl:variable name="var5_dat_vb" as="node()*" select="ns2:dat_vb"/>
			<xsl:variable name="var6_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var7_diag" as="node()*" select="ns2:diag"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var6_guid">
					<xsl:for-each select="$var6_guid">
						<xsl:variable name="var1_resultof_FullURL_Condition" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Condition">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Condition">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Condition>
						<xsl:for-each select="$var6_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:for-each select="$var7_diag">
										<xsl:sequence select="fn:normalize-space(fn:string(.))"/>
									</xsl:for-each>
								</xhtml:p>
							</xhtml:div>
						</text>
						<clinicalStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-clinical'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'active'"/>
								</code>
							</coding>
						</clinicalStatus>
						<verificationStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-ver-status'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'confirmed'"/>
								</code>
							</coding>
						</verificationStatus>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'encounter-diagnosis'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Encounter Diagnosis'"/>
								</display>
							</coding>
						</category>
						<xsl:for-each select="ns2:zavaz_dg">
							<xsl:variable name="var3_cur_as_string" as="xs:string" select="fn:string(.)"/>
							<severity>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="$var3_cur_as_string"/>
									</code>
									<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf30_inputtoresult">
											<xsl:with-param name="input" select="$var3_cur_as_string" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<display>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</display>
								</coding>
							</severity>
						</xsl:for-each>
						<code>
							<xsl:for-each select="$var7_diag">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/sid/icd-10'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:normalize-space(fn:string(.))"/>
									</code>
									<xsl:for-each select="@nazev">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var4_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var5_dat_vb)">
									<xsl:for-each select="$var5_dat_vb">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var4_test_resultof_exists">
							<onsetDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</onsetDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<recorder>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</recorder>
						</xsl:for-each>
						<xsl:for-each select="ns2:pozn">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Condition>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:dg_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ip_dg" select="()"/>
		<xsl:param name="patsumdat_dg" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var1_resultof_dg" as="node()*">
			<xsl:call-template name="provisio:dg">
				<xsl:with-param name="dgzType" as="node()*">
					<xsl:for-each select="$ip_dg/ns2:dgz">
						<dgzType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dgzType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$ip_dg/@dat_ab">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="xs:string(xs:dateTime(fn:string(.)))"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_dg">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_dg" as="node()*">
			<xsl:call-template name="provisio:dg">
				<xsl:with-param name="dgzType" as="node()*">
					<xsl:for-each select="$patsumdat_dg/ns2:dgz">
						<dgzType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dgzType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$dat_prov">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_dg">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Procedure">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:chv">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="chvType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$chvType">
			<xsl:variable name="var7_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var8_chvps_text" as="node()?" select="@chvps_text"/>
			<xsl:variable name="var9_dat_vyk" as="node()*" select="ns2:dat_vyk"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var7_guid">
					<xsl:for-each select="$var7_guid">
						<xsl:variable name="var1_resultof_FullURL_Procedure" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Procedure">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Procedure">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Procedure>
						<xsl:for-each select="$var7_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Procedure-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xsl:for-each select="$var8_chvps_text">
									<xsl:sequence select="fn:string(.)"/>
								</xsl:for-each>
							</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'completed'"/>
						</status>
						<code>
							<xsl:for-each select="@chvps_klic">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var8_chvps_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var3_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var9_dat_vyk)">
									<xsl:for-each select="$var9_dat_vyk">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var2_dat_ab" as="node()?" select="@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var2_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var2_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$dat_ab">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var3_test_resultof_exists">
							<performedDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</performedDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<actor>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</actor>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:duvod_kod">
							<reasonCode>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</reasonCode>
						</xsl:for-each>
						<xsl:for-each select="ns2:alv_form/ns2:ptext">
							<bodySite>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</bodySite>
						</xsl:for-each>
						<xsl:for-each select="ns2:vysledek">
							<xsl:variable name="var6_cur_as_string" as="xs:string" select="fn:string(.)"/>
							<outcome>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<xsl:variable name="var4_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf31_inputtoresult">
											<xsl:with-param name="input" select="$var6_cur_as_string" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<code>
										<xsl:for-each select="$var4_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</code>
									<xsl:variable name="var5_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf32_inputtoresult">
											<xsl:with-param name="input" select="$var6_cur_as_string" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<display>
										<xsl:for-each select="$var5_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</display>
								</coding>
							</outcome>
						</xsl:for-each>
						<xsl:for-each select="ns2:komplikace">
							<complication>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</complication>
						</xsl:for-each>
					</Procedure>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:chv_-_all">
		<xsl:param name="ip_chv" select="()"/>
		<xsl:param name="ip_anf_anam_vyk_chv" select="()"/>
		<xsl:param name="patsumdat_anf_anam_vyk_chv" select="()"/>
		<xsl:param name="patsudat_chv" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ds_ip415079" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var5_create_dat_ab_of_dat_prov" as="node()*">
			<xsl:for-each select="$dat_prov">
				<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_ab>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_chv" as="node()*">
			<xsl:call-template name="provisio:chv">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="chvType" as="node()*">
					<xsl:for-each select="$ip_chv">
						<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</chvType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_chv">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_chv" as="node()*">
			<xsl:call-template name="provisio:chv">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="chvType" as="node()*">
					<xsl:for-each select="$ip_anf_anam_vyk_chv">
						<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</chvType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$ds_ip415079">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_chv">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var3_resultof_chv" as="node()*">
			<xsl:call-template name="provisio:chv">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="chvType" as="node()*">
					<xsl:for-each select="$patsumdat_anf_anam_vyk_chv">
						<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</chvType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var5_create_dat_ab_of_dat_prov" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_chv">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_chv" as="node()*">
			<xsl:call-template name="provisio:chv">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="chvType" as="node()*">
					<xsl:for-each select="$patsudat_chv">
						<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</chvType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var5_create_dat_ab_of_dat_prov" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_chv">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Condition">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:fs">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="fsType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$fsType">
			<xsl:variable name="var5_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var6_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var7_text" as="node()*" select="ns2:text"/>
			<xsl:variable name="var8_typ" as="node()?" select="@typ"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var6_guid">
					<xsl:for-each select="$var6_guid">
						<xsl:variable name="var1_resultof_FullURL_Condition" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Condition">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Condition">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Condition>
						<xsl:for-each select="$var6_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:for-each select="$var7_text/ns2:ptext">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xhtml:p>
							</xhtml:div>
						</text>
						<clinicalStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-clinical'))"/>
								</system>
								<code>
									<xsl:for-each select="$var8_typ">
										<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf33_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var8_typ">
										<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf34_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</clinicalStatus>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'problem-list-item'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Problem List Item'"/>
								</display>
							</coding>
						</category>
						<xsl:for-each select="$var7_text">
							<code>
								<text>
									<xsl:for-each select="ns2:ptext">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</text>
							</code>
						</xsl:for-each>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var4_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var5_dat_ab)">
									<xsl:sequence select="xs:string(xs:dateTime(fn:string($var5_dat_ab)))"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var4_test_resultof_exists">
							<recordedDate>
								<xsl:attribute name="value" namespace="" select="."/>
							</recordedDate>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<recorder>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</recorder>
						</xsl:for-each>
					</Condition>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:fs_-_all">
		<xsl:param name="ip_fs" select="()"/>
		<xsl:param name="patsumdat_fs" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var1_resultof_fs" as="node()*">
			<xsl:call-template name="provisio:fs">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="fsType" as="node()*">
					<xsl:for-each select="$ip_fs">
						<fsType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</fsType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_fs">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_fs" as="node()*">
			<xsl:call-template name="provisio:fs">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="fsType" as="node()*">
					<xsl:for-each select="$patsumdat_fs">
						<fsType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</fsType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$dat_prov">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_fs">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Immunization">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:oc">
		<xsl:param name="oczType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:for-each select="$oczType">
			<xsl:variable name="var9_cur" as="node()" select="."/>
			<xsl:variable name="var6_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var7_typ_oc_text" as="node()?" select="@typ_oc_text"/>
			<xsl:variable name="var8_davka" as="node()*" select="ns2:davka"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var6_guid">
					<xsl:for-each select="$var6_guid">
						<xsl:variable name="var1_resultof_FullURL_Immunization" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Immunization">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Immunization">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Immunization>
						<xsl:for-each select="$var6_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Immunization-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:for-each select="$var7_typ_oc_text">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xhtml:p>
							</xhtml:div>
						</text>
						<xsl:for-each select="@id_ockovani">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'ID očkování'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSALA.htm'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@id_ockovani_isin">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'ID očkování dle ISIN'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.uzis.cz/'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<status>
							<xsl:attribute name="value" namespace="" select="'completed'"/>
						</status>
						<vaccineCode>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAHW.htm'))"/>
								</system>
								<code>
									<xsl:for-each select="@typ_oc_kod">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var7_typ_oc_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
							<xsl:for-each select="$var8_davka">
								<xsl:variable name="var2_cur" as="node()" select="."/>
								<xsl:for-each select="@kod_ol">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://www.sukl.cz'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<display>
											<xsl:for-each select="$var2_cur/@nazev_ol">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
										<xsl:for-each select="$var2_cur/@gene_ol">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="ns2:agens">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/DSAKM.htm'))"/>
									</system>
									<code>
										<xsl:for-each select="@agens_klic">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<xsl:for-each select="@agens_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
							<xsl:for-each select="$var8_davka/@pozn">
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</xsl:for-each>
						</vaccineCode>
						<patient>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</patient>
						<xsl:variable name="var3_test_resultof_any" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists(($var8_davka)[fn:exists(ns2:dat_du)])">
									<xsl:for-each select="$var8_davka/ns2:dat_du">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var3_test_resultof_any">
							<occurrenceDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</occurrenceDateTime>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka/@nazev_vyrobce">
							<manufacturer>
								<display>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</display>
							</manufacturer>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka/@cis_sarze">
							<lotNumber>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</lotNumber>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka/ns2:dat_expirace">
							<expirationDate>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</expirationDate>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka">
							<xsl:variable name="var4_cur" as="node()" select="."/>
							<xsl:for-each select="@misto_apl_klic">
								<site>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBUU.htm'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var4_cur/@misto_apl_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</site>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka">
							<xsl:variable name="var5_cur" as="node()" select="."/>
							<xsl:for-each select="@apl_cesta_klic">
								<route>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBUT.htm'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var5_cur/@apl_cesta_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</route>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<actor>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</actor>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:indikace">
							<reasonCode>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.uzis.cz/'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var9_cur/@indikace_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</reasonCode>
						</xsl:for-each>
						<xsl:for-each select="$var8_davka">
							<protocolApplied>
								<doseNumberPositiveInt>
									<xsl:for-each select="@cis_davky">
										<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
									</xsl:for-each>
								</doseNumberPositiveInt>
								<xsl:for-each select="@poc_davek">
									<seriesDosesString>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
									</seriesDosesString>
								</xsl:for-each>
							</protocolApplied>
						</xsl:for-each>
					</Immunization>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:oc_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="ip_oc" select="()"/>
		<xsl:param name="anf_anam_oc" select="()"/>
		<xsl:param name="patsumdat_anf_anam_oc" select="()"/>
		<xsl:param name="patsumdat_oc" select="()"/>
		<xsl:param name="ds_ip415076" select="()"/>
		<xsl:param name="dsipdat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:variable name="var5_create_dat_ab_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_ab>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_oc" as="node()*">
			<xsl:call-template name="provisio:oc">
				<xsl:with-param name="oczType" as="node()*">
					<xsl:for-each select="$ip_oc/ns2:ocz">
						<oczType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</oczType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$dsipdat_ab">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="xs:string(.)"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_oc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_oc" as="node()*">
			<xsl:call-template name="provisio:oc">
				<xsl:with-param name="oczType" as="node()*">
					<xsl:for-each select="$anf_anam_oc/ns2:ocz">
						<oczType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</oczType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$ds_ip415076">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_oc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var3_resultof_oc" as="node()*">
			<xsl:call-template name="provisio:oc">
				<xsl:with-param name="oczType" as="node()*">
					<xsl:for-each select="$patsumdat_anf_anam_oc/ns2:ocz">
						<oczType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</oczType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var5_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_oc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_oc" as="node()*">
			<xsl:call-template name="provisio:oc">
				<xsl:with-param name="oczType" as="node()*">
					<xsl:for-each select="$patsumdat_oc/ns2:ocz">
						<oczType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</oczType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" select="$var5_create_dat_ab_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_oc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:h">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="hType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$hType">
			<xsl:variable name="var2_cur" as="node()" select="."/>
			<xsl:for-each select="@vyska">
				<xsl:variable name="var1_guid_vyska" as="node()?" select="$var2_cur/@guid_vyska"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var1_guid_vyska">
						<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
					</xsl:for-each>
					<xsl:for-each select="$var1_guid_vyska">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var1_guid_vyska">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var2_cur/@vguid_vyska">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Body height</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8302-2'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Body height'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</code>
							</valueQuantity>
							<xsl:for-each select="$var2_cur/ns2:pozn">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$hType">
			<xsl:variable name="var4_cur" as="node()" select="."/>
			<xsl:for-each select="@hmotnost">
				<xsl:variable name="var3_guid_hmotnost" as="node()?" select="$var4_cur/@guid_hmotnost"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var3_guid_hmotnost">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var3_guid_hmotnost">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var4_cur/@vguid_hmotnost">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Body weight</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'29463-7'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Body weight'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:decimal(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'kg'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'kg'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$hType">
			<xsl:variable name="var6_cur" as="node()" select="."/>
			<xsl:for-each select="@bmi">
				<xsl:variable name="var5_guid_bmi" as="node()?" select="$var6_cur/@guid_bmi"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var5_guid_bmi">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var5_guid_bmi">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var6_cur/@vguid_bmi">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Body mass index (BMI) [Ratio]</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'39156-5'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Body mass index (BMI) [Ratio]'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:decimal(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'kg/m2'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'kg/m2'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$hType">
			<xsl:variable name="var8_cur" as="node()" select="."/>
			<xsl:for-each select="@o_hlava">
				<xsl:variable name="var7_guid_o_hlava" as="node()?" select="$var8_cur/@guid_o_hlava"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var7_guid_o_hlava">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var7_guid_o_hlava">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var8_cur/@vguid_o_hlava">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Head Occipital-frontal circumference</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'9843-4'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Head Occipital-frontal circumference'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$hType">
			<xsl:variable name="var10_cur" as="node()" select="."/>
			<xsl:for-each select="@o_hrudnik">
				<xsl:variable name="var9_guid_o_hrudnik" as="node()?" select="$var10_cur/@guid_o_hrudnik"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var9_guid_o_hrudnik">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var9_guid_o_hrudnik">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var10_cur/@vguid_o_hrudnik">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Waist Circumference at umbilicus by Tape measure</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8280-0'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Waist Circumference at umbilicus by Tape measure'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$hType">
			<xsl:variable name="var12_cur" as="node()" select="."/>
			<xsl:for-each select="@o_pas">
				<xsl:variable name="var11_guid_o_pas" as="node()?" select="$var12_cur/@guid_o_pas"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var11_guid_o_pas">
						<fullUrl>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
						</fullUrl>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var11_guid_o_pas">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var12_cur/@vguid_o_pas">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xhtml:p>Adult Waist Circumference Protocol</xhtml:p>
								</xhtml:div>
							</text>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'56086-2'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Adult Waist Circumference Protocol'"/>
									</display>
								</coding>
							</code>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:for-each select="$dat_prov">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<valueQuantity>
								<value>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</value>
								<unit>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</unit>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'cm'"/>
								</code>
							</valueQuantity>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:h_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="ip_h" select="()"/>
		<xsl:param name="patsumdat_h" select="()"/>
		<xsl:variable name="var3_create_dat_prov_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_h" as="node()*">
			<xsl:call-template name="provisio:h">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="hType" as="node()*">
					<xsl:for-each select="$ip_h">
						<hType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</hType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_h">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_h" as="node()*">
			<xsl:call-template name="provisio:h">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="hType" as="node()*">
					<xsl:for-each select="$patsumdat_h">
						<hType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</hType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_h">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_CarePlan">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ld">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ldType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$ldType">
			<xsl:variable name="var3_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var4_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var5_text" as="node()*" select="ns2:text"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var3_guid">
					<xsl:for-each select="$var3_guid">
						<xsl:variable name="var1_resultof_FullURL_CarePlan" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_CarePlan">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_CarePlan">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<CarePlan>
						<xsl:for-each select="$var3_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:for-each select="$var5_text/ns2:ptext">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xhtml:p>
							</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'completed'"/>
						</status>
						<intent>
							<xsl:attribute name="value" namespace="" select="'plan'"/>
						</intent>
						<xsl:for-each select="$var5_text">
							<description>
								<xsl:for-each select="ns2:ptext">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</description>
						</xsl:for-each>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var4_dat_ab)">
									<xsl:sequence select="xs:string(xs:dateTime(fn:string($var4_dat_ab)))"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<created>
							<xsl:for-each select="$var2_test_resultof_exists">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</created>
						<xsl:for-each select="$practitionerReference">
							<author>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</author>
						</xsl:for-each>
					</CarePlan>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ld_-_all">
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="ip_ld" select="()"/>
		<xsl:param name="patsumdat_ld" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var1_resultof_ld" as="node()*">
			<xsl:call-template name="provisio:ld">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ldType" as="node()*">
					<xsl:for-each select="$ip_ld">
						<ldType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ldType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_ld">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_ld" as="node()*">
			<xsl:call-template name="provisio:ld">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ldType" as="node()*">
					<xsl:for-each select="$patsumdat_ld">
						<ldType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ldType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$dat_prov">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_ld">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_MedicationAdministration">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:le">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="leType" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$leType">
			<xsl:variable name="var11_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:lez">
				<xsl:variable name="var10_cur" as="node()" select="."/>
				<xsl:variable name="var6_kod_atc" as="node()?" select="@kod_atc"/>
				<xsl:variable name="var7_guid" as="node()?" select="@guid"/>
				<xsl:variable name="var8_nazev_lek" as="node()?" select="@nazev_lek"/>
				<xsl:variable name="var9_dat_ab" as="node()?" select="$var11_cur/@dat_ab"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var7_guid">
						<xsl:for-each select="$var7_guid">
							<xsl:variable name="var1_resultof_FullURL_MedicationAdministration" as="xs:string?">
								<xsl:call-template name="provisio:FullURL_MedicationAdministration">
									<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_FullURL_MedicationAdministration">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<MedicationAdministration>
							<xsl:for-each select="$var7_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="@vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div>
									<xsl:for-each select="$var8_nazev_lek">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xhtml:div>
							</text>
							<status>
								<xsl:for-each select="@ind_oprav_sd">
									<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf35_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</status>
							<xsl:for-each select="ns2:zmena_m_kod">
								<statusReason>
									<coding>
										<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf36_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<code>
											<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="$var10_cur/ns2:zmena_m_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</statusReason>
							</xsl:for-each>
							<medicationCodeableConcept>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/LEKY.htm'))"/>
									</system>
									<code>
										<xsl:for-each select="@kod_lek">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="$var8_nazev_lek">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
								<xsl:variable name="var4_test_resultof_exists" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var6_kod_atc)">
											<xsl:sequence select="fn:string($var6_kod_atc)"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="ns2:aktivni_latka/@kod_atc">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<xsl:for-each select="$var4_test_resultof_exists">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://www.whocc.no/atc/'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="."/>
										</code>
										<xsl:for-each select="$var10_cur/ns2:aktivni_latka/@nazev">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
								<xsl:for-each select="@gene_lek">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</medicationCodeableConcept>
							<subject>
								<reference>
									<xsl:for-each select="$patientReference">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</reference>
							</subject>
							<xsl:variable name="var5_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var9_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var9_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_ab">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var5_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<actor>
										<reference>
											<xsl:attribute name="value" namespace="" select="."/>
										</reference>
									</actor>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="ns2:ind_m_kod">
								<reasonCode>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBWI.htm'))"/>
										</system>
										<version>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</version>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
									<xsl:for-each select="$var10_cur/ns2:ind_m_text">
										<text>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</text>
									</xsl:for-each>
								</reasonCode>
							</xsl:for-each>
							<xsl:for-each select="ns2:pozn">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
							<xsl:for-each select="ns2:rozpis_v">
								<dosage>
									<xsl:for-each select="$var10_cur/@misto_apl_klic">
										<site>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBUU.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var10_cur/@misto_apl_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</site>
									</xsl:for-each>
									<xsl:for-each select="$var10_cur/@apl_cesta_klic">
										<route>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBUT.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var10_cur/@apl_cesta_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</route>
									</xsl:for-each>
									<xsl:for-each select="$var10_cur/@forma_klic">
										<method>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBRW.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var10_cur/@forma_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</method>
									</xsl:for-each>
									<rateQuantity>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</value>
									</rateQuantity>
								</dosage>
							</xsl:for-each>
						</MedicationAdministration>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:le_-_all">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ip_le" select="()"/>
		<xsl:param name="patsumdat_le" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var1_resultof_le" as="node()*">
			<xsl:call-template name="provisio:le">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="leType" as="node()*">
					<xsl:for-each select="$ip_le">
						<leType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</leType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_le">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_le" as="node()*">
			<xsl:call-template name="provisio:le">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="leType" as="node()*">
					<xsl:for-each select="$patsumdat_le">
						<leType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</leType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_ab" as="node()*">
					<xsl:for-each select="$dat_prov">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_le">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_DiagnosticReport">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:an">
		<xsl:param name="anType" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="dat_ab" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$anType">
			<xsl:variable name="var3_dat_ab" as="node()?" select="@dat_ab"/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_DiagnosticReport" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_DiagnosticReport">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_DiagnosticReport">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<DiagnosticReport>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/DiagnosticReport-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>History and physical note</xhtml:p>
							</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'34117-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History and physical note'"/>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:variable name="var2_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var3_dat_ab)">
									<xsl:sequence select="xs:string(xs:dateTime(fn:string($var3_dat_ab)))"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_ab">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var2_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<conclusion>
							<xsl:for-each select="ns2:text/ns2:ptext">
								<xsl:attribute name="value" namespace="" select="fn:normalize-space(fn:string(.))"/>
							</xsl:for-each>
						</conclusion>
					</DiagnosticReport>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:an_-_all">
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="ip_an" select="()"/>
		<xsl:param name="patsumdat_an" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:variable name="var1_resultof_an" as="node()*">
			<xsl:call-template name="provisio:an">
				<xsl:with-param name="anType" as="node()*">
					<xsl:for-each select="$ip_an">
						<anType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_an">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_an" as="node()*">
			<xsl:call-template name="provisio:an">
				<xsl:with-param name="anType" as="node()*">
					<xsl:for-each select="$patsumdat_an">
						<anType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_ab" as="node()+">
					<xsl:for-each select="$dat_prov">
						<dat_ab xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</dat_ab>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_an">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:grav">
		<xsl:param name="gravType" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:for-each select="$gravType">
			<xsl:variable name="var4_typ" as="node()?" select="@typ"/>
			<xsl:variable name="var5_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var5_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var5_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-pregnancy-status-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>Pregnancy status</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'82810-3'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Pregnancy status'"/>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_prov">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueCodeableConcept>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
								</system>
								<code>
									<xsl:for-each select="$var4_typ">
										<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf37_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var4_typ">
										<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf37_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
											<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
												<xsl:call-template name="vmf:vmf38_inputtoresult">
													<xsl:with-param name="input" select="." as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</valueCodeableConcept>
						<xsl:for-each select="ns2:grav_tp">
							<hasMember>
								<reference>
									<xsl:for-each select="@guid">
										<xsl:attribute name="value" namespace="" select="fn:concat('urn:uuid:', fn:string(.))"/>
									</xsl:for-each>
								</reference>
							</hasMember>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$gravType/ns2:grav_tp">
			<xsl:variable name="var7_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var8_zutp_klic" as="node()?" select="@zutp_klic"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var7_guid">
					<fullUrl>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat('urn:uuid:', fn:string(.))))"/>
					</fullUrl>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var7_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-pregnancy-edd-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xsl:for-each select="$var8_zutp_klic">
									<xsl:call-template name="vmf:vmf39_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:for-each>
							</xhtml:div>
						</text>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:for-each select="$var8_zutp_klic">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var8_zutp_klic">
										<xsl:variable name="var6_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf39_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var6_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</code>
						<subject>
							<reference>
								<xsl:for-each select="$patientReference">
									<xsl:attribute name="value" namespace="" select="."/>
								</xsl:for-each>
							</reference>
						</subject>
						<xsl:for-each select="$dat_prov">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:dat_por">
							<valueDateTime>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:date(fn:string(.)))"/>
							</valueDateTime>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:grav_-_all">
		<xsl:param name="ip_grav" select="()"/>
		<xsl:param name="patsumdat_grav" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:variable name="var3_create_dat_prov_of_dat_prov" as="node()+">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_grav" as="node()*">
			<xsl:call-template name="provisio:grav">
				<xsl:with-param name="gravType" as="node()*">
					<xsl:for-each select="$ip_grav">
						<gravType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</gravType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_grav">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_grav" as="node()*">
			<xsl:call-template name="provisio:grav">
				<xsl:with-param name="gravType" as="node()*">
					<xsl:for-each select="$patsumdat_grav">
						<gravType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</gravType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var3_create_dat_prov_of_dat_prov" as="node()+"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_grav">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_FamilyMemberHistory">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_DiagnosticReport">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_DeviceUseStatement">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Procedure">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Immunization">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_MedicationAdministration">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_AllergyIntolerance">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Observation">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Flag">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_CarePlan">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Condition">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:ip">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="HDRdate" select="()"/>
		<xsl:param name="guid" select="()"/>
		<xsl:param name="ip" select="()"/>
		<xsl:variable name="var100_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:chv">
				<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</chvType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var101_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:h">
				<hType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</hType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var102_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:u">
				<uType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</uType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var103_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:an">
				<anType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</anType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var104_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:anf">
				<anfType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</anfType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var105_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:grav">
				<gravType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</gravType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var106_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:fs">
				<fsType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</fsType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var107_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:oc">
				<ocType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ocType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var108_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:le">
				<leType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</leType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var109_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ld">
				<ldType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ldType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var110_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:fyznal">
				<fyznalType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</fyznalType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var111_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:dg">
				<dgType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dgType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var98_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:anf/ns2:anam_vyk/ns2:chv">
				<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</chvType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var99_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var97_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:anf/ns2:anam_oc">
				<ocType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:for-each select="@guid">
						<xsl:attribute name="guid" namespace="" select="fn:string(.)"/>
					</xsl:for-each>
					<xsl:for-each select="@vguid">
						<xsl:attribute name="vguid" namespace="" select="fn:string(.)"/>
					</xsl:for-each>
					<xsl:for-each select="ns2:ocz">
						<ocz>
							<xsl:sequence select="(./@node(), ./node())"/>
						</ocz>
					</xsl:for-each>
				</ocType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var85_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:oc">
				<ocType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ocType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var86_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:le">
				<leType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</leType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var87_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:h">
				<hType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</hType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var88_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:u">
				<uType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</uType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var89_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:dg">
				<dgType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dgType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var90_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:an">
				<anType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</anType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var91_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:fyznal">
				<fyznalType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</fyznalType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var92_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:anf">
				<anfType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</anfType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var93_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:ld">
				<ldType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ldType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var94_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:fs">
				<fsType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</fsType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var95_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:grav">
				<gravType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</gravType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var96_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:chv">
				<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</chvType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var84_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:anf/ns2:anam_vyk/ns2:chv">
				<chvType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</chvType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var83_map_of_ip" as="node()*">
			<xsl:for-each select="$ip/ns2:ku/ns2:ku_z/ns2:ku_z_patsumdat/ns2:anf/ns2:anam_oc">
				<ocType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:for-each select="@guid">
						<xsl:attribute name="guid" namespace="" select="fn:string(.)"/>
					</xsl:for-each>
					<xsl:for-each select="@vguid">
						<xsl:attribute name="vguid" namespace="" select="fn:string(.)"/>
					</xsl:for-each>
					<xsl:for-each select="ns2:ocz">
						<ocz>
							<xsl:sequence select="(./@node(), ./node())"/>
						</ocz>
					</xsl:for-each>
				</ocType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var4_resultof_le___all" as="node()*">
			<xsl:call-template name="provisio:le_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_le" select="$var108_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_le" select="$var86_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var8_resultof_u___all" as="node()*">
			<xsl:call-template name="provisio:u_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_u" select="$var102_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_u" select="$var88_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var12_resultof_fs___all" as="node()*">
			<xsl:call-template name="provisio:fs_-_all">
				<xsl:with-param name="ip_fs" select="$var106_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_fs" select="$var94_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var16_resultof_ld___all" as="node()*">
			<xsl:call-template name="provisio:ld_-_all">
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="ip_ld" select="$var109_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_ld" select="$var93_map_of_ip" as="node()*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var20_resultof_chv___all" as="node()*">
			<xsl:call-template name="provisio:chv_-_all">
				<xsl:with-param name="ip_chv" select="$var100_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_anf_anam_vyk_chv" select="$var98_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_anf_anam_vyk_chv" select="$var84_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsudat_chv" select="$var96_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var24_resultof_oc___all" as="node()*">
			<xsl:call-template name="provisio:oc_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_oc" select="$var107_map_of_ip" as="node()*"/>
				<xsl:with-param name="anf_anam_oc" select="$var97_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_anf_anam_oc" select="$var83_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_oc" select="$var85_map_of_ip" as="node()*"/>
				<xsl:with-param name="dsipdat_ab" select="()" as="xs:dateTime?"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var28_resultof_h___all" as="node()*">
			<xsl:call-template name="provisio:h_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_h" select="$var101_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_h" select="$var87_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var32_resultof_fyznal___all" as="node()*">
			<xsl:call-template name="provisio:fyznal_-_all">
				<xsl:with-param name="ip_fyznal" select="$var110_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_fyznal" select="$var91_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var36_resultof_u___all" as="node()*">
			<xsl:call-template name="provisio:u_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_u" select="$var102_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_u" select="$var88_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var40_resultof_an___all" as="node()*">
			<xsl:call-template name="provisio:an_-_all">
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_an" select="$var103_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_an" select="$var90_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var44_resultof_grav___all" as="node()*">
			<xsl:call-template name="provisio:grav_-_all">
				<xsl:with-param name="ip_grav" select="$var105_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_grav" select="$var95_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var48_resultof_u___all" as="node()*">
			<xsl:call-template name="provisio:u_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_u" select="$var102_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_u" select="$var88_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var52_resultof_u___all" as="node()*">
			<xsl:call-template name="provisio:u_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_u" select="$var102_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_u" select="$var88_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var56_resultof_anf___all" as="node()*">
			<xsl:call-template name="provisio:anf_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_anf" select="$var104_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patsumdat_anf" select="$var92_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var60_resultof_anf___all" as="node()*">
			<xsl:call-template name="provisio:anf_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_anf" select="$var104_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patsumdat_anf" select="$var92_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var64_resultof_anf___all" as="node()*">
			<xsl:call-template name="provisio:anf_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_anf" select="$var104_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patsumdat_anf" select="$var92_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var68_resultof_dg___all" as="node()*">
			<xsl:call-template name="provisio:dg_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_dg" select="$var111_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_dg" select="$var89_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:variable name="var69_resultof_Composition_EU_PS" as="node()*">
			<xsl:call-template name="provisio:Composition_EU_PS">
				<xsl:with-param name="HDRdate" select="$HDRdate" as="xs:string*"/>
				<xsl:with-param name="sectionMedications_le" as="node()*">
					<xsl:for-each select="$var4_resultof_le___all">
						<xsl:variable name="var3_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var2_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var3_cur/ns0:resource/ns0:MedicationAdministration/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var1_resultof_Reference_MedicationAdministration" as="xs:string?">
											<xsl:call-template name="provisio:Reference_MedicationAdministration">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var2_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var1_resultof_Reference_MedicationAdministration">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionAllergies_ua" as="node()*">
					<xsl:for-each select="$var8_resultof_u___all">
						<xsl:variable name="var7_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var7_cur/ns0:resource/ns0:AllergyIntolerance/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'AllergyIntolerance')])]">
							<xsl:variable name="var6_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var7_cur/ns0:resource/ns0:AllergyIntolerance/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var5_resultof_Reference_AllergyIntolerance" as="xs:string?">
											<xsl:call-template name="provisio:Reference_AllergyIntolerance">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var6_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var5_resultof_Reference_AllergyIntolerance">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="guid" as="xs:string?">
					<xsl:if test="fn:exists($guid)">
						<xsl:sequence select="$guid"/>
					</xsl:if>
				</xsl:with-param>
				<xsl:with-param name="sectionFunctionalStatus_fs" as="node()*">
					<xsl:for-each select="$var12_resultof_fs___all">
						<xsl:variable name="var11_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var10_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var11_cur/ns0:resource/ns0:Condition/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var9_resultof_Reference_Condition" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Condition">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var10_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var9_resultof_Reference_Condition">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="sectionPlanOfCare_ld" as="node()*">
					<xsl:for-each select="$var16_resultof_ld___all">
						<xsl:variable name="var15_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var14_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var15_cur/ns0:resource/ns0:CarePlan/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var13_resultof_Reference_CarePlan" as="xs:string?">
											<xsl:call-template name="provisio:Reference_CarePlan">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var14_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var13_resultof_Reference_CarePlan">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="sectionProceduresHx_chv" as="node()*">
					<xsl:for-each select="$var20_resultof_chv___all">
						<xsl:variable name="var19_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var18_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var19_cur/ns0:resource/ns0:Procedure/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var17_resultof_Reference_Procedure" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Procedure">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var18_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var17_resultof_Reference_Procedure">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="sectionImmunizations_oc" as="node()*">
					<xsl:for-each select="$var24_resultof_oc___all">
						<xsl:variable name="var23_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var22_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var23_cur/ns0:resource/ns0:Immunization/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var21_resultof_Reference_Immunization" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Immunization">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var22_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var21_resultof_Reference_Immunization">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionVitalSigns_h" as="node()*">
					<xsl:for-each select="$var28_resultof_h___all">
						<xsl:variable name="var27_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var26_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var27_cur/ns0:resource/ns0:Observation/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var25_resultof_Reference_Observation" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Observation">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var26_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var25_resultof_Reference_Observation">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionVitalSigns_fyznal" as="node()*">
					<xsl:for-each select="$var32_resultof_fyznal___all">
						<xsl:variable name="var31_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var30_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var31_cur/ns0:resource/ns0:Observation/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var29_resultof_Reference_Observation" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Observation">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var30_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var29_resultof_Reference_Observation">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionResults_uks" as="node()*">
					<xsl:for-each select="$var36_resultof_u___all">
						<xsl:variable name="var35_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var35_cur/ns0:resource/ns0:Observation/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'Observation')])]">
							<xsl:variable name="var34_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var35_cur/ns0:resource/ns0:Observation/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var33_resultof_Reference_Observation" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Observation">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var34_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var33_resultof_Reference_Observation">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionResults_an" as="node()*">
					<xsl:for-each select="$var40_resultof_an___all">
						<xsl:variable name="var39_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var38_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var39_cur/ns0:resource/ns0:DiagnosticReport/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var37_resultof_Reference_DiagnosticReport" as="xs:string?">
											<xsl:call-template name="provisio:Reference_DiagnosticReport">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var38_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var37_resultof_Reference_DiagnosticReport">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionPregnancyHx_grav" as="node()*">
					<xsl:for-each select="$var44_resultof_grav___all">
						<xsl:variable name="var43_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var42_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var43_cur/ns0:resource/ns0:Observation/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var41_resultof_Reference_Observation" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Observation">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var42_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var41_resultof_Reference_Observation">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionMedicalDevices_uniz" as="node()*">
					<xsl:for-each select="$var48_resultof_u___all">
						<xsl:variable name="var47_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var47_cur/ns0:resource/ns0:DeviceUseStatement/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'DeviceUseStatement')])]">
							<xsl:variable name="var46_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var47_cur/ns0:resource/ns0:DeviceUseStatement/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var45_resultof_Reference_DeviceUseStatement" as="xs:string?">
											<xsl:call-template name="provisio:Reference_DeviceUseStatement">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var46_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var45_resultof_Reference_DeviceUseStatement">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionAlert_urf_utm_uot" as="node()*">
					<xsl:for-each select="$var52_resultof_u___all">
						<xsl:variable name="var51_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var51_cur/ns0:resource/ns0:Flag/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'Flag')])]">
							<xsl:variable name="var50_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var51_cur/ns0:resource/ns0:Flag/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var49_resultof_Reference_Flag" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Flag">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var50_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var49_resultof_Reference_Flag">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionProblems_anf_anam_prob" as="node()*">
					<xsl:for-each select="$var56_resultof_anf___all">
						<xsl:variable name="var55_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var55_cur/ns0:resource/ns0:Condition/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'Condition')])]">
							<xsl:variable name="var54_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var55_cur/ns0:resource/ns0:Condition/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var53_resultof_Reference_Condition" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Condition">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var54_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var53_resultof_Reference_Condition">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionFamilyMemberHistory_anf_rao" as="node()*">
					<xsl:for-each select="$var60_resultof_anf___all">
						<xsl:variable name="var59_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var59_cur/ns0:resource/ns0:FamilyMemberHistory/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'FamilyMemberHistory')])]">
							<xsl:variable name="var58_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var59_cur/ns0:resource/ns0:FamilyMemberHistory/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var57_resultof_Reference_FamilyMemberHistory" as="xs:string?">
											<xsl:call-template name="provisio:Reference_FamilyMemberHistory">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var58_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var57_resultof_Reference_FamilyMemberHistory">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionSocialHistory_anf_inf_infc_sa" as="node()*">
					<xsl:for-each select="$var64_resultof_anf___all">
						<xsl:variable name="var63_cur" as="node()" select="."/>
						<xsl:for-each select="(./ns0:fullUrl/@value)[fn:exists((($var63_cur/ns0:resource/ns0:Observation/ns0:text/xhtml:div/node())[fn:boolean(self::text())])[fn:starts-with(fn:string(.), 'Observation')])]">
							<xsl:variable name="var62_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var63_cur/ns0:resource/ns0:Observation/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var61_resultof_Reference_Observation" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Observation">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var62_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var61_resultof_Reference_Observation">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="sectionProblems_dg" as="node()*">
					<xsl:for-each select="$var68_resultof_dg___all">
						<xsl:variable name="var67_cur" as="node()" select="."/>
						<xsl:for-each select="ns0:fullUrl/@value">
							<xsl:variable name="var66_cur" as="node()" select="."/>
							<entry xmlns="http://hl7.org/fhir">
								<reference>
									<xsl:for-each select="$var67_cur/ns0:resource/ns0:Condition/ns0:meta/ns0:versionId/@value">
										<xsl:variable name="var65_resultof_Reference_Condition" as="xs:string?">
											<xsl:call-template name="provisio:Reference_Condition">
												<xsl:with-param name="GUID" select="xs:string(xs:anyURI(fn:string($var66_cur)))" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var65_resultof_Reference_Condition">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</entry>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var69_resultof_Composition_EU_PS">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var70_resultof_h___all" as="node()*">
			<xsl:call-template name="provisio:h_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_h" select="$var101_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_h" select="$var87_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var70_resultof_h___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var71_resultof_fyznal___all" as="node()*">
			<xsl:call-template name="provisio:fyznal_-_all">
				<xsl:with-param name="ip_fyznal" select="$var110_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_fyznal" select="$var91_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var71_resultof_fyznal___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var72_resultof_grav___all" as="node()*">
			<xsl:call-template name="provisio:grav_-_all">
				<xsl:with-param name="ip_grav" select="$var105_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_grav" select="$var95_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var72_resultof_grav___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var73_resultof_u___all" as="node()*">
			<xsl:call-template name="provisio:u_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_u" select="$var102_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_u" select="$var88_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var73_resultof_u___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var74_resultof_an___all" as="node()*">
			<xsl:call-template name="provisio:an_-_all">
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_an" select="$var103_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_an" select="$var90_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var74_resultof_an___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var75_resultof_anf___all" as="node()*">
			<xsl:call-template name="provisio:anf_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_anf" select="$var104_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patsumdat_anf" select="$var92_map_of_ip" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var75_resultof_anf___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var76_resultof_oc___all" as="node()*">
			<xsl:call-template name="provisio:oc_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_oc" select="$var107_map_of_ip" as="node()*"/>
				<xsl:with-param name="anf_anam_oc" select="$var97_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_anf_anam_oc" select="$var83_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_oc" select="$var85_map_of_ip" as="node()*"/>
				<xsl:with-param name="dsipdat_ab" select="()" as="xs:dateTime?"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var76_resultof_oc___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var77_resultof_dg___all" as="node()*">
			<xsl:call-template name="provisio:dg_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_dg" select="$var111_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_dg" select="$var89_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var77_resultof_dg___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var78_resultof_le___all" as="node()*">
			<xsl:call-template name="provisio:le_-_all">
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="ip_le" select="$var108_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_le" select="$var86_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var78_resultof_le___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var79_resultof_chv___all" as="node()*">
			<xsl:call-template name="provisio:chv_-_all">
				<xsl:with-param name="ip_chv" select="$var100_map_of_ip" as="node()*"/>
				<xsl:with-param name="ip_anf_anam_vyk_chv" select="$var98_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_anf_anam_vyk_chv" select="$var84_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsudat_chv" select="$var96_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var79_resultof_chv___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var80_resultof_ld___all" as="node()*">
			<xsl:call-template name="provisio:ld_-_all">
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="ip_ld" select="$var109_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_ld" select="$var93_map_of_ip" as="node()*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var80_resultof_ld___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var81_resultof_fs___all" as="node()*">
			<xsl:call-template name="provisio:fs_-_all">
				<xsl:with-param name="ip_fs" select="$var106_map_of_ip" as="node()*"/>
				<xsl:with-param name="patsumdat_fs" select="$var94_map_of_ip" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" select="$patientReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var99_map_of_ip" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var81_resultof_fs___all">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var82_resultof_ip_ip" as="node()*">
			<xsl:call-template name="provisio:ip_ip">
				<xsl:with-param name="ip" as="node()+">
					<xsl:for-each select="$ip">
						<ip xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ip>
					</xsl:for-each>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var82_resultof_ip_ip">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_PractitionerRole">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_Practitioner">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:garant_dat">
		<xsl:param name="garant_dat" select="()"/>
		<xsl:param name="pracovnikType" select="()"/>
		<xsl:for-each select="$garant_dat">
			<xsl:variable name="var3_current_as_string" as="xs:string" select="fn:string(.)"/>
			<xsl:variable name="var2_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var2_guid">
					<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
				</xsl:for-each>
				<fullUrl>
					<xsl:for-each select="$var2_guid">
						<xsl:for-each select="$var2_guid">
							<xsl:variable name="var1_resultof_FullURL_Practitioner" as="xs:string?">
								<xsl:call-template name="provisio:FullURL_Practitioner">
									<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_FullURL_Practitioner">
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</fullUrl>
				<resource>
					<Practitioner>
						<id>
							<xsl:for-each select="$var2_guid">
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</xsl:for-each>
						</id>
						<meta>
							<versionId>
								<xsl:for-each select="@vguid">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</versionId>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Practitioner-uv-ips'))"/>
							</profile>
						</meta>
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div>
								<xhtml:p>
									<xsl:sequence select="$var3_current_as_string"/>
								</xhtml:p>
							</xhtml:div>
						</text>
						<xsl:for-each select="@id_zp">
							<identifier>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@id_garant">
							<identifier>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@id_clk">
							<identifier>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<name>
							<text>
								<xsl:attribute name="value" namespace="" select="$var3_current_as_string"/>
							</text>
						</name>
					</Practitioner>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Organization">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:is">
		<xsl:param name="is" select="()"/>
		<xsl:for-each select="$is">
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:attribute name="id" namespace="" select="fn:string(.)"/>
				</xsl:for-each>
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var1_resultof_FullURL_Organization" as="xs:string?">
							<xsl:call-template name="provisio:FullURL_Organization">
								<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_FullURL_Organization">
							<fullUrl>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
							</fullUrl>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Organization>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="@vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core'))"/>
							</profile>
						</meta>
						<xsl:for-each select="@ico">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/ico'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@icz">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icz'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@icp">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icp'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@icl">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icl'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@pcz">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/pcz'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@oddel">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/oddel'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<xsl:for-each select="@oavl">
							<identifier>
								<use>
									<xsl:attribute name="value" namespace="" select="'official'"/>
								</use>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/oavl'))"/>
								</system>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</identifier>
						</xsl:for-each>
						<active>
							<xsl:attribute name="value" namespace="" select="xs:string(fn:true())"/>
						</active>
						<xsl:for-each select="ns1:a">
							<xsl:variable name="var3_cur" as="node()" select="."/>
							<address>
								<use>
									<xsl:attribute name="value" namespace="" select="'work'"/>
								</use>
								<text>
									<xsl:for-each select="ns1:jmeno">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</text>
								<xsl:for-each select="ns1:adr">
									<line>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</line>
								</xsl:for-each>
								<xsl:for-each select="ns1:dop1">
									<line>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</line>
								</xsl:for-each>
								<xsl:for-each select="ns1:dop2">
									<line>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</line>
								</xsl:for-each>
								<xsl:for-each select="ns1:mesto">
									<city>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</city>
								</xsl:for-each>
								<xsl:for-each select="ns1:psc">
									<postalCode>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
									</postalCode>
								</xsl:for-each>
								<xsl:for-each select="ns1:stat">
									<xsl:variable name="var2_cur" as="node()" select="."/>
									<xsl:for-each select="$var3_cur/ns1:stat_text">
										<country>
											<xsl:attribute name="value" namespace="" select="fn:concat(fn:concat(fn:string($var2_cur), ' - '), fn:string(.))"/>
										</country>
									</xsl:for-each>
								</xsl:for-each>
							</address>
						</xsl:for-each>
					</Organization>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Organization">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="$GUID"/>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Practitioner">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Patient">
		<xsl:param name="GUID" select="()"/>
		<xsl:sequence select="fn:concat('urn:uuid:', $GUID)"/>
	</xsl:template>
	<xsl:template name="vmf:vmf1_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='SP'">
				<xsl:copy-of select="'inactive'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'resolved'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf2_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'confirmed'"/>
			</xsl:when>
			<xsl:when test="$input='SP'">
				<xsl:copy-of select="'confirmed'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'confirmed'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'entered-in-error'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf3_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'allergy'"/>
			</xsl:when>
			<xsl:when test="$input='I'">
				<xsl:copy-of select="'intolerance'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf4_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'medication'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'food'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'environment'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf5_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='255604002'">
				<xsl:copy-of select="'low'"/>
			</xsl:when>
			<xsl:when test="$input='371923003'">
				<xsl:copy-of select="'low'"/>
			</xsl:when>
			<xsl:when test="$input='6736007'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='371924009'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='24484000'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='442452003'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf6_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'inactive'"/>
			</xsl:when>
			<xsl:when test="$input='RF'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='RN'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='RS'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf7_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A+'">
				<xsl:copy-of select="'A RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='A1+'">
				<xsl:copy-of select="'A1 RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='A2+'">
				<xsl:copy-of select="'A2 RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='A-'">
				<xsl:copy-of select="'A RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='A1-'">
				<xsl:copy-of select="'A1 RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='A2-'">
				<xsl:copy-of select="'A2 RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='B+'">
				<xsl:copy-of select="'B RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='B-'">
				<xsl:copy-of select="'B RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='AB+'">
				<xsl:copy-of select="'AB RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='A1B+'">
				<xsl:copy-of select="'A1B RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='A2B+'">
				<xsl:copy-of select="'A2B RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='AB-'">
				<xsl:copy-of select="'AB RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='A1B-'">
				<xsl:copy-of select="'A1B RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='A2B-'">
				<xsl:copy-of select="'A2B RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='0+'">
				<xsl:copy-of select="'0 RhD pozitivní'"/>
			</xsl:when>
			<xsl:when test="$input='0-'">
				<xsl:copy-of select="'0 RhD negativní'"/>
			</xsl:when>
			<xsl:when test="$input='ARHDWV'">
				<xsl:copy-of select="'A RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='A1RHDWV'">
				<xsl:copy-of select="'A1 RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='A2RHDWV'">
				<xsl:copy-of select="'A2 RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='BRHDWV'">
				<xsl:copy-of select="'B RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='ABRHDWV'">
				<xsl:copy-of select="'AB RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='A1BRHWV'">
				<xsl:copy-of select="'A1B RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='A2BRHWV'">
				<xsl:copy-of select="'A2B RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='0RHDWV'">
				<xsl:copy-of select="'0 RhD weak/variant'"/>
			</xsl:when>
			<xsl:when test="$input='MF'">
				<xsl:copy-of select="'Neuzavřené vyšetření KS'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'A RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='A1'">
				<xsl:copy-of select="'A1 RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='A2'">
				<xsl:copy-of select="'A2 RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'B RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='AB'">
				<xsl:copy-of select="'AB RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='A1B'">
				<xsl:copy-of select="'A1B RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='A2B'">
				<xsl:copy-of select="'A2B RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='00'">
				<xsl:copy-of select="'0 RhD nespecifikováno'"/>
			</xsl:when>
			<xsl:when test="$input='A1-,DU+'">
				<xsl:copy-of select="'A1 Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='A2-,DU+'">
				<xsl:copy-of select="'A2 Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='A-,DU+'">
				<xsl:copy-of select="'A Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='B-,DU+'">
				<xsl:copy-of select="'B Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='AB-,DU+'">
				<xsl:copy-of select="'AB Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='A1B-,DU+'">
				<xsl:copy-of select="'A1B Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='A2B-,DU+'">
				<xsl:copy-of select="'A2B Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
			<xsl:when test="$input='0-,DU+'">
				<xsl:copy-of select="'0 Rh(D)neg se slabou variantou D antigenu'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf8_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'completed'"/>
			</xsl:when>
			<xsl:when test="$input='SF'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='SN'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf9_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='D'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'phone'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'phone'"/>
			</xsl:when>
			<xsl:when test="$input='F'">
				<xsl:copy-of select="'fax'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'email'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'e-mail'"/>
			</xsl:when>
			<xsl:when test="$input='I'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf10_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'mobile'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf11_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='1'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='2'">
				<xsl:copy-of select="'temp'"/>
			</xsl:when>
			<xsl:when test="$input='3'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='4'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='5'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='6'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='7'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='8'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='9'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'billing'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='O'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf12_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf13_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='1'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:when test="$input='2'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf14_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='1'">
				<xsl:copy-of select="'Trvalé bydliště pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='2'">
				<xsl:copy-of select="'Přechodné bydliště pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='3'">
				<xsl:copy-of select="'Příbuzný pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='4'">
				<xsl:copy-of select="'Registrující praktický lékař pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='5'">
				<xsl:copy-of select="'Zaměstnavatel pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='6'">
				<xsl:copy-of select="'Plátce nemocenských dávek pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='7'">
				<xsl:copy-of select="'Zdravotnické zařízení pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='8'">
				<xsl:copy-of select="'Právní zástupce pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='9'">
				<xsl:copy-of select="'Farnost pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'Základní škola dětského pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'Kontaktní zdravotnický profesionál'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Kontaktní osoba (ve vazbě k pacientovi)'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'Zákonný zástupce pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'Registrující gynekolog pacientky'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'Registrující stomatolog pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'Tlumočník - překladatel do jazyku pacienta'"/>
			</xsl:when>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'Laboratoř'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'Zdravotnické pracoviště'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'Zdravotní pojišťovna'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Adresa příjemce'"/>
			</xsl:when>
			<xsl:when test="$input='O'">
				<xsl:copy-of select="'Adresa odesílatele'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'Jiná adresa'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf15_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='111'">
				<xsl:copy-of select="'Všeobecná zdravotní pojišťovna České republiky'"/>
			</xsl:when>
			<xsl:when test="$input='201'">
				<xsl:copy-of select="'Vojenská zdravotní pojišťovna České republiky'"/>
			</xsl:when>
			<xsl:when test="$input='205'">
				<xsl:copy-of select="'Česká průmyslová zdravotní pojišťovna'"/>
			</xsl:when>
			<xsl:when test="$input='207'">
				<xsl:copy-of select="'Oborová zdravotní pojišťovna zaměstnanců bank, pojišťoven a stavebnictví'"/>
			</xsl:when>
			<xsl:when test="$input='209'">
				<xsl:copy-of select="'Zaměstnanecká pojišťovna Škoda'"/>
			</xsl:when>
			<xsl:when test="$input='211'">
				<xsl:copy-of select="'Zdravotní pojišťovna ministerstva vnitra České republiky'"/>
			</xsl:when>
			<xsl:when test="$input='213'">
				<xsl:copy-of select="'RBP, zdravotní pojišťovna'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf16_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='CZE'">
				<xsl:copy-of select="'Czech Republic (CZE)'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf17_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'male'"/>
			</xsl:when>
			<xsl:when test="$input='F'">
				<xsl:copy-of select="'female'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'unknown'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf18_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'C'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'N'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf19_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'Emergency Contact'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'Next-of-Kin'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf20_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'true'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'false'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf21_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'inactive'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf22_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='HNMD'">
				<xsl:copy-of select="'228368007'"/>
			</xsl:when>
			<xsl:when test="$input='DNMD'">
				<xsl:copy-of select="'228367002'"/>
			</xsl:when>
			<xsl:when test="$input='MDIP'">
				<xsl:copy-of select="'44870007'"/>
			</xsl:when>
			<xsl:when test="$input='CDUS'">
				<xsl:copy-of select="'417284009'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf23_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='AMFETAM'">
				<xsl:copy-of select="'703842006'"/>
			</xsl:when>
			<xsl:when test="$input='ANABST'">
				<xsl:copy-of select="'111151007'"/>
			</xsl:when>
			<xsl:when test="$input='BARBIT'">
				<xsl:copy-of select="'372798009'"/>
			</xsl:when>
			<xsl:when test="$input='BENZOD'">
				<xsl:copy-of select="'372664007'"/>
			</xsl:when>
			<xsl:when test="$input='BUP'">
				<xsl:copy-of select="'387173000'"/>
			</xsl:when>
			<xsl:when test="$input='PHENC'">
				<xsl:copy-of select="'9721008'"/>
			</xsl:when>
			<xsl:when test="$input='FENTAN'">
				<xsl:copy-of select="'373492002'"/>
			</xsl:when>
			<xsl:when test="$input='HALLMUSH'">
				<xsl:copy-of select="'229006007'"/>
			</xsl:when>
			<xsl:when test="$input='HEROIN'">
				<xsl:copy-of select="'387341002'"/>
			</xsl:when>
			<xsl:when test="$input='3OHBUTYR'">
				<xsl:copy-of select="'62821004'"/>
			</xsl:when>
			<xsl:when test="$input='KETAM'">
				<xsl:copy-of select="'373464007'"/>
			</xsl:when>
			<xsl:when test="$input='COCAINE'">
				<xsl:copy-of select="'387085005'"/>
			</xsl:when>
			<xsl:when test="$input='COCFB'">
				<xsl:copy-of select="'229003004'"/>
			</xsl:when>
			<xsl:when test="$input='CANAB'">
				<xsl:copy-of select="'398705004'"/>
			</xsl:when>
			<xsl:when test="$input='LAXAT'">
				<xsl:copy-of select="'372800002'"/>
			</xsl:when>
			<xsl:when test="$input='LSD'">
				<xsl:copy-of select="'15698006'"/>
			</xsl:when>
			<xsl:when test="$input='MDMA'">
				<xsl:copy-of select="'288459003'"/>
			</xsl:when>
			<xsl:when test="$input='METHAD'">
				<xsl:copy-of select="'387286002'"/>
			</xsl:when>
			<xsl:when test="$input='METAMF'">
				<xsl:copy-of select="'387499002'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf24_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='ASSOC'">
				<xsl:copy-of select="&quot;Associate's or technical degree complete&quot;"/>
			</xsl:when>
			<xsl:when test="$input='BD'">
				<xsl:copy-of select="'College or baccalaureate degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='ELEN'">
				<xsl:copy-of select="'Elementary School'"/>
			</xsl:when>
			<xsl:when test="$input='GD'">
				<xsl:copy-of select="'Graduate or professional Degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='HS'">
				<xsl:copy-of select="'High School or secondary school degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='PB'">
				<xsl:copy-of select="'Some post-baccalaureate education'"/>
			</xsl:when>
			<xsl:when test="$input='POSTG'">
				<xsl:copy-of select="'Doctoral or post graduate education'"/>
			</xsl:when>
			<xsl:when test="$input='SCOL'">
				<xsl:copy-of select="'Some College education'"/>
			</xsl:when>
			<xsl:when test="$input='SEC'">
				<xsl:copy-of select="'Some secondary or high school education'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf25_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='365508006'">
				<xsl:copy-of select="'Residence and accommodation circumstances'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf26_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='BSCH'">
				<xsl:copy-of select="'Vana / sprchové křeslo'"/>
			</xsl:when>
			<xsl:when test="$input='SLCH'">
				<xsl:copy-of select="'Schodišťový výtah, židle'"/>
			</xsl:when>
			<xsl:when test="$input='ASTO'">
				<xsl:copy-of select="'Pomocná toaleta'"/>
			</xsl:when>
			<xsl:when test="$input='ASBE'">
				<xsl:copy-of select="'Pomocné lůžko'"/>
			</xsl:when>
			<xsl:when test="$input='HPAF'">
				<xsl:copy-of select="'Pomocné vybavení / adaptace domu a prostor'"/>
			</xsl:when>
			<xsl:when test="$input='HARA'">
				<xsl:copy-of select="'Zábradlí, držadla'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf27_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='STHO'">
				<xsl:copy-of select="'Schody v domě'"/>
			</xsl:when>
			<xsl:when test="$input='LAWE'">
				<xsl:copy-of select="'Bydlí v bytě s výtahem'"/>
			</xsl:when>
			<xsl:when test="$input='ARBS'">
				<xsl:copy-of select="'Přístup do domu po schodech'"/>
			</xsl:when>
			<xsl:when test="$input='OMRE'">
				<xsl:copy-of select="'Blokovaný vstup do bytu'"/>
			</xsl:when>
			<xsl:when test="$input='HCSB'">
				<xsl:copy-of select="'Bydlení obsahuje strukturální překážky pohybu'"/>
			</xsl:when>
			<xsl:when test="$input='CLSP'">
				<xsl:copy-of select="'Zaneřáděný životní prostor'"/>
			</xsl:when>
			<xsl:when test="$input='DLCO'">
				<xsl:copy-of select="'Špinavé životní prostředí'"/>
			</xsl:when>
			<xsl:when test="$input='KEPE'">
				<xsl:copy-of select="'Chová domácí mazlíčky'"/>
			</xsl:when>
			<xsl:when test="$input='UFCO'">
				<xsl:copy-of select="'Nebezpečná podlahová krytina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf28_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'255589003'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'255541007'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf29_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Direct'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Indirect'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf30_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='255604002'">
				<xsl:copy-of select="'Mild'"/>
			</xsl:when>
			<xsl:when test="$input='6736007'">
				<xsl:copy-of select="'Moderate'"/>
			</xsl:when>
			<xsl:when test="$input='24484000'">
				<xsl:copy-of select="'Severe'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf31_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'385669000'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'385671000'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'385670004'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf32_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'Successful'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Unsuccessful'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'Partially successful'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf33_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'unknown'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'unknown'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf34_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'Unknown'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Unknown'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'Active'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf35_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'completed'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'correction'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'entered-in-error'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'stopped'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'on-hold'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'stopped'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf36_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='ND'">
				<xsl:copy-of select="'nevhodné dávkování'"/>
			</xsl:when>
			<xsl:when test="$input='PD'">
				<xsl:copy-of select="'nedostatečné dávkování'"/>
			</xsl:when>
			<xsl:when test="$input='IL'">
				<xsl:copy-of select="'interakce léku'"/>
			</xsl:when>
			<xsl:when test="$input='J'">
				<xsl:copy-of select="'jiné'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf37_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'152231000119106'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'60001007'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'146799005'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'77386006'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'77386006'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf38_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='77386006'">
				<xsl:copy-of select="'Pregnant'"/>
			</xsl:when>
			<xsl:when test="$input='60001007'">
				<xsl:copy-of select="'Not pregnant'"/>
			</xsl:when>
			<xsl:when test="$input='146799005'">
				<xsl:copy-of select="'Possible pregnancy'"/>
			</xsl:when>
			<xsl:when test="$input='152231000119106'">
				<xsl:copy-of select="'Pregnancy not yet confirmed'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf39_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='11778-8'">
				<xsl:copy-of select="'Delivery date Estimated'"/>
			</xsl:when>
			<xsl:when test="$input='11780-4'">
				<xsl:copy-of select="'Delivery date Estimated from ovulation date'"/>
			</xsl:when>
			<xsl:when test="$input='11779-6'">
				<xsl:copy-of select="'Delivery date Estimated from last menstrual period'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:output method="xml" encoding="UTF-8" byte-order-mark="no" indent="yes"/>
	<xsl:template match="/">
		<xsl:variable name="var12_dasta" as="node()?" select="ns1:dasta"/>
		<xsl:variable name="var11_map_of_dasta" as="xs:string?">
			<xsl:for-each select="$var12_dasta/ns1:garant_dat/@guid">
				<xsl:sequence select="fn:string(.)"/>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var10_test_resultof_any" as="xs:string*">
			<xsl:choose>
				<xsl:when test="fn:exists(($var12_dasta)[fn:exists((./ns1:is)[fn:exists((./ns2:ip)[fn:exists((./ns2:ku)[fn:exists(ns2:ku_z)])])])])">
					<xsl:for-each select="$var12_dasta/ns1:is/ns2:ip/ns2:ku/ns2:ku_z">
						<xsl:sequence select="fn:string(ns2:dat_prov)"/>
					</xsl:for-each>
				</xsl:when>
				<xsl:otherwise>
					<xsl:for-each select="$var12_dasta">
						<xsl:sequence select="xs:string(xs:dateTime(fn:string(@dat_vb)))"/>
					</xsl:for-each>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:variable>
		<Bundle xmlns="http://hl7.org/fhir" xmlns:xhtml="http://www.w3.org/1999/xhtml">
			<meta>
				<profile>
					<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips'))"/>
				</profile>
			</meta>
			<identifier>
				<system>
					<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('urn:ietf:rfc:3986'))"/>
				</system>
				<value>
					<xsl:for-each select="$var12_dasta/@guid">
						<xsl:attribute name="value" namespace="" select="fn:concat('urn:uuid:', fn:string(.))"/>
					</xsl:for-each>
				</value>
			</identifier>
			<type>
				<xsl:attribute name="value" namespace="" select="'document'"/>
			</type>
			<timestamp>
				<xsl:for-each select="$var10_test_resultof_any">
					<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
				</xsl:for-each>
			</timestamp>
			<xsl:variable name="var5_resultof_is" as="node()*">
				<xsl:call-template name="provisio:is">
					<xsl:with-param name="is" as="node()*">
						<xsl:for-each select="$var12_dasta/ns1:is">
							<is xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
								<xsl:sequence select="(./@node(), ./node())"/>
							</is>
						</xsl:for-each>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:variable name="var7_resultof_ip" as="node()*">
				<xsl:call-template name="provisio:ip">
					<xsl:with-param name="patientReference" as="xs:string*">
						<xsl:for-each select="$var12_dasta/ns1:is/ns2:ip/@guid">
							<xsl:variable name="var1_resultof_FullURL_Patient" as="xs:string?">
								<xsl:call-template name="provisio:FullURL_Patient">
									<xsl:with-param name="GUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:sequence select="$var1_resultof_FullURL_Patient"/>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="organizatinReference" as="xs:string*">
						<xsl:for-each select="$var5_resultof_is/ns0:resource/ns0:Organization">
							<xsl:variable name="var4_cur" as="node()" select="."/>
							<xsl:for-each select="ns0:id/@value">
								<xsl:variable name="var3_cur" as="node()" select="."/>
								<xsl:for-each select="$var4_cur/ns0:meta/ns0:versionId/@value">
									<xsl:variable name="var2_resultof_Reference_Organization" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Organization">
											<xsl:with-param name="GUID" select="fn:string($var3_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:sequence select="$var2_resultof_Reference_Organization"/>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="practitionerReference" as="xs:string?">
						<xsl:for-each select="$var11_map_of_dasta">
							<xsl:for-each select="$var11_map_of_dasta">
								<xsl:variable name="var6_resultof_FullURL_Practitioner" as="xs:string?">
									<xsl:call-template name="provisio:FullURL_Practitioner">
										<xsl:with-param name="GUID" select="." as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:sequence select="$var6_resultof_FullURL_Practitioner"/>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="HDRdate" select="$var10_test_resultof_any" as="xs:string*"/>
					<xsl:with-param name="guid" as="xs:string?">
						<xsl:for-each select="$var12_dasta/@guid">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="ip" as="node()*">
						<xsl:for-each select="$var12_dasta/ns1:is/ns2:ip">
							<ip xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
								<xsl:sequence select="(./@node(), ./node())"/>
							</ip>
						</xsl:for-each>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var7_resultof_ip">
				<entry>
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
			<xsl:variable name="var8_map_of_dasta" as="node()*">
				<xsl:for-each select="$var12_dasta/ns1:is/ns2:ip/ns2:ku/ns2:ku_z/ns2:p_pracovnik">
					<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="(./@node(), ./node())"/>
					</pracovnikType>
				</xsl:for-each>
			</xsl:variable>
			<xsl:variable name="var9_resultof_garant_dat" as="node()*">
				<xsl:call-template name="provisio:garant_dat">
					<xsl:with-param name="garant_dat" as="node()?">
						<xsl:for-each select="$var12_dasta/ns1:garant_dat">
							<garant_dat xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
								<xsl:sequence select="(./@node(), ./node())"/>
							</garant_dat>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="pracovnikType" select="($var8_map_of_dasta)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var9_resultof_garant_dat">
				<entry>
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</Bundle>
	</xsl:template>
</xsl:stylesheet>