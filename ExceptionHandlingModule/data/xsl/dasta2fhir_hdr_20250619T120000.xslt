<?xml version="1.0" encoding="UTF-8"?>
<!--
This file was generated by Altova MapForce 2024r2sp1

YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.

Refer to the Altova MapForce Documentation for further details.
http://www.altova.com/mapforce
-->
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://hl7.org/fhir" xmlns:provisio="http://www.altova.com/MapForce/UDF/provisio" xmlns:tbf="http://www.altova.com/MapForce/UDF/tbf" xmlns:vmf="http://www.altova.com/MapForce/UDF/vmf" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:ns1="urn:cz-mzcr:ns:dasta:ds4:ds_dasta" xmlns:ns2="urn:cz-mzcr:ns:dasta:ds4:ds_ip" exclude-result-prefixes="ns0 provisio tbf vmf xs fn ns1 ns2">
	<xsl:template name="provisio:ku_z_propz_prubh_d">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_prubh_dType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:for-each select="($ku_z_propz_prubh_dType)[(fn:position() = xs:integer('1'))]">
			<xsl:variable name="var7_cur" as="node()" select="."/>
			<xsl:variable name="var4_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var5_dat_prov_vykd" as="node()*" select="ns2:dat_prov_vykd"/>
			<xsl:variable name="var6_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var6_guid">
					<xsl:for-each select="$var4_vguid">
						<xsl:for-each select="$var6_guid">
							<xsl:variable name="var2_cur" as="node()" select="."/>
							<xsl:for-each select="$var4_vguid">
								<xsl:variable name="var1_resultof_Reference_Procedure" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Procedure">
										<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1_resultof_Reference_Procedure">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Procedure>
						<xsl:for-each select="$var6_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var4_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-procedure-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'10185-7'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'completed'"/>
						</status>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'442083009'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Anatomical or acquired body structure'"/>
								</display>
							</coding>
							<text>
								<xsl:for-each select="ns2:vykd_lokal">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var3_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($var5_dat_prov_vykd)">
									<xsl:for-each select="$var5_dat_prov_vykd">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var3_test_resultof_exists">
							<performedDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</performedDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<actor>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</actor>
							</performer>
						</xsl:for-each>
						<xsl:for-each select="ns2:vykd_duv_kod">
							<reasonCode>
								<coding>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<display>
										<xsl:for-each select="$var7_cur/ns2:vykd_duv_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</reasonCode>
						</xsl:for-each>
						<note>
							<text>
								<xsl:for-each select="ns2:vykd_popis">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</note>
					</Procedure>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_prubh_v">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_prubh_vType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Observation>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_prubh_p">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_prubh_pType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Condition>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$practitionerReference">
						<recorder>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</recorder>
					</xsl:for-each>
				</Condition>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_DiagnosticReport">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('DiagnosticReport/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_prubh_s">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_prubh_sType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:for-each select="$ku_z_propz_prubh_sType/ns2:ks_popis">
			<xsl:variable name="var3_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var3_vguid">
						<xsl:for-each select="$var4_guid">
							<xsl:variable name="var2_cur" as="node()" select="."/>
							<xsl:for-each select="$var3_vguid">
								<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var3_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.org/fhir/R4/observation.html'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'30954-2'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:for-each select="$dat_prov">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_prubh_sType/ns2:ks_duv_prub_h">
			<xsl:variable name="var7_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var8_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var8_guid">
					<xsl:for-each select="$var7_vguid">
						<xsl:for-each select="$var8_guid">
							<xsl:variable name="var6_cur" as="node()" select="."/>
							<xsl:for-each select="$var7_vguid">
								<xsl:variable name="var5_resultof_Reference_DiagnosticReport" as="xs:string?">
									<xsl:call-template name="provisio:Reference_DiagnosticReport">
										<xsl:with-param name="GUID" select="fn:string($var6_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var5_resultof_Reference_DiagnosticReport">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<DiagnosticReport>
						<xsl:for-each select="$var8_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var7_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.org/fhir/R4/diagnosticreport.html'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'30954-2'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:for-each select="$dat_prov">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
					</DiagnosticReport>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_prubh_sType/ns2:ks_klin_uvaha">
			<xsl:variable name="var11_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var12_guid" as="node()?" select="@guid"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var12_guid">
					<xsl:for-each select="$var11_vguid">
						<xsl:for-each select="$var12_guid">
							<xsl:variable name="var10_cur" as="node()" select="."/>
							<xsl:for-each select="$var11_vguid">
								<xsl:variable name="var9_resultof_Reference_DiagnosticReport" as="xs:string?">
									<xsl:call-template name="provisio:Reference_DiagnosticReport">
										<xsl:with-param name="GUID" select="fn:string($var10_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var9_resultof_Reference_DiagnosticReport">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<DiagnosticReport>
						<xsl:for-each select="$var12_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var11_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.org/fhir/R4/diagnosticreport.html'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'30954-2'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<code>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:for-each select="$dat_prov">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
					</DiagnosticReport>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_MedicationAdministration">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('MedicationAdministration/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_prubh_le">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="leType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:for-each select="$leType">
			<xsl:variable name="var15_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:lez">
				<xsl:variable name="var14_cur" as="node()" select="."/>
				<xsl:variable name="var10_guid" as="node()?" select="@guid"/>
				<xsl:variable name="var11_dat_ab" as="node()?" select="$var15_cur/@dat_ab"/>
				<xsl:variable name="var12_kod_atc" as="node()?" select="@kod_atc"/>
				<xsl:variable name="var13_vguid" as="node()?" select="@vguid"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var10_guid">
						<xsl:for-each select="$var13_vguid">
							<xsl:for-each select="$var10_guid">
								<xsl:variable name="var2_cur" as="node()" select="."/>
								<xsl:for-each select="$var13_vguid">
									<xsl:variable name="var1_resultof_Reference_MedicationAdministration" as="xs:string?">
										<xsl:call-template name="provisio:Reference_MedicationAdministration">
											<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var1_resultof_Reference_MedicationAdministration">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<MedicationAdministration>
							<xsl:for-each select="$var10_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var13_vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'10160-0'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:for-each select="@ind_oprav_sd">
									<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf1_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</status>
							<xsl:for-each select="ns2:zmena_m_kod">
								<statusReason>
									<coding>
										<xsl:variable name="var4_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf2_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<code>
											<xsl:for-each select="$var4_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="$var14_cur/ns2:zmena_m_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</statusReason>
							</xsl:for-each>
							<category>
								<xsl:for-each select="@typ_med">
									<xsl:variable name="var7_cur_as_string" as="xs:string" select="fn:string(.)"/>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/medication-admin-category'))"/>
										</system>
										<xsl:variable name="var5_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf3_inputtoresult">
												<xsl:with-param name="input" select="$var7_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<code>
											<xsl:for-each select="$var5_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</code>
										<xsl:variable name="var6_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf4_inputtoresult">
												<xsl:with-param name="input" select="$var7_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<display>
											<xsl:for-each select="$var6_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</display>
									</coding>
								</xsl:for-each>
							</category>
							<medicationCodeableConcept>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://www.snomed.org/'))"/>
									</system>
									<code>
										<xsl:for-each select="@kod_lek">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="@nazev_lek">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
								<xsl:variable name="var8_test_resultof_exists" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var12_kod_atc)">
											<xsl:sequence select="fn:string($var12_kod_atc)"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="ns2:aktivni_latka/@kod_atc">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<xsl:for-each select="$var8_test_resultof_exists">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://www.whocc.no/atc/'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="."/>
										</code>
										<xsl:for-each select="$var14_cur/ns2:aktivni_latka/@nazev">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
								<xsl:for-each select="@gene_lek">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</medicationCodeableConcept>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var9_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($var11_dat_ab)">
										<xsl:sequence select="xs:string(xs:dateTime(fn:string($var11_dat_ab)))"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var9_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="ns2:dat_od">
								<effectivePeriod>
									<start>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</start>
									<xsl:for-each select="$var14_cur/ns2:dat_do">
										<end>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</end>
									</xsl:for-each>
								</effectivePeriod>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<actor>
										<reference>
											<xsl:attribute name="value" namespace="" select="."/>
										</reference>
									</actor>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="ns2:ind_m_kod">
								<reasonCode>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWI.htm'))"/>
										</system>
										<version>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</version>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
									<xsl:for-each select="$var14_cur/ns2:ind_m_text">
										<text>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</text>
									</xsl:for-each>
								</reasonCode>
							</xsl:for-each>
							<xsl:for-each select="ns2:pozn">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
							<xsl:for-each select="ns2:rozpis_v">
								<dosage>
									<xsl:for-each select="$var14_cur/@misto_apl_klic">
										<site>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBUU.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var14_cur/@misto_apl_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</site>
									</xsl:for-each>
									<xsl:for-each select="$var14_cur/@apl_cesta_klic">
										<route>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBUT.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var14_cur/@apl_cesta_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</route>
									</xsl:for-each>
									<xsl:for-each select="$var14_cur/@forma_klic">
										<method>
											<coding>
												<system>
													<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBRW.htm'))"/>
												</system>
												<code>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</code>
												<display>
													<xsl:for-each select="$var14_cur/@forma_text">
														<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
													</xsl:for-each>
												</display>
											</coding>
										</method>
									</xsl:for-each>
									<dose>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</value>
									</dose>
								</dosage>
							</xsl:for-each>
						</MedicationAdministration>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_prubh">
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_prubhType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var9_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var8_create_dat_prov_of_dat_prov" as="node()*">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_ku_z_propz_prubh_p" as="node()?">
			<xsl:call-template name="provisio:ku_z_propz_prubh_p">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var9_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="ku_z_propz_prubh_pType" as="node()*">
					<xsl:for-each select="$ku_z_propz_prubhType/ns2:ku_z_propz_prubh_p">
						<ku_z_propz_prubh_pType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_prubh_pType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_ku_z_propz_prubh_p">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var2_resultof_ku_z_propz_anam_anam_vyk" as="node()?">
			<xsl:call-template name="provisio:ku_z_propz_anam_anam_vyk">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var9_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="anam_vyk" as="node()">
					<anam_vyk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:for-each select="$ku_z_propz_prubhType/ns2:chv">
							<chv>
								<xsl:sequence select="(./@node(), ./node())"/>
							</chv>
						</xsl:for-each>
					</anam_vyk>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var2_resultof_ku_z_propz_anam_anam_vyk">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var3_resultof_ku_z_propz_anam_anam_zpi" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_anam_anam_zpi">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var9_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="anam_zpi" as="node()">
					<anam_zpi xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:for-each select="$ku_z_propz_prubhType/ns2:uniz">
							<uniz>
								<xsl:sequence select="(./@node(), ./node())"/>
							</uniz>
						</xsl:for-each>
					</anam_zpi>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_ku_z_propz_anam_anam_zpi">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_ku_z_propz_prubh_d" as="node()?">
			<xsl:call-template name="provisio:ku_z_propz_prubh_d">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var9_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="ku_z_propz_prubh_dType" as="node()*">
					<xsl:for-each select="$ku_z_propz_prubhType/ns2:ku_z_propz_prubh_d">
						<ku_z_propz_prubh_dType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_prubh_dType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_ku_z_propz_prubh_d">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var5_resultof_ku_z_propz_prubh_le" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_prubh_le">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var9_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="leType" as="node()*">
					<xsl:for-each select="$ku_z_propz_prubhType/ns2:le">
						<leType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</leType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var5_resultof_ku_z_propz_prubh_le">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_prubhType/ns2:ku_z_propz_prubh_v">
			<xsl:variable name="var6_resultof_ku_z_propz_prubh_v" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_prubh_v">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var9_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propz_prubh_vType" as="node()">
						<ku_z_propz_prubh_vType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_prubh_vType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var6_resultof_ku_z_propz_prubh_v">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_prubhType/ns2:ku_z_propz_prubh_s">
			<xsl:variable name="var7_resultof_ku_z_propz_prubh_s" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz_prubh_s">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var9_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propz_prubh_sType" as="node()">
						<ku_z_propz_prubh_sType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_prubh_sType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var8_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var7_resultof_ku_z_propz_prubh_s">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_sa">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_sa" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var11_vguid" as="node()?" select="$anam_sa/@vguid"/>
		<xsl:variable name="var12_guid" as="node()?" select="$anam_sa/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var12_guid">
				<xsl:for-each select="$var11_vguid">
					<xsl:for-each select="$var12_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var11_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var12_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var11_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-sdoh-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'social-history'"/>
							</code>
						</coding>
					</category>
					<code>
						<text>
							<xsl:attribute name="value" namespace="" select="'Sociální anamnéza'"/>
						</text>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sau_prac">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Pracovní zapojení'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sau_zajmy">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Koníčky'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sau_soc">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Sociální síť'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sav_vzdel">
						<xsl:variable name="var4_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<component>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-EducationLevel'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="$var4_cur_as_string"/>
									</code>
									<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf5_inputtoresult">
											<xsl:with-param name="input" select="$var4_cur_as_string" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<display>
										<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</display>
								</coding>
							</code>
							<valueString>
								<xsl:for-each select="$anam_sa/ns2:sav_koment">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sab_zpbydl_text">
						<component>
							<code>
								<xsl:for-each select="$anam_sa/ns2:sab_zpbydl_kod">
									<xsl:variable name="var6_cur_as_string" as="xs:string" select="fn:string(.)"/>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWB.htm'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="$var6_cur_as_string"/>
										</code>
										<xsl:variable name="var5_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf6_inputtoresult">
												<xsl:with-param name="input" select="$var6_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<display>
											<xsl:for-each select="$var5_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</display>
									</coding>
								</xsl:for-each>
								<text>
									<xsl:attribute name="value" namespace="" select="'Způsob bydlení'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sab_prizp_text">
						<component>
							<code>
								<xsl:for-each select="$anam_sa/ns2:sab_prizp_kod">
									<xsl:variable name="var8_cur_as_string" as="xs:string" select="fn:string(.)"/>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWC.htm'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="$var8_cur_as_string"/>
										</code>
										<xsl:variable name="var7_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf7_inputtoresult">
												<xsl:with-param name="input" select="$var8_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<display>
											<xsl:for-each select="$var7_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</display>
									</coding>
								</xsl:for-each>
								<text>
									<xsl:attribute name="value" namespace="" select="'Přizpůsobení domácnosti'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sab_bariery_text">
						<component>
							<code>
								<xsl:for-each select="$anam_sa/ns2:sab_bariery_kod">
									<xsl:variable name="var10_cur_as_string" as="xs:string" select="fn:string(.)"/>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWD.htm'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="$var10_cur_as_string"/>
										</code>
										<xsl:variable name="var9_resultof_vmf__inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf8_inputtoresult">
												<xsl:with-param name="input" select="$var10_cur_as_string" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<display>
											<xsl:for-each select="$var9_resultof_vmf__inputtoresult">
												<xsl:attribute name="value" namespace="" select="."/>
											</xsl:for-each>
										</display>
									</coding>
								</xsl:for-each>
								<text>
									<xsl:attribute name="value" namespace="" select="'Bariéry'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_koment">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Rodinná situace'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_slozrod_text">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Složení rodiny'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_rodstav_text">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Rodinný stav'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_pocdet">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Počet dětí'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_pocdetd">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Počet dětí ve společné domácnosti'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_dite">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Podrobnosti o dítěti'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
					<xsl:for-each select="$anam_sa/ns2:sar_pecezc">
						<component>
							<code>
								<text>
									<xsl:attribute name="value" namespace="" select="'Pečuje o závislého člena'"/>
								</text>
							</code>
							<valueString>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</valueString>
						</component>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_aba">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_aba" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var3_vguid" as="node()?" select="$anam_aba/@vguid"/>
		<xsl:variable name="var4_guid" as="node()?" select="$anam_aba/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var4_guid">
				<xsl:for-each select="$var3_vguid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var3_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var4_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var3_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-sdoh-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'social-history'"/>
							</code>
						</coding>
					</category>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
							</system>
							<xsl:for-each select="$anam_aba/ns2:aba_stav_kod">
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</xsl:for-each>
							<xsl:for-each select="$anam_aba/ns2:aba_stav_text">
								<display>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</display>
							</xsl:for-each>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$anam_aba/ns2:aba_dat_od">
						<effectivePeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$anam_aba/ns2:aba_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_aba/ns2:aba_mnoz_text">
						<valueCodeableConcept>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</valueCodeableConcept>
					</xsl:for-each>
					<xsl:for-each select="$anam_aba/ns2:aba_koment">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_abk">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_abk" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var3_vguid" as="node()?" select="$anam_abk/@vguid"/>
		<xsl:variable name="var4_guid" as="node()?" select="$anam_abk/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var4_guid">
				<xsl:for-each select="$var3_vguid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var3_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var4_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var3_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-sdoh-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'social-history'"/>
							</code>
						</coding>
					</category>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
							</system>
							<xsl:for-each select="$anam_abk/ns2:abk_stav_kod">
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
							</xsl:for-each>
							<xsl:for-each select="$anam_abk/ns2:abk_stav_text">
								<display>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</display>
							</xsl:for-each>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$anam_abk/ns2:abk_dat_od">
						<effectivePeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$anam_abk/ns2:abk_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_abk/ns2:abk_mnoz_text">
						<valueCodeableConcept>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</valueCodeableConcept>
					</xsl:for-each>
					<xsl:for-each select="$anam_abk/ns2:abk_koment">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_abd">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_abd" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var5_vguid" as="node()?" select="$anam_abd/@vguid"/>
		<xsl:variable name="var6_guid" as="node()?" select="$anam_abd/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var6_guid">
				<xsl:for-each select="$var5_vguid">
					<xsl:for-each select="$var6_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var5_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var6_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var5_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-sdoh-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'social-history'"/>
							</code>
						</coding>
					</category>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWG.htm'))"/>
							</system>
							<xsl:for-each select="$anam_abd/ns2:abd_stav_kod">
								<xsl:variable name="var3_resultof_vmf__inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf9_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<code>
									<xsl:for-each select="$var3_resultof_vmf__inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</code>
							</xsl:for-each>
							<xsl:for-each select="$anam_abd/ns2:abd_stav_text">
								<display>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</display>
							</xsl:for-each>
						</coding>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWH.htm'))"/>
							</system>
							<xsl:for-each select="$anam_abd/ns2:abd_lattyp_kod">
								<xsl:variable name="var4_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf10_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<code>
									<xsl:for-each select="$var4_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</code>
							</xsl:for-each>
							<xsl:for-each select="$anam_abd/ns2:abd_lattyp_text">
								<display>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</display>
							</xsl:for-each>
						</coding>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBSE.htm'))"/>
							</system>
							<code>
								<xsl:for-each select="$anam_abd/ns2:abd_latzp_kod">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$anam_abd/ns2:abd_latzp_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</display>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$anam_abd/ns2:abd_dat_od">
						<effectivePeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$anam_abd/ns2:abd_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_abd/ns2:abd_mnoz_text">
						<valueCodeableConcept>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</valueCodeableConcept>
					</xsl:for-each>
					<xsl:for-each select="$anam_abd/ns2:abd_koment">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_abj">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_abj" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var3_vguid" as="node()?" select="$anam_abj/@vguid"/>
		<xsl:variable name="var4_guid" as="node()?" select="$anam_abj/@guid"/>
		<xsl:variable name="var5_abj_kod" as="node()*" select="$anam_abj/ns2:abj_kod"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var4_guid">
				<xsl:for-each select="$var3_vguid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var3_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var4_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var3_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-sdoh-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'social-history'"/>
							</code>
						</coding>
					</category>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWI.htm'))"/>
							</system>
							<version>
								<xsl:for-each select="$var5_abj_kod/ns2:kod_syst">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</version>
							<code>
								<xsl:for-each select="$var5_abj_kod/ns2:kod">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$var5_abj_kod/ns2:kod_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</display>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_abj/ns2:abj_text">
						<valueCodeableConcept>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</valueCodeableConcept>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_infc">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_infcType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var3_guid" as="node()?" select="$anam_infcType/@guid"/>
		<xsl:variable name="var4_vguid" as="node()?" select="$anam_infcType/@vguid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var3_guid">
				<xsl:for-each select="$var4_vguid">
					<xsl:for-each select="$var3_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var4_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var3_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var4_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-travel-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'82753-5'"/>
							</code>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$anam_infcType/ns2:infc_dat_od">
						<effectivePeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$anam_infcType/ns2:infc_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_infcType/ns2:infc_stat_kod">
						<valueCodeableConcept>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.org/fhir/valueset-iso3166-1-2.html'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<display>
									<xsl:for-each select="$anam_infcType/ns2:infc_stat_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
							<xsl:for-each select="$anam_infcType/ns2:infc_koment">
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</xsl:for-each>
						</valueCodeableConcept>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_FamilyMemberHistory">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('FamilyMemberHistory/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_rao">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_rao" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var4_vguid" as="node()?" select="$anam_rao/@vguid"/>
		<xsl:variable name="var5_guid" as="node()?" select="$anam_rao/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var5_guid">
				<xsl:for-each select="$var4_vguid">
					<xsl:for-each select="$var5_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var4_vguid">
							<xsl:variable name="var1_resultof_Reference_FamilyMemberHistory" as="xs:string?">
								<xsl:call-template name="provisio:Reference_FamilyMemberHistory">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_FamilyMemberHistory">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<FamilyMemberHistory>
					<xsl:for-each select="$var5_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var4_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<xsl:for-each select="$dat_prov">
							<lastUpdated>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
							</lastUpdated>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/czh-familyMemberHistory-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'10157-6'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'completed'"/>
					</status>
					<patient>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</patient>
					<xsl:for-each select="$anam_rao/ns2:rao_vztah_kod">
						<relationship>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/ValueSet/v3-FamilyMember'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<xsl:for-each select="$anam_rao/ns2:rao_vztah_text">
									<display>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</display>
								</xsl:for-each>
							</coding>
						</relationship>
					</xsl:for-each>
					<xsl:for-each select="$anam_rao/ns2:rao_dat_nar">
						<bornDate>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</bornDate>
					</xsl:for-each>
					<xsl:for-each select="$anam_rao/ns2:rao_dat_um">
						<deceasedDate>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</deceasedDate>
					</xsl:for-each>
					<note>
						<xsl:for-each select="$practitionerReference">
							<authorReference>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</authorReference>
						</xsl:for-each>
					</note>
					<xsl:for-each select="$anam_rao/ns2:rao_zdrprob_kod">
						<xsl:variable name="var3_https___dastacr_cz_dasta_hyper_as_string" as="xs:string" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWI.htm'))"/>
						<condition>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var3_https___dastacr_cz_dasta_hyper_as_string"/>
									</system>
									<version>
										<xsl:for-each select="ns2:kod_syst">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</version>
									<code>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</code>
							<xsl:for-each select="$anam_rao/ns2:rao_duvum_kod">
								<outcome>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="$var3_https___dastacr_cz_dasta_hyper_as_string"/>
										</system>
										<version>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</version>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</outcome>
							</xsl:for-each>
						</condition>
					</xsl:for-each>
				</FamilyMemberHistory>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_Condition">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Condition/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_prob">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_probType" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:for-each select="($anam_probType)[(fn:position() = xs:integer('1'))]">
			<xsl:variable name="var7_cur" as="node()" select="."/>
			<xsl:variable name="var4_guid" as="node()?" select="@guid"/>
			<xsl:variable name="var5_vguid" as="node()?" select="@vguid"/>
			<xsl:variable name="var6_prob_kod" as="node()*" select="ns2:prob_kod"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var4_guid">
					<xsl:for-each select="$var5_vguid">
						<xsl:for-each select="$var4_guid">
							<xsl:variable name="var2_cur" as="node()" select="."/>
							<xsl:for-each select="$var5_vguid">
								<xsl:variable name="var1_resultof_Reference_Condition" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Condition">
										<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1_resultof_Reference_Condition">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Condition>
						<xsl:for-each select="$var4_guid">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var5_vguid">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<xsl:for-each select="$dat_prov">
								<lastUpdated>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
								</lastUpdated>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-condition-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'11450-4'"/>
								</code>
							</tag>
						</meta>
						<clinicalStatus>
							<xsl:for-each select="ns2:prob_klin">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-clinical'))"/>
									</system>
									<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf11_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<code>
										<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</code>
								</coding>
							</xsl:for-each>
						</clinicalStatus>
						<verificationStatus>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-ver-status'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'confirmed'"/>
								</code>
							</coding>
						</verificationStatus>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/condition-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'encounter-diagnosis'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Encounter Diagnosis'"/>
								</display>
							</coding>
						</category>
						<xsl:for-each select="ns2:prob_zav_text">
							<severity>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</severity>
						</xsl:for-each>
						<code>
							<xsl:for-each select="$var6_prob_kod">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWI.htm'))"/>
									</system>
									<code>
										<xsl:for-each select="ns2:kod_syst">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
							</xsl:for-each>
							<text>
								<xsl:for-each select="$var6_prob_kod/ns2:kod_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:for-each select="ns2:prob_dat_od">
							<onsetPeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var7_cur/ns2:prob_dat_do">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</onsetPeriod>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<recorder>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</recorder>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_stad_kod">
							<stage>
								<summary>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBWI.htm'))"/>
										</system>
										<code>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
									<text>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</text>
								</summary>
							</stage>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_stad_text">
							<stage>
								<type>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</type>
							</stage>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_popis">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
						<xsl:for-each select="ns2:prob_okol">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Condition>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Immunization">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Immunization/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_oc">
		<xsl:param name="Reference" select="()"/>
		<xsl:param name="anam_oc" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:for-each select="$anam_oc">
			<xsl:variable name="var13_current" as="node()" select="."/>
			<xsl:for-each select="ns2:ocz">
				<xsl:variable name="var12_cur" as="node()" select="."/>
				<xsl:variable name="var9_vguid" as="node()?" select="@vguid"/>
				<xsl:variable name="var10_guid" as="node()?" select="@guid"/>
				<xsl:variable name="var11_davka" as="node()*" select="ns2:davka"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var10_guid">
						<xsl:for-each select="$var9_vguid">
							<xsl:for-each select="$var10_guid">
								<xsl:variable name="var2_cur" as="node()" select="."/>
								<xsl:for-each select="$var9_vguid">
									<xsl:variable name="var1_resultof_Reference_Immunization" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Immunization">
											<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var1_resultof_Reference_Immunization">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Immunization>
							<xsl:for-each select="$var10_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var9_vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-immunization-hdr'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'11369-6'"/>
									</code>
								</tag>
							</meta>
							<xsl:for-each select="@id_ockovani">
								<identifier>
									<use>
										<xsl:attribute name="value" namespace="" select="'ID očkování'"/>
									</use>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSALA.htm'))"/>
									</system>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="@id_ockovani_isin">
								<identifier>
									<use>
										<xsl:attribute name="value" namespace="" select="'ID očkování dle ISIN'"/>
									</use>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.uzis.cz/'))"/>
									</system>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/@id_davka">
								<identifier>
									<use>
										<xsl:attribute name="value" namespace="" select="'ID dávky očkování'"/>
									</use>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSALA.htm'))"/>
									</system>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/@id_davka_isin">
								<identifier>
									<use>
										<xsl:attribute name="value" namespace="" select="'ID dávky dle ISIN'"/>
									</use>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.uzis.cz/'))"/>
									</system>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<status>
								<xsl:attribute name="value" namespace="" select="'completed'"/>
							</status>
							<vaccineCode>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAHW.htm'))"/>
									</system>
									<xsl:for-each select="@typ_oc_kod">
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
									</xsl:for-each>
									<xsl:for-each select="@typ_oc_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
								<xsl:for-each select="$var11_davka">
									<xsl:variable name="var3_cur" as="node()" select="."/>
									<xsl:for-each select="@kod_ol">
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://www.sukl.cz'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
											<xsl:for-each select="$var3_cur/@nazev_ol">
												<display>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</display>
											</xsl:for-each>
										</coding>
									</xsl:for-each>
								</xsl:for-each>
								<xsl:for-each select="ns2:agens">
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/DSAKM.htm'))"/>
										</system>
										<code>
											<xsl:for-each select="@agens_klic">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<xsl:for-each select="@agens_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</xsl:for-each>
								<xsl:for-each select="$var11_davka/@pozn">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</vaccineCode>
							<patient>
								<xsl:sequence select="($Reference/@node(), $Reference/node())"/>
							</patient>
							<xsl:variable name="var4_test_resultof_any" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists(($var11_davka)[fn:exists(ns2:dat_du)])">
										<xsl:for-each select="$var11_davka/ns2:dat_du">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var4_test_resultof_any">
								<occurrenceDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</occurrenceDateTime>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/@nazev_vyrobce">
								<manufacturer>
									<display>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</display>
								</manufacturer>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/@cis_sarze">
								<lotNumber>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</lotNumber>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/ns2:dat_expirace">
								<expirationDate>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</expirationDate>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka">
								<xsl:variable name="var5_cur" as="node()" select="."/>
								<xsl:for-each select="@misto_apl_klic">
									<site>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBUU.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
											<xsl:for-each select="$var5_cur/@misto_apl_text">
												<display>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</display>
											</xsl:for-each>
										</coding>
									</site>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka">
								<xsl:variable name="var6_cur" as="node()" select="."/>
								<xsl:for-each select="@apl_cesta_klic">
									<route>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBUT.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
											<xsl:for-each select="$var6_cur/@apl_cesta_text">
												<display>
													<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
												</display>
											</xsl:for-each>
										</coding>
									</route>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<actor>
										<reference>
											<xsl:attribute name="value" namespace="" select="."/>
										</reference>
									</actor>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var13_current/ns2:oc_souhrn_text">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
							<xsl:for-each select="ns2:indikace">
								<reasonCode>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://www.uzis.cz/'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<xsl:for-each select="$var12_cur/@indikace_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</reasonCode>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka/ns2:reakce">
								<xsl:variable name="var8_typ" as="node()?" select="@typ"/>
								<reaction>
									<date>
										<xsl:for-each select="ns2:dat_or">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</date>
									<detail>
										<type>
											<xsl:for-each select="$var8_typ">
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
											</xsl:for-each>
										</type>
										<display>
											<xsl:for-each select="$var8_typ">
												<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
													<xsl:call-template name="vmf:vmf12_inputtoresult">
														<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
													</xsl:call-template>
												</xsl:variable>
												<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</xsl:for-each>
										</display>
									</detail>
								</reaction>
							</xsl:for-each>
							<xsl:for-each select="$var11_davka">
								<protocolApplied>
									<doseNumberPositiveInt>
										<xsl:for-each select="@cis_davky">
											<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
										</xsl:for-each>
									</doseNumberPositiveInt>
									<xsl:for-each select="@poc_davek">
										<seriesDosesString>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
										</seriesDosesString>
									</xsl:for-each>
								</protocolApplied>
							</xsl:for-each>
						</Immunization>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_inf">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_infType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var3_vguid" as="node()?" select="$anam_infType/@vguid"/>
		<xsl:variable name="var4_guid" as="node()?" select="$anam_infType/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var4_guid">
				<xsl:for-each select="$var3_vguid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var3_vguid">
							<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Observation">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Observation">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Observation>
					<xsl:for-each select="$var4_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var3_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-infectious-contact-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'29762-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-ParticipationType'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'EXPAGNT'"/>
							</code>
						</coding>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$dat_prov">
						<effectiveDateTime>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</effectiveDateTime>
					</xsl:for-each>
					<xsl:for-each select="$anam_infType/ns2:inf_dat_od">
						<effectivePeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$anam_infType/ns2:inf_dat_do">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</effectivePeriod>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$anam_infType/ns2:inf_stat_kod">
						<valueCodeableConcept>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.org/fhir/valueset-iso3166-1-2.html'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</code>
								<display>
									<xsl:for-each select="$anam_infType/ns2:inf_stat_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</valueCodeableConcept>
					</xsl:for-each>
					<xsl:for-each select="$anam_infType/ns2:inf_koment">
						<valueString>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</valueString>
					</xsl:for-each>
				</Observation>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_Procedure">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Procedure/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_vyk">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_vyk" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var12_chv" as="node()*" select="$anam_vyk/ns2:chv"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var12_chv">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<xsl:for-each select="@guid">
					<xsl:variable name="var3_cur" as="node()" select="."/>
					<xsl:variable name="var2_vguid" as="node()?" select="$var4_cur/@vguid"/>
					<xsl:for-each select="$var2_vguid">
						<xsl:for-each select="$var2_vguid">
							<xsl:variable name="var1_resultof_Reference_Procedure" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Procedure">
									<xsl:with-param name="GUID" select="fn:string($var3_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Procedure">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Procedure>
					<xsl:for-each select="$var12_chv/@guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var12_chv/@vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-procedure-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'47519-4'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'completed'"/>
					</status>
					<code>
						<xsl:for-each select="$var12_chv">
							<xsl:variable name="var5_cur" as="node()" select="."/>
							<xsl:for-each select="@chvps_klic">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var5_cur/@chvps_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="$var12_chv/ns2:alv_text">
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</xsl:for-each>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:variable name="var7_test_resultof_any" as="xs:string*">
						<xsl:choose>
							<xsl:when test="fn:exists(($var12_chv)[fn:exists(ns2:dat_vyk)])">
								<xsl:for-each select="$var12_chv/ns2:dat_vyk">
									<xsl:sequence select="fn:string(.)"/>
								</xsl:for-each>
							</xsl:when>
							<xsl:otherwise>
								<xsl:choose>
									<xsl:when test="fn:exists(($var12_chv)[fn:exists(@dat_ab)])">
										<xsl:variable name="var6_map_of_chv" as="xs:dateTime+">
											<xsl:for-each select="$var12_chv/@dat_ab">
												<xsl:sequence select="xs:dateTime(fn:string(.))"/>
											</xsl:for-each>
										</xsl:variable>
										<xsl:for-each select="$var6_map_of_chv">
											<xsl:sequence select="xs:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:otherwise>
						</xsl:choose>
					</xsl:variable>
					<xsl:for-each select="$var7_test_resultof_any">
						<performedDateTime>
							<xsl:attribute name="value" namespace="" select="."/>
						</performedDateTime>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<performer>
							<actor>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</actor>
						</performer>
					</xsl:for-each>
					<xsl:for-each select="$var12_chv">
						<xsl:variable name="var8_cur" as="node()" select="."/>
						<xsl:for-each select="ns2:duvod_kod">
							<reasonCode>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/sid/icd-10'))"/>
									</system>
									<code>
										<xsl:for-each select="ns2:kod">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="ns2:kod_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
								<xsl:for-each select="$var8_cur/ns2:duvod_text">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</reasonCode>
						</xsl:for-each>
					</xsl:for-each>
					<xsl:for-each select="$var12_chv/ns2:alv_form">
						<bodySite>
							<xsl:for-each select="ns2:ptext">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<display>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</display>
								</coding>
							</xsl:for-each>
						</bodySite>
					</xsl:for-each>
					<xsl:for-each select="$var12_chv/ns2:vysledek">
						<xsl:variable name="var11_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<outcome>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
								</system>
								<xsl:variable name="var9_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf13_inputtoresult">
										<xsl:with-param name="input" select="$var11_cur_as_string" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<code>
									<xsl:for-each select="$var9_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</code>
								<xsl:variable name="var10_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf14_inputtoresult">
										<xsl:with-param name="input" select="$var11_cur_as_string" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<display>
									<xsl:for-each select="$var10_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</display>
							</coding>
						</outcome>
					</xsl:for-each>
					<xsl:for-each select="$var12_chv/ns2:komplikace">
						<complication>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/sid/icd-10'))"/>
								</system>
								<code>
									<xsl:for-each select="ns2:kod">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="ns2:kod_text">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</display>
							</coding>
						</complication>
					</xsl:for-each>
					<note>
						<xsl:for-each select="$anam_vyk/ns2:vyk_souhrn_text">
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</xsl:for-each>
					</note>
				</Procedure>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_Device">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Device/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:Reference_DeviceUseStatement">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('DeviceUseStatement/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam_anam_zpi">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="anam_zpi" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:variable name="var18_uniz" as="node()*" select="$anam_zpi/ns2:uniz"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var18_uniz">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<xsl:for-each select="@guid">
					<xsl:variable name="var3_cur" as="node()" select="."/>
					<xsl:variable name="var2_vguid" as="node()?" select="$var4_cur/@vguid"/>
					<xsl:for-each select="$var2_vguid">
						<xsl:for-each select="$var2_vguid">
							<xsl:variable name="var1_resultof_Reference_DeviceUseStatement" as="xs:string?">
								<xsl:call-template name="provisio:Reference_DeviceUseStatement">
									<xsl:with-param name="GUID" select="fn:string($var3_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_DeviceUseStatement">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<DeviceUseStatement>
					<xsl:for-each select="$var18_uniz/@guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var18_uniz/@vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<xsl:variable name="var6_test_resultof_any" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists(($var18_uniz)[fn:exists(@dat_ab)])">
									<xsl:variable name="var5_map_of_uniz" as="xs:dateTime+">
										<xsl:for-each select="$var18_uniz/@dat_ab">
											<xsl:sequence select="xs:dateTime(fn:string(.))"/>
										</xsl:for-each>
									</xsl:variable>
									<xsl:for-each select="$var5_map_of_uniz">
										<xsl:sequence select="xs:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var6_test_resultof_any">
							<lastUpdated>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
							</lastUpdated>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.eu/fhir/hdr/StructureDefinition/deviceUseStatement-eu-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'46264-8'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:for-each select="$var18_uniz/@typ">
							<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf15_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</xsl:for-each>
					</status>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$var18_uniz">
						<xsl:variable name="var8_cur" as="node()" select="."/>
						<xsl:for-each select="ns2:dat_du">
							<timingPeriod>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var8_cur/ns2:dat_up">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</timingPeriod>
						</xsl:for-each>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<source>
							<display>
								<xsl:attribute name="value" namespace="" select="."/>
							</display>
						</source>
					</xsl:for-each>
					<device>
						<reference>
							<xsl:for-each select="$var18_uniz/ns2:unizf/@guid">
								<xsl:attribute name="value" namespace="" select="fn:concat('Device/', fn:string(.))"/>
							</xsl:for-each>
						</reference>
					</device>
					<xsl:for-each select="$var18_uniz">
						<xsl:variable name="var9_cur" as="node()" select="."/>
						<xsl:for-each select="ns2:duvod_text">
							<reasonCode>
								<xsl:for-each select="$var9_cur/ns2:duvod_kod">
									<coding>
										<system>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
											</xsl:for-each>
										</system>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<display>
											<xsl:for-each select="ns2:kod_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</xsl:for-each>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</reasonCode>
						</xsl:for-each>
					</xsl:for-each>
					<xsl:for-each select="$var18_uniz/ns2:u_niz">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
					<xsl:for-each select="$anam_zpi/ns2:zpi_souhrn_text">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
				</DeviceUseStatement>
			</resource>
		</entry>
		<xsl:for-each select="$var18_uniz">
			<xsl:variable name="var17_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:unizf">
				<xsl:variable name="var14_vguid" as="node()?" select="@vguid"/>
				<xsl:variable name="var15_guid" as="node()?" select="@guid"/>
				<xsl:variable name="var16_dat_ab" as="node()?" select="$var17_cur/@dat_ab"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var15_guid">
						<xsl:for-each select="$var14_vguid">
							<xsl:for-each select="$var15_guid">
								<xsl:variable name="var11_cur" as="node()" select="."/>
								<xsl:for-each select="$var14_vguid">
									<xsl:variable name="var10_resultof_Reference_Device" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Device">
											<xsl:with-param name="GUID" select="fn:string($var11_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var10_resultof_Reference_Device">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Device>
							<xsl:for-each select="$var15_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var14_vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<xsl:variable name="var12_test_resultof_exists" as="xs:string*">
									<xsl:choose>
										<xsl:when test="fn:exists($var16_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var16_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$dat_prov">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:variable>
								<xsl:for-each select="$var12_test_resultof_exists">
									<lastUpdated>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(.))"/>
									</lastUpdated>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/core/StructureDefinition/cz-medical-device'))"/>
								</profile>
							</meta>
							<status>
								<xsl:for-each select="$var17_cur/@typ">
									<xsl:variable name="var13_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf15_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var13_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</status>
							<xsl:for-each select="@niz_ident">
								<modelNumber>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</modelNumber>
							</xsl:for-each>
							<type>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:for-each select="@niz_klic">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</code>
									<display>
										<xsl:for-each select="@niz_text">
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</xsl:for-each>
									</display>
								</coding>
								<xsl:for-each select="@info_text">
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</xsl:for-each>
							</type>
						</Device>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_anam">
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_anamType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var14_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var13_create_dat_prov_of_dat_prov" as="node()*">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1_resultof_ku_z_propz_anam_anam_prob" as="node()?">
			<xsl:call-template name="provisio:ku_z_propz_anam_anam_prob">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var14_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="anam_probType" as="node()*">
					<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_prob">
						<anam_probType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_probType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1_resultof_ku_z_propz_anam_anam_prob">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_zpi">
			<xsl:variable name="var2_resultof_ku_z_propz_anam_anam_zpi" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_zpi">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_zpi" as="node()">
						<anam_zpi xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_zpi>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var2_resultof_ku_z_propz_anam_anam_zpi">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_vyk">
			<xsl:variable name="var3_resultof_ku_z_propz_anam_anam_vyk" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_vyk">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_vyk" as="node()">
						<anam_vyk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_vyk>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var3_resultof_ku_z_propz_anam_anam_vyk">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:variable name="var4_resultof_ku_z_propz_anam_anam_oc" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_anam_anam_oc">
				<xsl:with-param name="Reference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var14_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="anam_oc" as="node()*">
					<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_oc">
						<anam_oc xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_oc>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var4_resultof_ku_z_propz_anam_anam_oc">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_inf">
			<xsl:variable name="var5_resultof_ku_z_propz_anam_anam_inf" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_inf">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_infType" as="node()">
						<anam_infType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var5_resultof_ku_z_propz_anam_anam_inf">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_infc">
			<xsl:variable name="var6_resultof_ku_z_propz_anam_anam_infc" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_infc">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_infcType" as="node()">
						<anam_infcType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_infcType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var6_resultof_ku_z_propz_anam_anam_infc">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_rao">
			<xsl:variable name="var7_resultof_ku_z_propz_anam_anam_rao" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_rao">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_rao" as="node()">
						<anam_rao xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_rao>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var7_resultof_ku_z_propz_anam_anam_rao">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_sa">
			<xsl:variable name="var8_resultof_ku_z_propz_anam_anam_sa" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_sa">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_sa" as="node()">
						<anam_sa xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_sa>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var8_resultof_ku_z_propz_anam_anam_sa">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_aba">
			<xsl:variable name="var9_resultof_ku_z_propz_anam_anam_aba" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_aba">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_aba" as="node()">
						<anam_aba xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_aba>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var9_resultof_ku_z_propz_anam_anam_aba">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_abk">
			<xsl:variable name="var10_resultof_ku_z_propz_anam_anam_abk" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_abk">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_abk" as="node()">
						<anam_abk xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abk>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var10_resultof_ku_z_propz_anam_anam_abk">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_abd">
			<xsl:variable name="var11_resultof_ku_z_propz_anam_anam_abd" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_abd">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_abd" as="node()">
						<anam_abd xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abd>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var11_resultof_ku_z_propz_anam_anam_abd">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_anamType/ns2:anam_abj">
			<xsl:variable name="var12_resultof_ku_z_propz_anam_anam_abj" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_anam_anam_abj">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var14_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="anam_abj" as="node()">
						<anam_abj xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</anam_abj>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var13_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var12_resultof_ku_z_propz_anam_anam_abj">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:admu_p_prac">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="p_pracovnik" select="()"/>
		<xsl:param name="p_pracoviste" select="()"/>
		<xsl:variable name="var1_create_pracovnikType_of_p_pracovnik" as="node()?">
			<xsl:for-each select="$p_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var2_create_pracovisteType_of_p_pracoviste" as="node()?">
			<xsl:for-each select="$p_pracoviste">
				<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovisteType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var3_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var1_create_pracovnikType_of_p_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" select="($var2_create_pracovisteType_of_p_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:admu_a_prac">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="a_pracovnik" select="()"/>
		<xsl:param name="a_pracoviste" select="()"/>
		<xsl:variable name="var1_create_pracovnikType" as="node()">
			<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
				<xsl:sequence select="($a_pracovnik/@node(), $a_pracovnik/node())"/>
			</pracovnikType>
		</xsl:variable>
		<xsl:variable name="var2_create_pracovisteType" as="node()">
			<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
				<xsl:sequence select="($a_pracoviste/@node(), $a_pracoviste/node())"/>
			</pracovisteType>
		</xsl:variable>
		<xsl:variable name="var3_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var1_create_pracovnikType)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" select="($var2_create_pracovisteType)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:admu_z_prac">
		<xsl:param name="z_pracovnik" select="()"/>
		<xsl:param name="z_pracoviste" select="()"/>
		<xsl:variable name="var1_create_pracovnikType_of_z_pracovnik" as="node()?">
			<xsl:for-each select="$z_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var2_create_pracovisteType_of_z_pracoviste" as="node()?">
			<xsl:for-each select="$z_pracoviste">
				<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovisteType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var3_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var1_create_pracovnikType_of_z_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" select="($var2_create_pracovisteType_of_z_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:admu_o_prac">
		<xsl:param name="o_pracovnik" select="()"/>
		<xsl:param name="o_pracoviste" select="()"/>
		<xsl:variable name="var1_create_pracovnikType_of_o_pracovnik" as="node()?">
			<xsl:for-each select="$o_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var2_create_pracovisteType_of_o_pracoviste" as="node()?">
			<xsl:for-each select="$o_pracoviste">
				<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovisteType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var3_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var1_create_pracovnikType_of_o_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" select="($var2_create_pracovisteType_of_o_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_admu">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_admuType" select="()"/>
		<xsl:variable name="var12_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:sequence select="()"/>
		</entry>
		<xsl:variable name="var1_create_p_pracovnik_of_p_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:p_pracovnik">
				<p_pracovnik xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</p_pracovnik>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var2_create_p_pracoviste_of_p_pracoviste" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:p_pracoviste">
				<p_pracoviste xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</p_pracoviste>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var3_resultof_admu_p_prac" as="node()*">
			<xsl:call-template name="provisio:admu_p_prac">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var12_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="p_pracovnik" select="($var1_create_p_pracovnik_of_p_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="p_pracoviste" select="($var2_create_p_pracoviste_of_p_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_admu_p_prac">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_admuType/ns2:a_pracovnik">
			<xsl:variable name="var5_cur" as="node()" select="."/>
			<xsl:for-each select="$ku_z_propz_admuType/ns2:a_pracoviste">
				<xsl:variable name="var4_resultof_admu_a_prac" as="node()*">
					<xsl:call-template name="provisio:admu_a_prac">
						<xsl:with-param name="patientReference" as="node()">
							<Reference xmlns="http://hl7.org/fhir">
								<xsl:sequence select="$var12_let"/>
							</Reference>
						</xsl:with-param>
						<xsl:with-param name="a_pracovnik" as="node()">
							<a_pracovnik xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
								<xsl:sequence select="($var5_cur/@node(), $var5_cur/node())"/>
							</a_pracovnik>
						</xsl:with-param>
						<xsl:with-param name="a_pracoviste" as="node()">
							<a_pracoviste xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
								<xsl:sequence select="(./@node(), ./node())"/>
							</a_pracoviste>
						</xsl:with-param>
					</xsl:call-template>
				</xsl:variable>
				<xsl:for-each select="$var4_resultof_admu_a_prac">
					<entry xmlns="http://hl7.org/fhir">
						<xsl:sequence select="(./@node(), ./node())"/>
					</entry>
				</xsl:for-each>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:variable name="var6_create_o_pracovnik_of_o_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:o_pracovnik">
				<o_pracovnik xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</o_pracovnik>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var7_create_o_pracoviste_of_o_pracoviste" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:o_pracoviste">
				<o_pracoviste xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</o_pracoviste>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var8_resultof_admu_o_prac" as="node()*">
			<xsl:call-template name="provisio:admu_o_prac">
				<xsl:with-param name="o_pracovnik" select="($var6_create_o_pracovnik_of_o_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="o_pracoviste" select="($var7_create_o_pracoviste_of_o_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var8_resultof_admu_o_prac">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var9_create_z_pracovnik_of_z_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:z_pracovnik">
				<z_pracovnik xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</z_pracovnik>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var10_create_z_pracoviste_of_z_pracoviste" as="node()*">
			<xsl:for-each select="$ku_z_propz_admuType/ns2:z_pracoviste">
				<z_pracoviste xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</z_pracoviste>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var11_resultof_admu_z_prac" as="node()*">
			<xsl:call-template name="provisio:admu_z_prac">
				<xsl:with-param name="z_pracovnik" select="($var9_create_z_pracovnik_of_z_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="z_pracoviste" select="($var10_create_z_pracoviste_of_z_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var11_resultof_admu_z_prac">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_sprij_fyznal">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="fyznalType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var8_cur" as="node()" select="."/>
			<xsl:for-each select="@ind_oprav_sd">
				<xsl:variable name="var5_http___loinc_org_as_string" as="xs:string" select="xs:string(xs:anyURI('http://loinc.org'))"/>
				<xsl:variable name="var6_vguid_tk" as="node()?" select="$var8_cur/@vguid_tk"/>
				<xsl:variable name="var7_guid_tk" as="node()?" select="$var8_cur/@guid_tk"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var7_guid_tk">
						<xsl:for-each select="$var6_vguid_tk">
							<xsl:for-each select="$var7_guid_tk">
								<xsl:variable name="var2_cur" as="node()" select="."/>
								<xsl:for-each select="$var6_vguid_tk">
									<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Observation">
											<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var1_resultof_Reference_Observation">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var7_guid_tk">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var6_vguid_tk">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/bp'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="$var5_http___loinc_org_as_string"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'85354-9'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Blood pressure panel with all children optional'"/>
									</display>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var4_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($dat_prov)">
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var3_dat_ab" as="node()?" select="$var8_cur/@dat_ab"/>
										<xsl:choose>
											<xsl:when test="fn:exists($var3_dat_ab)">
												<xsl:sequence select="xs:string(xs:dateTime(fn:string($var3_dat_ab)))"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:for-each select="$var8_cur/ns2:dat_vys">
													<xsl:sequence select="fn:string(.)"/>
												</xsl:for-each>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var4_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var8_cur/ns2:pozn">
								<note>
									<text>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</text>
								</note>
							</xsl:for-each>
							<xsl:for-each select="$var8_cur/ns2:tk_syst">
								<component>
									<code>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="$var5_http___loinc_org_as_string"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'8480-6'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Systolic blood pressure'"/>
											</display>
										</coding>
									</code>
									<valueQuantity>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</value>
										<unit>
											<xsl:attribute name="value" namespace="" select="'mmHg'"/>
										</unit>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'mm[Hg]'"/>
										</code>
									</valueQuantity>
								</component>
							</xsl:for-each>
							<xsl:for-each select="$var8_cur/ns2:tk_diast">
								<component>
									<code>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="$var5_http___loinc_org_as_string"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="'8462-4'"/>
											</code>
											<display>
												<xsl:attribute name="value" namespace="" select="'Diastolic blood pressure'"/>
											</display>
										</coding>
									</code>
									<valueQuantity>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</value>
										<unit>
											<xsl:attribute name="value" namespace="" select="'mmHg'"/>
										</unit>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="'mm[Hg]'"/>
										</code>
									</valueQuantity>
								</component>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var15_cur" as="node()" select="."/>
			<xsl:for-each select="@ind_oprav_sd">
				<xsl:variable name="var13_guid_pulz" as="node()?" select="$var15_cur/@guid_pulz"/>
				<xsl:variable name="var14_vguid_pulz" as="node()?" select="$var15_cur/@vguid_pulz"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var13_guid_pulz">
						<xsl:for-each select="$var14_vguid_pulz">
							<xsl:for-each select="$var13_guid_pulz">
								<xsl:variable name="var10_cur" as="node()" select="."/>
								<xsl:for-each select="$var14_vguid_pulz">
									<xsl:variable name="var9_resultof_Reference_Observation" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Observation">
											<xsl:with-param name="GUID" select="fn:string($var10_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var9_resultof_Reference_Observation">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var13_guid_pulz">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var14_vguid_pulz">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/heartrate'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8867-4'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Heart rate'"/>
									</display>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var12_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($dat_prov)">
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var11_dat_ab" as="node()?" select="$var15_cur/@dat_ab"/>
										<xsl:choose>
											<xsl:when test="fn:exists($var11_dat_ab)">
												<xsl:sequence select="xs:string(xs:dateTime(fn:string($var11_dat_ab)))"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:for-each select="$var15_cur/ns2:dat_vys">
													<xsl:sequence select="fn:string(.)"/>
												</xsl:for-each>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var12_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var15_cur/ns2:pulz">
								<valueQuantity>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
									<unit>
										<xsl:attribute name="value" namespace="" select="'/min'"/>
									</unit>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'/min'"/>
									</code>
								</valueQuantity>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var22_cur" as="node()" select="."/>
			<xsl:for-each select="@ind_oprav_sd">
				<xsl:variable name="var20_vguid_o_sat" as="node()?" select="$var22_cur/@vguid_o2sat"/>
				<xsl:variable name="var21_guid_o_sat" as="node()?" select="$var22_cur/@guid_o2sat"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var21_guid_o_sat">
						<xsl:for-each select="$var20_vguid_o_sat">
							<xsl:for-each select="$var21_guid_o_sat">
								<xsl:variable name="var17_cur" as="node()" select="."/>
								<xsl:for-each select="$var20_vguid_o_sat">
									<xsl:variable name="var16_resultof_Reference_Observation" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Observation">
											<xsl:with-param name="GUID" select="fn:string($var17_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var16_resultof_Reference_Observation">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var21_guid_o_sat">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var20_vguid_o_sat">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/oxygensat'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'2708-6'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Oxygen saturation in Arterial blood'"/>
									</display>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var19_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($dat_prov)">
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var18_dat_ab" as="node()?" select="$var22_cur/@dat_ab"/>
										<xsl:choose>
											<xsl:when test="fn:exists($var18_dat_ab)">
												<xsl:sequence select="xs:string(xs:dateTime(fn:string($var18_dat_ab)))"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:for-each select="$var22_cur/ns2:dat_vys">
													<xsl:sequence select="fn:string(.)"/>
												</xsl:for-each>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var19_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var22_cur/ns2:o2sat">
								<valueQuantity>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
									<unit>
										<xsl:attribute name="value" namespace="" select="'%'"/>
									</unit>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'%'"/>
									</code>
								</valueQuantity>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var29_cur" as="node()" select="."/>
			<xsl:for-each select="@ind_oprav_sd">
				<xsl:variable name="var27_vguid_dech" as="node()?" select="$var29_cur/@vguid_dech"/>
				<xsl:variable name="var28_guid_dech" as="node()?" select="$var29_cur/@guid_dech"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var28_guid_dech">
						<xsl:for-each select="$var27_vguid_dech">
							<xsl:for-each select="$var28_guid_dech">
								<xsl:variable name="var24_cur" as="node()" select="."/>
								<xsl:for-each select="$var27_vguid_dech">
									<xsl:variable name="var23_resultof_Reference_Observation" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Observation">
											<xsl:with-param name="GUID" select="fn:string($var24_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var23_resultof_Reference_Observation">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var28_guid_dech">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var27_vguid_dech">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/resprate'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'9279-1'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Respiratory rate'"/>
									</display>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var26_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($dat_prov)">
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var25_dat_ab" as="node()?" select="$var29_cur/@dat_ab"/>
										<xsl:choose>
											<xsl:when test="fn:exists($var25_dat_ab)">
												<xsl:sequence select="xs:string(xs:dateTime(fn:string($var25_dat_ab)))"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:for-each select="$var29_cur/ns2:dat_vys">
													<xsl:sequence select="fn:string(.)"/>
												</xsl:for-each>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var26_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var29_cur/ns2:dech">
								<valueQuantity>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
									<unit>
										<xsl:attribute name="value" namespace="" select="'/min'"/>
									</unit>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'/min'"/>
									</code>
								</valueQuantity>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$fyznalType">
			<xsl:variable name="var36_cur" as="node()" select="."/>
			<xsl:for-each select="@ind_oprav_sd">
				<xsl:variable name="var34_vguid_teplota" as="node()?" select="$var36_cur/@vguid_teplota"/>
				<xsl:variable name="var35_guid_teplota" as="node()?" select="$var36_cur/@guid_teplota"/>
				<entry xmlns="http://hl7.org/fhir">
					<xsl:for-each select="$var35_guid_teplota">
						<xsl:for-each select="$var34_vguid_teplota">
							<xsl:for-each select="$var35_guid_teplota">
								<xsl:variable name="var31_cur" as="node()" select="."/>
								<xsl:for-each select="$var34_vguid_teplota">
									<xsl:variable name="var30_resultof_Reference_Observation" as="xs:string?">
										<xsl:call-template name="provisio:Reference_Observation">
											<xsl:with-param name="GUID" select="fn:string($var31_cur)" as="xs:string"/>
											<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var30_resultof_Reference_Observation">
										<fullUrl>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</fullUrl>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
					<resource>
						<Observation>
							<xsl:for-each select="$var35_guid_teplota">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var34_vguid_teplota">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
								<profile>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/StructureDefinition/bodytemp'))"/>
								</profile>
								<tag>
									<code>
										<xsl:attribute name="value" namespace="" select="'8716-3'"/>
									</code>
								</tag>
							</meta>
							<status>
								<xsl:attribute name="value" namespace="" select="'final'"/>
							</status>
							<category>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
									</display>
								</coding>
							</category>
							<code>
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'8310-5'"/>
									</code>
									<display>
										<xsl:attribute name="value" namespace="" select="'Body temperature'"/>
									</display>
								</coding>
							</code>
							<subject>
								<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
							</subject>
							<xsl:variable name="var33_test_resultof_exists" as="xs:string*">
								<xsl:choose>
									<xsl:when test="fn:exists($dat_prov)">
										<xsl:for-each select="$dat_prov">
											<xsl:sequence select="fn:string(.)"/>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var32_dat_ab" as="node()?" select="$var36_cur/@dat_ab"/>
										<xsl:choose>
											<xsl:when test="fn:exists($var32_dat_ab)">
												<xsl:sequence select="xs:string(xs:dateTime(fn:string($var32_dat_ab)))"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:for-each select="$var36_cur/ns2:dat_vys">
													<xsl:sequence select="fn:string(.)"/>
												</xsl:for-each>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:for-each select="$var33_test_resultof_exists">
								<effectiveDateTime>
									<xsl:attribute name="value" namespace="" select="."/>
								</effectiveDateTime>
							</xsl:for-each>
							<xsl:for-each select="$practitionerReference">
								<performer>
									<reference>
										<xsl:attribute name="value" namespace="" select="."/>
									</reference>
								</performer>
							</xsl:for-each>
							<xsl:for-each select="$var36_cur/ns2:teplota">
								<valueQuantity>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
									<unit>
										<xsl:attribute name="value" namespace="" select="'°C'"/>
									</unit>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="'Cel'"/>
									</code>
								</valueQuantity>
							</xsl:for-each>
						</Observation>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Observation">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Observation/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_sprij_h">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="hType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$hType/@vyska">
			<xsl:variable name="var5_vguid_vyska" as="node()?" select="$hType/@vguid_vyska"/>
			<xsl:variable name="var6_guid_vyska" as="node()?" select="$hType/@guid_vyska"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var6_guid_vyska">
					<xsl:for-each select="$var5_vguid_vyska">
						<xsl:for-each select="$var6_guid_vyska">
							<xsl:variable name="var2_cur" as="node()" select="."/>
							<xsl:for-each select="$var5_vguid_vyska">
								<xsl:variable name="var1_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var6_guid_vyska">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var5_vguid_vyska">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-height-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'8302-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Body height'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var4_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var3_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var3_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var3_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var4_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</code>
						</valueQuantity>
						<xsl:for-each select="$hType/ns2:pozn">
							<note>
								<text>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</text>
							</note>
						</xsl:for-each>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$hType/@hmotnost">
			<xsl:variable name="var11_guid_hmotnost" as="node()?" select="$hType/@guid_hmotnost"/>
			<xsl:variable name="var12_vguid_hmotnost" as="node()?" select="$hType/@vguid_hmotnost"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var11_guid_hmotnost">
					<xsl:for-each select="$var12_vguid_hmotnost">
						<xsl:for-each select="$var11_guid_hmotnost">
							<xsl:variable name="var8_cur" as="node()" select="."/>
							<xsl:for-each select="$var12_vguid_hmotnost">
								<xsl:variable name="var7_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var8_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var7_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var11_guid_hmotnost">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var12_vguid_hmotnost">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-weight-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'29463-7'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Body weight'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var10_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var9_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var9_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var9_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var10_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:decimal(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'kg'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'kg'"/>
							</code>
						</valueQuantity>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$hType/@bmi">
			<xsl:variable name="var17_guid_bmi" as="node()?" select="$hType/@guid_bmi"/>
			<xsl:variable name="var18_vguid_bmi" as="node()?" select="$hType/@vguid_bmi"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var17_guid_bmi">
					<xsl:for-each select="$var18_vguid_bmi">
						<xsl:for-each select="$var17_guid_bmi">
							<xsl:variable name="var14_cur" as="node()" select="."/>
							<xsl:for-each select="$var18_vguid_bmi">
								<xsl:variable name="var13_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var14_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var13_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var17_guid_bmi">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var18_vguid_bmi">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-BMI-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'39156-5'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Body mass index (BMI) [Ratio]'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var16_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var15_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var15_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var15_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var16_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:decimal(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'kg/m2'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'kg/m2'"/>
							</code>
						</valueQuantity>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$hType/@o_hlava">
			<xsl:variable name="var23_vguid_o_hlava" as="node()?" select="$hType/@vguid_o_hlava"/>
			<xsl:variable name="var24_guid_o_hlava" as="node()?" select="$hType/@guid_o_hlava"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var24_guid_o_hlava">
					<xsl:for-each select="$var23_vguid_o_hlava">
						<xsl:for-each select="$var24_guid_o_hlava">
							<xsl:variable name="var20_cur" as="node()" select="."/>
							<xsl:for-each select="$var23_vguid_o_hlava">
								<xsl:variable name="var19_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var20_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var19_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var24_guid_o_hlava">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var23_vguid_o_hlava">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-headCircumference-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'8287-5'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Head Occipital-frontal circumference by Tape measure'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var22_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var21_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var21_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var21_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var22_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</code>
						</valueQuantity>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$hType/@o_hrudnik">
			<xsl:variable name="var29_vguid_o_hrudnik" as="node()?" select="$hType/@vguid_o_hrudnik"/>
			<xsl:variable name="var30_guid_o_hrudnik" as="node()?" select="$hType/@guid_o_hrudnik"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var30_guid_o_hrudnik">
					<xsl:for-each select="$var29_vguid_o_hrudnik">
						<xsl:for-each select="$var30_guid_o_hrudnik">
							<xsl:variable name="var26_cur" as="node()" select="."/>
							<xsl:for-each select="$var29_vguid_o_hrudnik">
								<xsl:variable name="var25_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var26_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var25_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var30_guid_o_hrudnik">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var29_vguid_o_hrudnik">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-chestCircumference-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'8280-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Waist Circumference at umbilicus by Tape measure'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var28_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var27_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var27_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var27_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var28_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</code>
						</valueQuantity>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$hType/@o_pas">
			<xsl:variable name="var35_vguid_o_pas" as="node()?" select="$hType/@vguid_o_pas"/>
			<xsl:variable name="var36_guid_o_pas" as="node()?" select="$hType/@guid_o_pas"/>
			<entry xmlns="http://hl7.org/fhir">
				<xsl:for-each select="$var36_guid_o_pas">
					<xsl:for-each select="$var35_vguid_o_pas">
						<xsl:for-each select="$var36_guid_o_pas">
							<xsl:variable name="var32_cur" as="node()" select="."/>
							<xsl:for-each select="$var35_vguid_o_pas">
								<xsl:variable name="var31_resultof_Reference_Observation" as="xs:string?">
									<xsl:call-template name="provisio:Reference_Observation">
										<xsl:with-param name="GUID" select="fn:string($var32_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var31_resultof_Reference_Observation">
									<fullUrl>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
									</fullUrl>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
				<resource>
					<Observation>
						<xsl:for-each select="$var36_guid_o_pas">
							<id>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</id>
						</xsl:for-each>
						<meta>
							<xsl:for-each select="$var35_vguid_o_pas">
								<versionId>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</versionId>
							</xsl:for-each>
							<profile>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-observation-abdominalCircumference-hdr'))"/>
							</profile>
							<tag>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
							</tag>
						</meta>
						<status>
							<xsl:attribute name="value" namespace="" select="'final'"/>
						</status>
						<category>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/observation-category'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'vital-signs'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital Signs'"/>
								</display>
							</coding>
						</category>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
								</system>
								<code>
									<xsl:attribute name="value" namespace="" select="'56086-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Adult Waist Circumference Protocol'"/>
								</display>
							</coding>
						</code>
						<subject>
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</subject>
						<xsl:variable name="var34_test_resultof_exists" as="xs:string*">
							<xsl:choose>
								<xsl:when test="fn:exists($dat_prov)">
									<xsl:for-each select="$dat_prov">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:when>
								<xsl:otherwise>
									<xsl:variable name="var33_dat_ab" as="node()?" select="$hType/@dat_ab"/>
									<xsl:choose>
										<xsl:when test="fn:exists($var33_dat_ab)">
											<xsl:sequence select="xs:string(xs:dateTime(fn:string($var33_dat_ab)))"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:for-each select="$hType/ns2:dat_vys">
												<xsl:sequence select="fn:string(.)"/>
											</xsl:for-each>
										</xsl:otherwise>
									</xsl:choose>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:for-each select="$var34_test_resultof_exists">
							<effectiveDateTime>
								<xsl:attribute name="value" namespace="" select="."/>
							</effectiveDateTime>
						</xsl:for-each>
						<xsl:for-each select="$practitionerReference">
							<performer>
								<reference>
									<xsl:attribute name="value" namespace="" select="."/>
								</reference>
							</performer>
						</xsl:for-each>
						<valueQuantity>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
							</value>
							<unit>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</unit>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://unitsofmeasure.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'cm'"/>
							</code>
						</valueQuantity>
					</Observation>
				</resource>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:text_autor_ptext_ktext_priloha">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="text" select="()"/>
		<xsl:variable name="var1_ktext" as="node()*" select="$text/ns2:ktext"/>
		<DocumentReference xmlns="http://hl7.org/fhir">
			<id>
				<xsl:for-each select="$text/@guid">
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</xsl:for-each>
			</id>
			<status>
				<xsl:attribute name="value" namespace="" select="'current'"/>
			</status>
			<type>
				<coding>
					<system>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
					</system>
					<code>
						<xsl:attribute name="value" namespace="" select="'11503-0'"/>
					</code>
					<display>
						<xsl:attribute name="value" namespace="" select="'Medical records'"/>
					</display>
				</coding>
			</type>
			<subject>
				<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
			</subject>
			<description>
				<xsl:for-each select="$text/ns2:ptext">
					<xsl:attribute name="value" namespace="" select="fn:normalize-space(fn:string(.))"/>
				</xsl:for-each>
			</description>
			<content>
				<attachment>
					<contentType>
						<xsl:attribute name="value" namespace="" select="'text/plain'"/>
					</contentType>
				</attachment>
			</content>
			<content>
				<attachment>
					<contentType>
						<xsl:for-each select="$var1_ktext/@typ">
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</xsl:for-each>
					</contentType>
					<data>
						<xsl:for-each select="$var1_ktext">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:base64Binary(fn:string(.)))"/>
						</xsl:for-each>
					</data>
				</attachment>
			</content>
			<xsl:for-each select="$text/ns2:priloha">
				<content>
					<attachment>
						<contentType>
							<xsl:for-each select="@typ">
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</xsl:for-each>
						</contentType>
						<data>
							<xsl:for-each select="@zdroj">
								<xsl:attribute name="value" namespace="" select="xs:string(xs:base64Binary(fn:string(.)))"/>
							</xsl:for-each>
						</data>
					</attachment>
				</content>
			</xsl:for-each>
		</DocumentReference>
	</xsl:template>
	<xsl:template name="provisio:vys_v_snomed">
		<xsl:param name="vys_v_snomed" select="()"/>
		<xsl:variable name="var16_vysl_pracovnik" as="node()*" select="$vys_v_snomed/ns2:vysl_pracovnik"/>
		<xsl:variable name="var17_guid" as="node()?" select="$vys_v_snomed/@guid"/>
		<xsl:variable name="var18_vysl_typ" as="node()*" select="$vys_v_snomed/ns2:vysl_typ"/>
		<xsl:variable name="var19_vguid" as="node()?" select="$vys_v_snomed/@vguid"/>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var17_guid">
					<xsl:variable name="var1_cur" as="node()" select="."/>
					<xsl:for-each select="$var19_vguid">
						<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:concat(fn:concat(fn:concat('Observation/', fn:string($var1_cur)), '/_history/'), fn:string(.))))"/>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<resource>
				<Observation>
					<id>
						<xsl:for-each select="$var17_guid">
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</xsl:for-each>
					</id>
					<xsl:for-each select="$var19_vguid">
						<meta>
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</meta>
					</xsl:for-each>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
							</system>
							<code>
								<xsl:for-each select="$vys_v_snomed/ns2:kod">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
					</code>
					<effectiveDateTime>
						<xsl:for-each select="$vys_v_snomed/ns2:dat_vysetreni">
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</xsl:for-each>
					</effectiveDateTime>
					<issued>
						<xsl:for-each select="$vys_v_snomed/ns2:dat_vydani">
							<xsl:attribute name="value" namespace="" select="xs:string(xs:dateTime(fn:string(.)))"/>
						</xsl:for-each>
					</issued>
					<performer>
						<reference>
							<xsl:for-each select="$var16_vysl_pracovnik">
								<xsl:variable name="var3_cur" as="node()" select="."/>
								<xsl:for-each select="@guid">
									<xsl:variable name="var2_cur" as="node()" select="."/>
									<xsl:for-each select="$var3_cur/@vguid">
										<xsl:attribute name="value" namespace="" select="fn:concat(fn:concat(fn:concat('PractitionerRole/', fn:string($var2_cur)), '/_history/'), fn:string(.))"/>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</reference>
					</performer>
					<xsl:variable name="var5_resultof_filter" as="node()*">
						<xsl:for-each select="$var18_vysl_typ">
							<xsl:variable name="var4_resultof_vmf___inputtoresult" as="xs:boolean">
								<xsl:call-template name="vmf:vmf16_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:if test="$var4_resultof_vmf___inputtoresult">
								<xsl:sequence select="."/>
							</xsl:if>
						</xsl:for-each>
					</xsl:variable>
					<xsl:for-each select="($var5_resultof_filter)[fn:exists($vys_v_snomed/ns2:vysl_hodnota)]">
						<valueQuantity>
							<xsl:variable name="var6_cur_of_vysl_hodnota" as="xs:string*">
								<xsl:for-each select="$vys_v_snomed/ns2:vysl_hodnota">
									<xsl:sequence select="fn:string(.)"/>
								</xsl:for-each>
							</xsl:variable>
							<value>
								<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var6_cur_of_vysl_hodnota return xs:string($x), ' '))"/>
							</value>
							<unit>
								<xsl:for-each select="$vys_v_snomed/ns2:vysl_jednotka">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</unit>
						</valueQuantity>
					</xsl:for-each>
					<xsl:variable name="var8_resultof_filter" as="node()*">
						<xsl:for-each select="$var18_vysl_typ">
							<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:boolean">
								<xsl:call-template name="vmf:vmf17_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:if test="$var7_resultof_vmf___inputtoresult">
								<xsl:sequence select="."/>
							</xsl:if>
						</xsl:for-each>
					</xsl:variable>
					<xsl:for-each select="($var8_resultof_filter)[fn:exists($vys_v_snomed/ns2:vysl_hodnota)]">
						<xsl:variable name="var9_cur_of_vysl_hodnota" as="xs:string*">
							<xsl:for-each select="$vys_v_snomed/ns2:vysl_hodnota">
								<xsl:sequence select="fn:string(.)"/>
							</xsl:for-each>
						</xsl:variable>
						<valueCodeableConcept>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var9_cur_of_vysl_hodnota return xs:string($x), ' '))"/>
								</code>
							</coding>
						</valueCodeableConcept>
					</xsl:for-each>
					<xsl:variable name="var11_resultof_filter" as="node()*">
						<xsl:for-each select="$var18_vysl_typ">
							<xsl:variable name="var10_resultof_vmf___inputtoresult" as="xs:boolean">
								<xsl:call-template name="vmf:vmf18_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:if test="$var10_resultof_vmf___inputtoresult">
								<xsl:sequence select="."/>
							</xsl:if>
						</xsl:for-each>
					</xsl:variable>
					<xsl:for-each select="($var11_resultof_filter)[fn:exists($vys_v_snomed/ns2:vysl_hodnota)]">
						<xsl:variable name="var12_cur_of_vysl_hodnota" as="xs:string*">
							<xsl:for-each select="$vys_v_snomed/ns2:vysl_hodnota">
								<xsl:sequence select="fn:string(.)"/>
							</xsl:for-each>
						</xsl:variable>
						<valueString>
							<xsl:attribute name="value" namespace="" select="xs:string(fn:string-join(for $x in $var12_cur_of_vysl_hodnota return xs:string($x), ' '))"/>
						</valueString>
					</xsl:for-each>
					<xsl:for-each select="$vys_v_snomed/ns2:vysl_pozn">
						<note>
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</note>
					</xsl:for-each>
					<referenceRange>
						<xsl:for-each select="$vys_v_snomed/ns2:vysl_rm_d">
							<low>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</low>
						</xsl:for-each>
						<xsl:for-each select="$vys_v_snomed/ns2:vysl_rm_h">
							<high>
								<value>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</value>
							</high>
						</xsl:for-each>
					</referenceRange>
				</Observation>
			</resource>
		</entry>
		<xsl:variable name="var13_create_pracovnikType_of_vysl_pracovnik" as="node()*">
			<xsl:for-each select="$var16_vysl_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var14_create_pracovisteType_of_vysl_pracoviste" as="node()*">
			<xsl:for-each select="$vys_v_snomed/ns2:vysl_pracoviste">
				<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovisteType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var15_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var13_create_pracovnikType_of_vysl_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" select="($var14_create_pracovisteType_of_vysl_pracoviste)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var15_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_DocumentReference">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('DocumentReference/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_sprij">
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_sprijType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:variable name="var29_vys_a_text" as="node()*" select="$ku_z_propz_sprijType/ns2:vys_a_text"/>
		<xsl:variable name="var30_prij_pracovnik" as="node()*" select="$ku_z_propz_sprijType/ns2:prij_pracovnik"/>
		<xsl:variable name="var28_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var27_create_dat_prov_of_dat_prov" as="node()*">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Encounter>
					<status>
						<xsl:attribute name="value" namespace="" select="'in-progress'"/>
					</status>
					<class>
						<system>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/v3-ActCode'))"/>
						</system>
						<code>
							<xsl:attribute name="value" namespace="" select="'IMP'"/>
						</code>
						<display>
							<xsl:attribute name="value" namespace="" select="'inpatient encounter'"/>
						</display>
					</class>
					<subject>
						<xsl:sequence select="$var28_let"/>
					</subject>
					<participant>
						<individual>
							<reference>
								<xsl:for-each select="$var30_prij_pracovnik">
									<xsl:variable name="var4_cur" as="node()" select="."/>
									<xsl:for-each select="@guid">
										<xsl:variable name="var3_cur" as="node()" select="."/>
										<xsl:variable name="var2_vguid" as="node()?" select="$var4_cur/@vguid"/>
										<xsl:for-each select="$var2_vguid">
											<xsl:for-each select="$var2_vguid">
												<xsl:variable name="var1_resultof_Reference_Practitioner" as="xs:string?">
													<xsl:call-template name="provisio:Reference_Practitioner">
														<xsl:with-param name="GUID" select="fn:string($var3_cur)" as="xs:string"/>
														<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
													</xsl:call-template>
												</xsl:variable>
												<xsl:for-each select="$var1_resultof_Reference_Practitioner">
													<xsl:attribute name="value" namespace="" select="."/>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:for-each>
							</reference>
							<display>
								<xsl:for-each select="$var30_prij_pracovnik">
									<xsl:variable name="var8_cur" as="node()" select="."/>
									<xsl:for-each select="ns2:titul_pred">
										<xsl:variable name="var7_cur" as="node()" select="."/>
										<xsl:for-each select="$var8_cur/ns2:jmeno">
											<xsl:variable name="var6_cur" as="node()" select="."/>
											<xsl:for-each select="$var8_cur/ns2:prijmeni">
												<xsl:variable name="var5_cur" as="node()" select="."/>
												<xsl:for-each select="$var8_cur/ns2:titul_za">
													<xsl:attribute name="value" namespace="" select="fn:concat(fn:concat(fn:concat(fn:concat(fn:concat(fn:concat(fn:string($var7_cur), ' '), fn:string($var6_cur)), ' '), fn:string($var5_cur)), ' '), fn:string(.))"/>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:for-each>
							</display>
						</individual>
					</participant>
					<period>
						<start>
							<xsl:for-each select="$ku_z_propz_sprijType/ns2:dat_vys_prij">
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</xsl:for-each>
						</start>
					</period>
				</Encounter>
			</resource>
		</entry>
		<xsl:variable name="var9_create_pracovnikType_of_prij_pracovnik" as="node()*">
			<xsl:for-each select="$var30_prij_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var10_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var9_create_pracovnikType_of_prij_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var10_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var11_create_pracovnikType_of_vys_a_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_sprijType/ns2:vys_a_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var12_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var11_create_pracovnikType_of_vys_a_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var12_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var13_resultof_ku_z_propz_sprij_fyznal" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_sprij_fyznal">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var28_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="fyznalType" as="node()*">
					<xsl:for-each select="$ku_z_propz_sprijType/ns2:fyznal">
						<fyznalType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</fyznalType>
					</xsl:for-each>
				</xsl:with-param>
				<xsl:with-param name="dat_prov" select="$var27_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var13_resultof_ku_z_propz_sprij_fyznal">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_sprijType/ns2:h">
			<xsl:variable name="var14_resultof_ku_z_propz_sprij_h" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz_sprij_h">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var28_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="hType" as="node()">
						<hType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</hType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var27_create_dat_prov_of_dat_prov" as="node()*"/>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var14_resultof_ku_z_propz_sprij_h">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<entry xmlns="http://hl7.org/fhir">
			<fullUrl>
				<xsl:for-each select="$var29_vys_a_text">
					<xsl:variable name="var18_cur" as="node()" select="."/>
					<xsl:for-each select="@guid">
						<xsl:variable name="var17_cur" as="node()" select="."/>
						<xsl:variable name="var16_vguid" as="node()?" select="$var18_cur/@vguid"/>
						<xsl:for-each select="$var16_vguid">
							<xsl:for-each select="$var16_vguid">
								<xsl:variable name="var15_resultof_FullURL_DocumentReference" as="xs:string?">
									<xsl:call-template name="provisio:FullURL_DocumentReference">
										<xsl:with-param name="GUID" select="fn:string($var17_cur)" as="xs:string"/>
										<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var15_resultof_FullURL_DocumentReference">
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</fullUrl>
			<resource>
				<xsl:for-each select="$var29_vys_a_text">
					<xsl:variable name="var19_resultof_text_autor_ptext_ktext_priloha" as="node()?">
						<xsl:call-template name="provisio:text_autor_ptext_ktext_priloha">
							<xsl:with-param name="patientReference" as="node()">
								<Reference>
									<xsl:sequence select="$var28_let"/>
								</Reference>
							</xsl:with-param>
							<xsl:with-param name="text" as="node()">
								<text xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
									<xsl:sequence select="(./@node(), ./node())"/>
								</text>
							</xsl:with-param>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var19_resultof_text_autor_ptext_ktext_priloha">
						<DocumentReference>
							<xsl:sequence select="(./@node(), ./node())"/>
						</DocumentReference>
					</xsl:for-each>
				</xsl:for-each>
			</resource>
		</entry>
		<xsl:variable name="var20_create_pracovnikType_of_vys_f_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_sprijType/ns2:vys_f_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var21_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var20_create_pracovnikType_of_vys_f_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var21_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var22_create_pracovnikType_of_vys_s_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_sprijType/ns2:vys_s_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var23_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var22_create_pracovnikType_of_vys_s_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var23_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var24_create_pracovnikType_of_vys_fs_pracovnik" as="node()*">
			<xsl:for-each select="$ku_z_propz_sprijType/ns2:vys_fs_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var25_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var24_create_pracovnikType_of_vys_fs_pracovnik)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var25_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$ku_z_propz_sprijType/ns2:vys_a_param/ns2:vys_v_snomed">
			<xsl:variable name="var26_resultof_vys_v_snomed" as="node()*">
				<xsl:call-template name="provisio:vys_v_snomed">
					<xsl:with-param name="vys_v_snomed" as="node()">
						<vys_v_snomed xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</vys_v_snomed>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var26_resultof_vys_v_snomed">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:FullURL_PractitionerRole">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('PractitionerRole/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:FullURL_Practitioner">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Practitioner/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:adresa_spojeni">
		<xsl:param name="as" select="()"/>
		<xsl:for-each select="$as">
			<xsl:variable name="var3_typ" as="node()?" select="@typ"/>
			<ContactPoint xmlns="http://hl7.org/fhir">
				<system>
					<xsl:for-each select="$var3_typ">
						<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf19_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
							<xsl:attribute name="value" namespace="" select="."/>
						</xsl:for-each>
					</xsl:for-each>
				</system>
				<xsl:for-each select="ns1:obsah">
					<value>
						<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
					</value>
				</xsl:for-each>
				<xsl:for-each select="$var3_typ">
					<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:string?">
						<xsl:call-template name="vmf:vmf20_inputtoresult">
							<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var2_resultof_vmf___inputtoresult">
						<use>
							<xsl:attribute name="value" namespace="" select="."/>
						</use>
					</xsl:for-each>
				</xsl:for-each>
				<xsl:for-each select="@poradi">
					<rank>
						<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
					</rank>
				</xsl:for-each>
			</ContactPoint>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:adresa">
		<xsl:param name="a" select="()"/>
		<xsl:variable name="var13_typ" as="node()?" select="$a/@typ"/>
		<Address xmlns="http://hl7.org/fhir">
			<use>
				<xsl:for-each select="$var13_typ">
					<xsl:variable name="var1_resultof_vmf___inputtoresult" as="xs:string?">
						<xsl:call-template name="vmf:vmf21_inputtoresult">
							<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var1_resultof_vmf___inputtoresult">
						<xsl:attribute name="value" namespace="" select="."/>
					</xsl:for-each>
				</xsl:for-each>
			</use>
			<xsl:for-each select="$a/@ind_kont">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<type>
					<xsl:for-each select="$var13_typ">
						<xsl:variable name="var2_resultof_vmf___inputtoresult" as="xs:boolean">
							<xsl:call-template name="vmf:vmf22_inputtoresult">
								<xsl:with-param name="input" select="fn:string($var4_cur)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:boolean">
							<xsl:call-template name="vmf:vmf23_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="($var2_resultof_vmf___inputtoresult and $var3_resultof_vmf___inputtoresult)">
									<xsl:sequence select="'postal'"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="'physical'"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</xsl:for-each>
				</type>
			</xsl:for-each>
			<line>
				<xsl:for-each select="$a/ns1:jmeno">
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</xsl:for-each>
			</line>
			<xsl:for-each select="$a/ns1:adr">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:dop1">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:dop2">
				<line>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</line>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:mesto">
				<city>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</city>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:psc">
				<postalCode>
					<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
				</postalCode>
			</xsl:for-each>
			<xsl:for-each select="$a/ns1:stat">
				<country>
					<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
				</country>
			</xsl:for-each>
			<period>
				<xsl:variable name="var7_resultof_filter" as="node()*">
					<xsl:for-each select="$a/ns1:dat_od">
						<xsl:variable name="var6_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<xsl:variable name="var5_test_resultof_equal" as="xs:string">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var6_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var6_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var6_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:if test="(($var5_test_resultof_equal != '') and ($var5_test_resultof_equal != '    -  -  '))">
							<xsl:sequence select="."/>
						</xsl:if>
					</xsl:for-each>
				</xsl:variable>
				<xsl:for-each select="$var7_resultof_filter">
					<xsl:variable name="var8_cur_as_string" as="xs:string" select="fn:string(.)"/>
					<start>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var8_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var8_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var8_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</start>
				</xsl:for-each>
				<xsl:variable name="var11_resultof_filter" as="node()*">
					<xsl:for-each select="$a/ns1:dat_do">
						<xsl:variable name="var10_cur_as_string" as="xs:string" select="fn:string(.)"/>
						<xsl:variable name="var9_test_resultof_equal" as="xs:string">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var10_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var10_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var10_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:variable>
						<xsl:if test="(($var9_test_resultof_equal != '') and ($var9_test_resultof_equal != '    -  -  '))">
							<xsl:sequence select="."/>
						</xsl:if>
					</xsl:for-each>
				</xsl:variable>
				<xsl:for-each select="$var11_resultof_filter">
					<xsl:variable name="var12_cur_as_string" as="xs:string" select="fn:string(.)"/>
					<end>
						<xsl:attribute name="value" namespace="">
							<xsl:choose>
								<xsl:when test="(fn:string-length($var12_cur_as_string) = xs:decimal('16'))">
									<xsl:sequence select="fn:concat($var12_cur_as_string, ':00')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:sequence select="$var12_cur_as_string"/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:attribute>
					</end>
				</xsl:for-each>
			</period>
		</Address>
	</xsl:template>
	<xsl:template name="provisio:pracovnik_a_pracovi_t_">
		<xsl:param name="pracovnikType" select="()"/>
		<xsl:param name="pracovisteType" select="()"/>
		<xsl:for-each select="$pracovnikType">
			<xsl:variable name="var9_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:prijmeni">
				<xsl:variable name="var6_vguid" as="node()?" select="$var9_cur/@vguid"/>
				<xsl:variable name="var7_a" as="node()*" select="$var9_cur/ns1:a"/>
				<xsl:variable name="var8_guid" as="node()?" select="$var9_cur/@guid"/>
				<entry xmlns="http://hl7.org/fhir">
					<fullUrl>
						<xsl:for-each select="$var8_guid">
							<xsl:for-each select="$var6_vguid">
								<xsl:for-each select="$var8_guid">
									<xsl:variable name="var2_cur" as="node()" select="."/>
									<xsl:for-each select="$var6_vguid">
										<xsl:variable name="var1_resultof_FullURL_Practitioner" as="xs:string?">
											<xsl:call-template name="provisio:FullURL_Practitioner">
												<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var1_resultof_FullURL_Practitioner">
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</fullUrl>
					<resource>
						<Practitioner>
							<xsl:for-each select="$var8_guid">
								<id>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</id>
							</xsl:for-each>
							<meta>
								<xsl:for-each select="$var6_vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<xsl:for-each select="$var9_cur/@id_zp">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var9_cur/@icl">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var9_cur/@id_pracovnik">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var9_cur/@id_clk">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<name>
								<family>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</family>
								<xsl:for-each select="$var9_cur/ns2:jmeno">
									<given>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</given>
								</xsl:for-each>
								<xsl:for-each select="$var9_cur/ns2:titul_pred">
									<prefix>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</prefix>
								</xsl:for-each>
								<xsl:for-each select="$var9_cur/ns2:titul_za">
									<suffix>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</suffix>
								</xsl:for-each>
							</name>
							<xsl:variable name="var3_map_of_a" as="node()*">
								<xsl:for-each select="$var7_a/ns1:as">
									<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
										<xsl:sequence select="(./@node(), ./node())"/>
									</as>
								</xsl:for-each>
							</xsl:variable>
							<xsl:variable name="var4_resultof_adresa_spojeni" as="node()?">
								<xsl:call-template name="provisio:adresa_spojeni">
									<xsl:with-param name="as" select="($var3_map_of_a)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var4_resultof_adresa_spojeni">
								<telecom>
									<xsl:sequence select="(./@node(), ./node())"/>
								</telecom>
							</xsl:for-each>
							<xsl:for-each select="$var7_a">
								<xsl:variable name="var5_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="(./@node(), ./node())"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var5_resultof_adresa">
									<address>
										<xsl:sequence select="(./@node(), ./node())"/>
									</address>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var9_cur/@odbornost">
								<qualification>
									<code>
										<coding>
											<system>
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/UZABB.htm'))"/>
											</system>
											<code>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</code>
										</coding>
									</code>
								</qualification>
							</xsl:for-each>
						</Practitioner>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$pracovnikType">
			<xsl:variable name="var20_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:prijmeni">
				<xsl:variable name="var18_guid" as="node()?" select="$var20_cur/@guid"/>
				<xsl:variable name="var19_vguid" as="node()?" select="$var20_cur/@vguid"/>
				<xsl:variable name="var17_map_of_pracovisteType" as="xs:string?">
					<xsl:for-each select="$pracovisteType/@guid">
						<xsl:sequence select="fn:string(.)"/>
					</xsl:for-each>
				</xsl:variable>
				<entry xmlns="http://hl7.org/fhir">
					<fullUrl>
						<xsl:for-each select="$var18_guid">
							<xsl:for-each select="$var19_vguid">
								<xsl:for-each select="$var18_guid">
									<xsl:variable name="var11_cur" as="node()" select="."/>
									<xsl:for-each select="$var19_vguid">
										<xsl:variable name="var10_resultof_FullURL_PractitionerRole" as="xs:string?">
											<xsl:call-template name="provisio:FullURL_PractitionerRole">
												<xsl:with-param name="GUID" select="fn:string($var11_cur)" as="xs:string"/>
												<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var10_resultof_FullURL_PractitionerRole">
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
						</xsl:for-each>
					</fullUrl>
					<resource>
						<PractitionerRole>
							<xsl:for-each select="$var19_vguid">
								<meta>
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</meta>
							</xsl:for-each>
							<practitioner>
								<reference>
									<xsl:for-each select="$var18_guid">
										<xsl:for-each select="$var19_vguid">
											<xsl:for-each select="$var18_guid">
												<xsl:variable name="var13_cur" as="node()" select="."/>
												<xsl:for-each select="$var19_vguid">
													<xsl:variable name="var12_resultof_Reference_Practitioner" as="xs:string?">
														<xsl:call-template name="provisio:Reference_Practitioner">
															<xsl:with-param name="GUID" select="fn:string($var13_cur)" as="xs:string"/>
															<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
														</xsl:call-template>
													</xsl:variable>
													<xsl:for-each select="$var12_resultof_Reference_Practitioner">
														<xsl:attribute name="value" namespace="" select="."/>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</reference>
							</practitioner>
							<xsl:for-each select="$var17_map_of_pracovisteType">
								<xsl:variable name="var16_map_of_pracovisteType" as="xs:string?">
									<xsl:for-each select="$pracovisteType/@vguid">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:variable>
								<xsl:for-each select="$var16_map_of_pracovisteType">
									<xsl:for-each select="$var17_map_of_pracovisteType">
										<xsl:variable name="var15_cur" as="xs:string" select="."/>
										<xsl:for-each select="$var16_map_of_pracovisteType">
											<xsl:variable name="var14_resultof_Reference_Organization" as="xs:string?">
												<xsl:call-template name="provisio:Reference_Organization">
													<xsl:with-param name="GUID" select="$var15_cur" as="xs:string"/>
													<xsl:with-param name="VGUID" select="." as="xs:string"/>
												</xsl:call-template>
											</xsl:variable>
											<xsl:for-each select="$var14_resultof_Reference_Organization">
												<organization>
													<reference>
														<xsl:attribute name="value" namespace="" select="."/>
													</reference>
												</organization>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var20_cur/@role_klic">
								<code>
									<coding>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<display>
											<xsl:for-each select="$var20_cur/@role_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</code>
							</xsl:for-each>
						</PractitionerRole>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$pracovisteType">
			<xsl:variable name="var25_cur" as="node()" select="."/>
			<xsl:for-each select="ns2:nazev">
				<xsl:variable name="var24_a" as="node()*" select="$var25_cur/ns1:a"/>
				<entry xmlns="http://hl7.org/fhir">
					<resource>
						<Organization>
							<id>
								<xsl:for-each select="$var25_cur/@guid">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</id>
							<meta>
								<xsl:for-each select="$var25_cur/@vguid">
									<versionId>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</versionId>
								</xsl:for-each>
							</meta>
							<text>
								<status>
									<xsl:attribute name="value" namespace="" select="'generated'"/>
								</status>
								<xhtml:div xmlns:xhtml="http://www.w3.org/1999/xhtml">
									<xsl:for-each select="$var25_cur/ns2:pozn">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xhtml:div>
							</text>
							<xsl:for-each select="$var25_cur/@kod_lok">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@ico">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@icz">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@icp">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@ns">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@oddel">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<xsl:for-each select="$var25_cur/@pcz">
								<identifier>
									<value>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</value>
								</identifier>
							</xsl:for-each>
							<type>
								<coding>
									<display>
										<xsl:for-each select="$var25_cur/@odb">
											<xsl:attribute name="value" namespace="" select="fn:concat('Odbornost: ', fn:string(.))"/>
										</xsl:for-each>
									</display>
								</coding>
							</type>
							<name>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</name>
							<xsl:variable name="var21_map_of_a" as="node()*">
								<xsl:for-each select="$var24_a/ns1:as">
									<as xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
										<xsl:sequence select="(./@node(), ./node())"/>
									</as>
								</xsl:for-each>
							</xsl:variable>
							<xsl:variable name="var22_resultof_adresa_spojeni" as="node()?">
								<xsl:call-template name="provisio:adresa_spojeni">
									<xsl:with-param name="as" select="($var21_map_of_a)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var22_resultof_adresa_spojeni">
								<telecom>
									<xsl:sequence select="(./@node(), ./node())"/>
								</telecom>
							</xsl:for-each>
							<xsl:for-each select="$var24_a">
								<xsl:variable name="var23_resultof_adresa" as="node()?">
									<xsl:call-template name="provisio:adresa">
										<xsl:with-param name="a" as="node()">
											<a xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
												<xsl:sequence select="(./@node(), ./node())"/>
											</a>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var23_resultof_adresa">
									<address>
										<xsl:sequence select="(./@node(), ./node())"/>
									</address>
								</xsl:for-each>
							</xsl:for-each>
						</Organization>
					</resource>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Flag">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Flag/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_urg_v">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_urg_vType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:variable name="var7_map_of_ku_z_propz_urg_vType" as="xs:string?">
			<xsl:for-each select="$ku_z_propz_urg_vType/@guid">
				<xsl:sequence select="fn:string(.)"/>
			</xsl:for-each>
		</xsl:variable>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var7_map_of_ku_z_propz_urg_vType">
				<xsl:variable name="var3_map_of_ku_z_propz_urg_vType" as="xs:string?">
					<xsl:for-each select="$ku_z_propz_urg_vType/@vguid">
						<xsl:sequence select="fn:string(.)"/>
					</xsl:for-each>
				</xsl:variable>
				<xsl:for-each select="$var3_map_of_ku_z_propz_urg_vType">
					<xsl:for-each select="$var7_map_of_ku_z_propz_urg_vType">
						<xsl:variable name="var2_cur" as="xs:string" select="."/>
						<xsl:for-each select="$var3_map_of_ku_z_propz_urg_vType">
							<xsl:variable name="var1_resultof_Reference_Flag" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Flag">
									<xsl:with-param name="GUID" select="$var2_cur" as="xs:string"/>
									<xsl:with-param name="VGUID" select="." as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Flag">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Flag>
					<xsl:for-each select="$ku_z_propz_urg_vType/@guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$ku_z_propz_urg_vType/@vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-flag-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'48765-2'"/>
							</code>
						</tag>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<code>
						<coding>
							<system>
								<xsl:for-each select="$ku_z_propz_urg_vType/ns2:var_stav/ns2:kod_syst">
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
								</xsl:for-each>
							</system>
							<code>
								<xsl:for-each select="$ku_z_propz_urg_vType/ns2:var_stav/ns2:kod">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$ku_z_propz_urg_vType/ns2:var_stav/ns2:kod_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</display>
						</coding>
						<text>
							<xsl:for-each select="$ku_z_propz_urg_vType/ns2:var_text">
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</xsl:for-each>
						</text>
					</code>
					<subject>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</subject>
					<xsl:for-each select="$ku_z_propz_urg_vType">
						<xsl:variable name="var4_cur" as="node()" select="."/>
						<xsl:for-each select="ns2:var_dat_od">
							<period>
								<start>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</start>
								<xsl:for-each select="$var4_cur/ns2:var_dat_do">
									<end>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</end>
								</xsl:for-each>
							</period>
						</xsl:for-each>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<author>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</author>
					</xsl:for-each>
				</Flag>
			</resource>
		</entry>
		<xsl:variable name="var5_map_of_ku_z_propz_urg_vType" as="node()*">
			<xsl:for-each select="$ku_z_propz_urg_vType/ns2:sp_pracovnik">
				<pracovnikType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</pracovnikType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var6_resultof_pracovnik_a_pracovi_t_" as="node()*">
			<xsl:call-template name="provisio:pracovnik_a_pracovi_t_">
				<xsl:with-param name="pracovnikType" select="($var5_map_of_ku_z_propz_urg_vType)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="pracovisteType" as="node()">
					<pracovisteType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
						<xsl:sequence select="()"/>
					</pracovisteType>
				</xsl:with-param>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var6_resultof_pracovnik_a_pracovi_t_">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_AllergyIntolerance">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('AllergyIntolerance/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_urg_alerg_int">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="uaType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:variable name="var14_dat_ab" as="node()?" select="$uaType/@dat_ab"/>
		<xsl:variable name="var15_uaf" as="node()*" select="$uaType/ns2:uaf"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var15_uaf">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<xsl:for-each select="@guid">
					<xsl:variable name="var3_cur" as="node()" select="."/>
					<xsl:variable name="var2_vguid" as="node()?" select="$var4_cur/@vguid"/>
					<xsl:for-each select="$var2_vguid">
						<xsl:for-each select="$var2_vguid">
							<xsl:variable name="var1_resultof_Reference_AllergyIntolerance" as="xs:string?">
								<xsl:call-template name="provisio:Reference_AllergyIntolerance">
									<xsl:with-param name="GUID" select="fn:string($var3_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_AllergyIntolerance">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<AllergyIntolerance>
					<xsl:for-each select="$var15_uaf/@guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var15_uaf/@vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-allergyIntolerance-hdr'))"/>
						</profile>
						<tag>
							<code>
								<xsl:attribute name="value" namespace="" select="'48765-2'"/>
							</code>
						</tag>
					</meta>
					<clinicalStatus>
						<xsl:for-each select="$uaType/ns2:stav">
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical'))"/>
								</system>
								<xsl:variable name="var5_resultof_vmf___inputtoresult" as="xs:string?">
									<xsl:call-template name="vmf:vmf24_inputtoresult">
										<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
									</xsl:call-template>
								</xsl:variable>
								<code>
									<xsl:for-each select="$var5_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</code>
							</coding>
						</xsl:for-each>
					</clinicalStatus>
					<verificationStatus>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/allergyintolerance-verification'))"/>
							</system>
							<code>
								<xsl:for-each select="$uaType/@typ">
									<xsl:variable name="var6_resultof_vmf___inputtoresult" as="xs:string?">
										<xsl:call-template name="vmf:vmf25_inputtoresult">
											<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var6_resultof_vmf___inputtoresult">
										<xsl:attribute name="value" namespace="" select="."/>
									</xsl:for-each>
								</xsl:for-each>
							</code>
						</coding>
					</verificationStatus>
					<xsl:for-each select="$var15_uaf/@typ_reakce">
						<xsl:variable name="var7_resultof_vmf___inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf26_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<type>
							<xsl:for-each select="$var7_resultof_vmf___inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</type>
					</xsl:for-each>
					<xsl:for-each select="$var15_uaf/@typ_agens">
						<xsl:variable name="var8_resultof_vmf___inputtoresult" as="xs:string?">
							<xsl:call-template name="vmf:vmf27_inputtoresult">
								<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
							</xsl:call-template>
						</xsl:variable>
						<category>
							<xsl:for-each select="$var8_resultof_vmf___inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</category>
					</xsl:for-each>
					<criticality>
						<xsl:for-each select="$var15_uaf/@szp_klic">
							<xsl:variable name="var9_resultof_vmf___inputtoresult" as="xs:string?">
								<xsl:call-template name="vmf:vmf28_inputtoresult">
									<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var9_resultof_vmf___inputtoresult">
								<xsl:attribute name="value" namespace="" select="."/>
							</xsl:for-each>
						</xsl:for-each>
					</criticality>
					<code>
						<xsl:for-each select="$var15_uaf">
							<xsl:variable name="var10_cur" as="node()" select="."/>
							<xsl:for-each select="ns2:alerg_lek_klic">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var10_cur/ns2:alerg_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="$var15_uaf">
							<xsl:variable name="var11_cur" as="node()" select="."/>
							<xsl:for-each select="ns2:alerg_nelek_klic">
								<coding>
									<system>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
									</system>
									<code>
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</code>
									<xsl:for-each select="$var11_cur/ns2:alerg_text">
										<display>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</display>
									</xsl:for-each>
								</coding>
							</xsl:for-each>
						</xsl:for-each>
						<xsl:for-each select="$uaType/ns2:u_al">
							<text>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</text>
						</xsl:for-each>
					</code>
					<patient>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</patient>
					<xsl:for-each select="$uaType/ns2:dat_du">
						<onsetPeriod>
							<start>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</start>
							<xsl:for-each select="$uaType/ns2:dat_up">
								<end>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</end>
							</xsl:for-each>
						</onsetPeriod>
					</xsl:for-each>
					<xsl:variable name="var12_test_resultof_exists" as="xs:string*">
						<xsl:choose>
							<xsl:when test="fn:exists($var14_dat_ab)">
								<xsl:sequence select="xs:string(xs:dateTime(fn:string($var14_dat_ab)))"/>
							</xsl:when>
							<xsl:otherwise>
								<xsl:for-each select="$dat_prov">
									<xsl:sequence select="fn:string(.)"/>
								</xsl:for-each>
							</xsl:otherwise>
						</xsl:choose>
					</xsl:variable>
					<xsl:for-each select="$var12_test_resultof_exists">
						<recordedDate>
							<xsl:attribute name="value" namespace="" select="."/>
						</recordedDate>
					</xsl:for-each>
					<xsl:for-each select="$practitionerReference">
						<recorder>
							<reference>
								<xsl:attribute name="value" namespace="" select="."/>
							</reference>
						</recorder>
					</xsl:for-each>
					<xsl:for-each select="$var15_uaf">
						<xsl:variable name="var13_cur" as="node()" select="."/>
						<xsl:for-each select="@ar_klic">
							<reaction>
								<manifestation>
									<coding>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://snomed.info/sct'))"/>
										</system>
										<code>
											<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
										</code>
										<display>
											<xsl:for-each select="$var13_cur/@ar_text">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</display>
									</coding>
								</manifestation>
							</reaction>
						</xsl:for-each>
					</xsl:for-each>
				</AllergyIntolerance>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_urg">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="ku_z_propz_urg" select="()"/>
		<xsl:variable name="var4_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:for-each select="$ku_z_propz_urg/ns2:alerg_int">
			<xsl:variable name="var1_resultof_ku_z_propz_urg_alerg_int" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_urg_alerg_int">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var4_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="uaType" as="node()">
						<uaType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</uaType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" as="node()*">
						<xsl:for-each select="$dat_prov">
							<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
								<xsl:sequence select="(./@node(), ./node())"/>
							</dat_prov>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var1_resultof_ku_z_propz_urg_alerg_int">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:variable name="var2_map_of_ku_z_propz_urg" as="node()*">
			<xsl:for-each select="$ku_z_propz_urg/ns2:ku_z_propz_urg_v">
				<ku_z_propz_urg_vType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ku_z_propz_urg_vType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var3_resultof_ku_z_propz_urg_v" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_urg_v">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var4_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="ku_z_propz_urg_vType" select="($var2_map_of_ku_z_propz_urg)[(fn:position() &lt;= xs:integer('1'))]" as="node()?"/>
				<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var3_resultof_ku_z_propz_urg_v">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz_dvp">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propz_dvpType" select="()"/>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Consent>
					<xsl:for-each select="$ku_z_propz_dvpType/@guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<xsl:for-each select="$ku_z_propz_dvpType/ns2:dvp_koment">
						<text>
							<status>
								<xsl:attribute name="value" namespace="" select="'generated'"/>
							</status>
							<xhtml:div xmlns:xhtml="http://www.w3.org/1999/xhtml">
								<xsl:sequence select="fn:string(.)"/>
							</xhtml:div>
						</text>
					</xsl:for-each>
					<status>
						<xsl:attribute name="value" namespace="" select="'active'"/>
					</status>
					<scope>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://terminology.hl7.org/CodeSystem/consentscope'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'adr'"/>
							</code>
							<display>
								<xsl:attribute name="value" namespace="" select="'Advanced Care Directive'"/>
							</display>
						</coding>
					</scope>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dasta.mzcr.cz/WWBVY.htm'))"/>
							</system>
							<code>
								<xsl:for-each select="$ku_z_propz_dvpType/ns2:dvp_typ">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
						</coding>
					</category>
					<patient>
						<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
					</patient>
					<dateTime>
						<xsl:for-each select="$ku_z_propz_dvpType/ns2:dat_dvp">
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</xsl:for-each>
					</dateTime>
					<provision>
						<xsl:for-each select="$ku_z_propz_dvpType/ns2:dvp_dotstav">
							<provision>
								<code>
									<coding>
										<system>
											<xsl:for-each select="ns2:kod_syst">
												<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
											</xsl:for-each>
										</system>
										<code>
											<xsl:for-each select="ns2:kod">
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</xsl:for-each>
										</code>
										<xsl:for-each select="ns2:kod_text">
											<display>
												<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
											</display>
										</xsl:for-each>
									</coding>
								</code>
							</provision>
						</xsl:for-each>
					</provision>
				</Consent>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:ku_z_propz">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_z_propzType" select="()"/>
		<xsl:param name="dat_prov" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:variable name="var1347_ku_z_propz_sprij" as="node()*" select="$ku_z_propzType/ns2:ku_z_propz_sprij"/>
		<xsl:variable name="var1348_ku_z_propz_dvp" as="node()*" select="$ku_z_propzType/ns2:ku_z_propz_dvp"/>
		<xsl:variable name="var1349_ku_z_propz_admu" as="node()*" select="$ku_z_propzType/ns2:ku_z_propz_admu"/>
		<xsl:variable name="var1345_concat_of_organizatinReference" as="xs:string*">
			<xsl:for-each select="$organizatinReference">
				<xsl:sequence select="fn:concat('Organization/', .)"/>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1346_concat_of_practitionerReference" as="xs:string*">
			<xsl:for-each select="$practitionerReference">
				<xsl:sequence select="fn:concat('Practitioner/', .)"/>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1344_let" as="node()*" select="($patientReference/@node(), $patientReference/node())"/>
		<xsl:variable name="var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*">
			<xsl:for-each select="$ku_z_propzType/ns2:ku_z_propz_anam">
				<ku_z_propz_anamType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ku_z_propz_anamType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*">
			<xsl:for-each select="$ku_z_propzType/ns2:ku_z_propz_urg">
				<ku_z_propz_urgType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ku_z_propz_urgType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*">
			<xsl:for-each select="$ku_z_propzType/ns2:ku_z_propz_prubh">
				<ku_z_propz_prubhType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</ku_z_propz_prubhType>
			</xsl:for-each>
		</xsl:variable>
		<xsl:variable name="var1340_create_dat_prov_of_dat_prov" as="node()*">
			<xsl:for-each select="$dat_prov">
				<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
					<xsl:sequence select="(./@node(), ./node())"/>
				</dat_prov>
			</xsl:for-each>
		</xsl:variable>
		<entry xmlns="http://hl7.org/fhir">
			<resource>
				<Composition>
					<meta>
						<profile>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://hl7.cz/fhir/hdr/StructureDefinition/cz-composition-hdr'))"/>
						</profile>
					</meta>
					<status>
						<xsl:attribute name="value" namespace="" select="'final'"/>
					</status>
					<type>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://loinc.org'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'34105-7'"/>
							</code>
							<display>
								<xsl:attribute name="value" namespace="" select="'Hospital Discharge summary'"/>
							</display>
						</coding>
					</type>
					<category>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('http://hl7.org/fhir/ValueSet/document-classcodes'))"/>
							</system>
							<code>
								<xsl:attribute name="value" namespace="" select="'18842-5'"/>
							</code>
							<display>
								<xsl:attribute name="value" namespace="" select="'Discharge summary'"/>
							</display>
						</coding>
					</category>
					<date>
						<xsl:for-each select="$dat_prov">
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</xsl:for-each>
					</date>
					<author>
						<reference>
							<xsl:for-each select="$practitionerReference">
								<xsl:attribute name="value" namespace="" select="fn:concat('Practitioner/', .)"/>
							</xsl:for-each>
						</reference>
					</author>
					<title>
						<xsl:attribute name="value" namespace="" select="'Propouštěcí zpráva'"/>
					</title>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionAdmissionEvaluation'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'67852-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital Admission evaluation note'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var43_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var37_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var37_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var38_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var38_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var39_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var39_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var40_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var40_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var41_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var41_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var42_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var42_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var43_let">
							<xsl:variable name="var36_current" as="node()" select="."/>
							<xsl:variable name="var35_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var34_resource" as="node()*" select="$var36_current/ns0:resource"/>
									<xsl:variable name="var2_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var34_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var33_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var2_test_resultof_any">
											<xsl:variable name="var32_cur" as="xs:string" select="."/>
											<xsl:variable name="var4_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var3_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var34_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var3_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var4_test_resultof_any">
												<xsl:variable name="var31_cur" as="xs:string" select="."/>
												<xsl:variable name="var6_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var5_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var34_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var5_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var6_test_resultof_any">
													<xsl:variable name="var30_cur" as="xs:string" select="."/>
													<xsl:variable name="var8_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var7_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var34_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var7_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var8_test_resultof_any">
														<xsl:variable name="var29_cur" as="xs:string" select="."/>
														<xsl:variable name="var10_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var9_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var34_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var9_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var10_test_resultof_any">
															<xsl:variable name="var28_cur" as="xs:string" select="."/>
															<xsl:variable name="var12_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var11_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var34_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var11_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var12_test_resultof_any">
																<xsl:variable name="var27_cur" as="xs:string" select="."/>
																<xsl:variable name="var14_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var13_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var34_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var13_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var14_test_resultof_any">
																	<xsl:variable name="var26_cur" as="xs:string" select="."/>
																	<xsl:variable name="var16_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var15_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var34_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var15_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var16_test_resultof_any">
																		<xsl:variable name="var25_cur" as="xs:string" select="."/>
																		<xsl:variable name="var18_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var17_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var34_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var17_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var18_test_resultof_any">
																			<xsl:variable name="var24_cur" as="xs:string" select="."/>
																			<xsl:variable name="var20_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var19_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var34_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var19_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var20_test_resultof_any">
																				<xsl:variable name="var23_cur" as="xs:string" select="."/>
																				<xsl:variable name="var22_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var34_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var21_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var34_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var21_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var22_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('67852-4' = $var32_cur), ('67852-4' = $var31_cur), ('67852-4' = $var30_cur), ('67852-4' = $var29_cur), ('67852-4' = $var28_cur), ('67852-4' = $var27_cur), ('67852-4' = $var26_cur), ('67852-4' = $var25_cur), ('67852-4' = $var24_cur), ('67852-4' = $var23_cur), ('67852-4' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var33_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var35_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPatientHx'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'11329-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History general Narrative - Reported'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var86_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var80_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var80_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var81_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var81_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var82_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var82_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var83_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var83_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var84_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var84_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var85_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var85_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var86_let">
							<xsl:variable name="var79_current" as="node()" select="."/>
							<xsl:variable name="var78_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var77_resource" as="node()*" select="$var79_current/ns0:resource"/>
									<xsl:variable name="var45_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var44_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var77_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var44_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var76_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var45_test_resultof_any">
											<xsl:variable name="var75_cur" as="xs:string" select="."/>
											<xsl:variable name="var47_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var46_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var77_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var46_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var47_test_resultof_any">
												<xsl:variable name="var74_cur" as="xs:string" select="."/>
												<xsl:variable name="var49_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var48_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var77_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var48_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var49_test_resultof_any">
													<xsl:variable name="var73_cur" as="xs:string" select="."/>
													<xsl:variable name="var51_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var50_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var77_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var50_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var51_test_resultof_any">
														<xsl:variable name="var72_cur" as="xs:string" select="."/>
														<xsl:variable name="var53_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var52_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var77_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var52_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var53_test_resultof_any">
															<xsl:variable name="var71_cur" as="xs:string" select="."/>
															<xsl:variable name="var55_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var54_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var77_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var54_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var55_test_resultof_any">
																<xsl:variable name="var70_cur" as="xs:string" select="."/>
																<xsl:variable name="var57_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var56_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var77_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var56_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var57_test_resultof_any">
																	<xsl:variable name="var69_cur" as="xs:string" select="."/>
																	<xsl:variable name="var59_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var58_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var77_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var58_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var59_test_resultof_any">
																		<xsl:variable name="var68_cur" as="xs:string" select="."/>
																		<xsl:variable name="var61_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var60_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var77_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var60_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var61_test_resultof_any">
																			<xsl:variable name="var67_cur" as="xs:string" select="."/>
																			<xsl:variable name="var63_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var62_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var77_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var62_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var63_test_resultof_any">
																				<xsl:variable name="var66_cur" as="xs:string" select="."/>
																				<xsl:variable name="var65_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var77_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var64_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var77_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var64_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var65_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('11329-0' = $var75_cur), ('11329-0' = $var74_cur), ('11329-0' = $var73_cur), ('11329-0' = $var72_cur), ('11329-0' = $var71_cur), ('11329-0' = $var70_cur), ('11329-0' = $var69_cur), ('11329-0' = $var68_cur), ('11329-0' = $var67_cur), ('11329-0' = $var66_cur), ('11329-0' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var76_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var78_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPhysicalFindings'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'29545-1'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Physical findings Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var129_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var123_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var123_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var124_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var124_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var125_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var125_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var126_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var126_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var127_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var127_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var128_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var128_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var129_let">
							<xsl:variable name="var122_current" as="node()" select="."/>
							<xsl:variable name="var121_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var120_resource" as="node()*" select="$var122_current/ns0:resource"/>
									<xsl:variable name="var88_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var87_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var120_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var87_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var119_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var88_test_resultof_any">
											<xsl:variable name="var118_cur" as="xs:string" select="."/>
											<xsl:variable name="var90_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var89_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var120_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var89_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var90_test_resultof_any">
												<xsl:variable name="var117_cur" as="xs:string" select="."/>
												<xsl:variable name="var92_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var91_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var120_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var91_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var92_test_resultof_any">
													<xsl:variable name="var116_cur" as="xs:string" select="."/>
													<xsl:variable name="var94_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var93_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var120_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var93_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var94_test_resultof_any">
														<xsl:variable name="var115_cur" as="xs:string" select="."/>
														<xsl:variable name="var96_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var95_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var120_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var95_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var96_test_resultof_any">
															<xsl:variable name="var114_cur" as="xs:string" select="."/>
															<xsl:variable name="var98_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var97_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var120_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var97_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var98_test_resultof_any">
																<xsl:variable name="var113_cur" as="xs:string" select="."/>
																<xsl:variable name="var100_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var99_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var120_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var99_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var100_test_resultof_any">
																	<xsl:variable name="var112_cur" as="xs:string" select="."/>
																	<xsl:variable name="var102_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var101_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var120_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var101_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var102_test_resultof_any">
																		<xsl:variable name="var111_cur" as="xs:string" select="."/>
																		<xsl:variable name="var104_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var103_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var120_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var103_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var104_test_resultof_any">
																			<xsl:variable name="var110_cur" as="xs:string" select="."/>
																			<xsl:variable name="var106_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var105_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var120_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var105_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var106_test_resultof_any">
																				<xsl:variable name="var109_cur" as="xs:string" select="."/>
																				<xsl:variable name="var108_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var120_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var107_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var120_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var107_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var108_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('29545-1' = $var118_cur), ('29545-1' = $var117_cur), ('29545-1' = $var116_cur), ('29545-1' = $var115_cur), ('29545-1' = $var114_cur), ('29545-1' = $var113_cur), ('29545-1' = $var112_cur), ('29545-1' = $var111_cur), ('29545-1' = $var110_cur), ('29545-1' = $var109_cur), ('29545-1' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var119_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var121_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPhysicalExamination'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'55286-9'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Physical exam by body areas'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var172_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var166_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var166_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var167_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var167_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var168_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var168_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var169_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var169_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var170_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var170_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var171_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var171_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var172_let">
							<xsl:variable name="var165_current" as="node()" select="."/>
							<xsl:variable name="var164_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var163_resource" as="node()*" select="$var165_current/ns0:resource"/>
									<xsl:variable name="var131_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var130_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var163_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var130_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var162_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var131_test_resultof_any">
											<xsl:variable name="var161_cur" as="xs:string" select="."/>
											<xsl:variable name="var133_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var132_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var163_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var132_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var133_test_resultof_any">
												<xsl:variable name="var160_cur" as="xs:string" select="."/>
												<xsl:variable name="var135_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var134_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var163_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var134_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var135_test_resultof_any">
													<xsl:variable name="var159_cur" as="xs:string" select="."/>
													<xsl:variable name="var137_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var136_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var163_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var136_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var137_test_resultof_any">
														<xsl:variable name="var158_cur" as="xs:string" select="."/>
														<xsl:variable name="var139_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var138_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var163_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var138_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var139_test_resultof_any">
															<xsl:variable name="var157_cur" as="xs:string" select="."/>
															<xsl:variable name="var141_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var140_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var163_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var140_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var141_test_resultof_any">
																<xsl:variable name="var156_cur" as="xs:string" select="."/>
																<xsl:variable name="var143_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var142_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var163_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var142_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var143_test_resultof_any">
																	<xsl:variable name="var155_cur" as="xs:string" select="."/>
																	<xsl:variable name="var145_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var144_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var163_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var144_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var145_test_resultof_any">
																		<xsl:variable name="var154_cur" as="xs:string" select="."/>
																		<xsl:variable name="var147_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var146_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var163_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var146_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var147_test_resultof_any">
																			<xsl:variable name="var153_cur" as="xs:string" select="."/>
																			<xsl:variable name="var149_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var148_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var163_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var148_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var149_test_resultof_any">
																				<xsl:variable name="var152_cur" as="xs:string" select="."/>
																				<xsl:variable name="var151_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var163_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var150_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var163_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var150_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var151_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('55286-9' = $var161_cur), ('55286-9' = $var160_cur), ('55286-9' = $var159_cur), ('55286-9' = $var158_cur), ('55286-9' = $var157_cur), ('55286-9' = $var156_cur), ('55286-9' = $var155_cur), ('55286-9' = $var154_cur), ('55286-9' = $var153_cur), ('55286-9' = $var152_cur), ('55286-9' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var162_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var164_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionVitalSigns'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'8716-3'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Vital signs'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var215_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var209_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var209_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var210_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var210_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var211_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var211_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var212_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var212_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var213_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var213_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var214_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var214_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var215_let">
							<xsl:variable name="var208_current" as="node()" select="."/>
							<xsl:variable name="var207_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var206_resource" as="node()*" select="$var208_current/ns0:resource"/>
									<xsl:variable name="var174_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var173_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var206_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var173_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var205_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var174_test_resultof_any">
											<xsl:variable name="var204_cur" as="xs:string" select="."/>
											<xsl:variable name="var176_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var175_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var206_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var175_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var176_test_resultof_any">
												<xsl:variable name="var203_cur" as="xs:string" select="."/>
												<xsl:variable name="var178_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var177_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var206_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var177_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var178_test_resultof_any">
													<xsl:variable name="var202_cur" as="xs:string" select="."/>
													<xsl:variable name="var180_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var179_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var206_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var179_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var180_test_resultof_any">
														<xsl:variable name="var201_cur" as="xs:string" select="."/>
														<xsl:variable name="var182_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var181_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var206_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var181_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var182_test_resultof_any">
															<xsl:variable name="var200_cur" as="xs:string" select="."/>
															<xsl:variable name="var184_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var183_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var206_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var183_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var184_test_resultof_any">
																<xsl:variable name="var199_cur" as="xs:string" select="."/>
																<xsl:variable name="var186_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var185_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var206_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var185_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var186_test_resultof_any">
																	<xsl:variable name="var198_cur" as="xs:string" select="."/>
																	<xsl:variable name="var188_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var187_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var206_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var187_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var188_test_resultof_any">
																		<xsl:variable name="var197_cur" as="xs:string" select="."/>
																		<xsl:variable name="var190_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var189_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var206_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var189_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var190_test_resultof_any">
																			<xsl:variable name="var196_cur" as="xs:string" select="."/>
																			<xsl:variable name="var192_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var191_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var206_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var191_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var192_test_resultof_any">
																				<xsl:variable name="var195_cur" as="xs:string" select="."/>
																				<xsl:variable name="var194_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var206_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var193_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var206_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var193_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var194_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('8716-3' = $var204_cur), ('8716-3' = $var203_cur), ('8716-3' = $var202_cur), ('8716-3' = $var201_cur), ('8716-3' = $var200_cur), ('8716-3' = $var199_cur), ('8716-3' = $var198_cur), ('8716-3' = $var197_cur), ('8716-3' = $var196_cur), ('8716-3' = $var195_cur), ('8716-3' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var205_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var207_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionFunctionalStatus'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'47420-5'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Functional status assessment note'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var258_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var252_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var252_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var253_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var253_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var254_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var254_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var255_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var255_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var256_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var256_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var257_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var257_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var258_let">
							<xsl:variable name="var251_current" as="node()" select="."/>
							<xsl:variable name="var250_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var249_resource" as="node()*" select="$var251_current/ns0:resource"/>
									<xsl:variable name="var217_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var216_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var249_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var216_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var248_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var217_test_resultof_any">
											<xsl:variable name="var247_cur" as="xs:string" select="."/>
											<xsl:variable name="var219_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var218_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var249_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var218_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var219_test_resultof_any">
												<xsl:variable name="var246_cur" as="xs:string" select="."/>
												<xsl:variable name="var221_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var220_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var249_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var220_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var221_test_resultof_any">
													<xsl:variable name="var245_cur" as="xs:string" select="."/>
													<xsl:variable name="var223_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var222_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var249_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var222_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var223_test_resultof_any">
														<xsl:variable name="var244_cur" as="xs:string" select="."/>
														<xsl:variable name="var225_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var224_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var249_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var224_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var225_test_resultof_any">
															<xsl:variable name="var243_cur" as="xs:string" select="."/>
															<xsl:variable name="var227_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var226_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var249_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var226_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var227_test_resultof_any">
																<xsl:variable name="var242_cur" as="xs:string" select="."/>
																<xsl:variable name="var229_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var228_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var249_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var228_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var229_test_resultof_any">
																	<xsl:variable name="var241_cur" as="xs:string" select="."/>
																	<xsl:variable name="var231_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var230_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var249_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var230_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var231_test_resultof_any">
																		<xsl:variable name="var240_cur" as="xs:string" select="."/>
																		<xsl:variable name="var233_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var232_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var249_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var232_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var233_test_resultof_any">
																			<xsl:variable name="var239_cur" as="xs:string" select="."/>
																			<xsl:variable name="var235_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var234_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var249_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var234_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var235_test_resultof_any">
																				<xsl:variable name="var238_cur" as="xs:string" select="."/>
																				<xsl:variable name="var237_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var249_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var236_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var249_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var236_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var237_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('47420-5' = $var247_cur), ('47420-5' = $var246_cur), ('47420-5' = $var245_cur), ('47420-5' = $var244_cur), ('47420-5' = $var243_cur), ('47420-5' = $var242_cur), ('47420-5' = $var241_cur), ('47420-5' = $var240_cur), ('47420-5' = $var239_cur), ('47420-5' = $var238_cur), ('47420-5' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var248_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var250_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionAllergies'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'48765-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Allergies and adverse reactions Document'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var301_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var295_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var295_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var296_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var296_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var297_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var297_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var298_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var298_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var299_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var299_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var300_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var300_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var301_let">
							<xsl:variable name="var294_current" as="node()" select="."/>
							<xsl:variable name="var293_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var292_resource" as="node()*" select="$var294_current/ns0:resource"/>
									<xsl:variable name="var260_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var259_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var292_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var259_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var291_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var260_test_resultof_any">
											<xsl:variable name="var290_cur" as="xs:string" select="."/>
											<xsl:variable name="var262_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var261_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var292_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var261_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var262_test_resultof_any">
												<xsl:variable name="var289_cur" as="xs:string" select="."/>
												<xsl:variable name="var264_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var263_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var292_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var263_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var264_test_resultof_any">
													<xsl:variable name="var288_cur" as="xs:string" select="."/>
													<xsl:variable name="var266_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var265_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var292_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var265_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var266_test_resultof_any">
														<xsl:variable name="var287_cur" as="xs:string" select="."/>
														<xsl:variable name="var268_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var267_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var292_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var267_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var268_test_resultof_any">
															<xsl:variable name="var286_cur" as="xs:string" select="."/>
															<xsl:variable name="var270_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var269_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var292_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var269_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var270_test_resultof_any">
																<xsl:variable name="var285_cur" as="xs:string" select="."/>
																<xsl:variable name="var272_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var271_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var292_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var271_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var272_test_resultof_any">
																	<xsl:variable name="var284_cur" as="xs:string" select="."/>
																	<xsl:variable name="var274_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var273_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var292_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var273_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var274_test_resultof_any">
																		<xsl:variable name="var283_cur" as="xs:string" select="."/>
																		<xsl:variable name="var276_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var275_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var292_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var275_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var276_test_resultof_any">
																			<xsl:variable name="var282_cur" as="xs:string" select="."/>
																			<xsl:variable name="var278_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var277_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var292_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var277_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var278_test_resultof_any">
																				<xsl:variable name="var281_cur" as="xs:string" select="."/>
																				<xsl:variable name="var280_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var292_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var279_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var292_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var279_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var280_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('48765-2' = $var290_cur), ('48765-2' = $var289_cur), ('48765-2' = $var288_cur), ('48765-2' = $var287_cur), ('48765-2' = $var286_cur), ('48765-2' = $var285_cur), ('48765-2' = $var284_cur), ('48765-2' = $var283_cur), ('48765-2' = $var282_cur), ('48765-2' = $var281_cur), ('48765-2' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var291_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var293_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionAlert'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'75310-3'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Health concerns Document'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var344_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var338_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var338_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var339_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var339_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var340_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var340_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var341_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var341_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var342_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var342_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var343_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var343_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var344_let">
							<xsl:variable name="var337_current" as="node()" select="."/>
							<xsl:variable name="var336_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var335_resource" as="node()*" select="$var337_current/ns0:resource"/>
									<xsl:variable name="var303_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var302_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var335_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var302_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var334_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var303_test_resultof_any">
											<xsl:variable name="var333_cur" as="xs:string" select="."/>
											<xsl:variable name="var305_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var304_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var335_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var304_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var305_test_resultof_any">
												<xsl:variable name="var332_cur" as="xs:string" select="."/>
												<xsl:variable name="var307_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var306_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var335_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var306_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var307_test_resultof_any">
													<xsl:variable name="var331_cur" as="xs:string" select="."/>
													<xsl:variable name="var309_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var308_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var335_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var308_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var309_test_resultof_any">
														<xsl:variable name="var330_cur" as="xs:string" select="."/>
														<xsl:variable name="var311_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var310_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var335_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var310_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var311_test_resultof_any">
															<xsl:variable name="var329_cur" as="xs:string" select="."/>
															<xsl:variable name="var313_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var312_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var335_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var312_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var313_test_resultof_any">
																<xsl:variable name="var328_cur" as="xs:string" select="."/>
																<xsl:variable name="var315_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var314_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var335_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var314_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var315_test_resultof_any">
																	<xsl:variable name="var327_cur" as="xs:string" select="."/>
																	<xsl:variable name="var317_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var316_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var335_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var316_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var317_test_resultof_any">
																		<xsl:variable name="var326_cur" as="xs:string" select="."/>
																		<xsl:variable name="var319_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var318_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var335_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var318_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var319_test_resultof_any">
																			<xsl:variable name="var325_cur" as="xs:string" select="."/>
																			<xsl:variable name="var321_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var320_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var335_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var320_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var321_test_resultof_any">
																				<xsl:variable name="var324_cur" as="xs:string" select="."/>
																				<xsl:variable name="var323_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var335_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var322_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var335_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var322_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var323_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('75310-3' = $var333_cur), ('75310-3' = $var332_cur), ('75310-3' = $var331_cur), ('75310-3' = $var330_cur), ('75310-3' = $var329_cur), ('75310-3' = $var328_cur), ('75310-3' = $var327_cur), ('75310-3' = $var326_cur), ('75310-3' = $var325_cur), ('75310-3' = $var324_cur), ('75310-3' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var334_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var336_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionHospitalCourse'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'8648-8'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital course'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var387_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var381_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var381_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var382_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var382_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var383_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var383_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var384_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var384_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var385_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var385_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var386_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var386_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var387_let">
							<xsl:variable name="var380_current" as="node()" select="."/>
							<xsl:variable name="var379_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var378_resource" as="node()*" select="$var380_current/ns0:resource"/>
									<xsl:variable name="var346_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var345_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var378_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var345_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var377_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var346_test_resultof_any">
											<xsl:variable name="var376_cur" as="xs:string" select="."/>
											<xsl:variable name="var348_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var347_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var378_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var347_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var348_test_resultof_any">
												<xsl:variable name="var375_cur" as="xs:string" select="."/>
												<xsl:variable name="var350_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var349_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var378_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var349_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var350_test_resultof_any">
													<xsl:variable name="var374_cur" as="xs:string" select="."/>
													<xsl:variable name="var352_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var351_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var378_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var351_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var352_test_resultof_any">
														<xsl:variable name="var373_cur" as="xs:string" select="."/>
														<xsl:variable name="var354_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var353_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var378_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var353_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var354_test_resultof_any">
															<xsl:variable name="var372_cur" as="xs:string" select="."/>
															<xsl:variable name="var356_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var355_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var378_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var355_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var356_test_resultof_any">
																<xsl:variable name="var371_cur" as="xs:string" select="."/>
																<xsl:variable name="var358_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var357_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var378_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var357_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var358_test_resultof_any">
																	<xsl:variable name="var370_cur" as="xs:string" select="."/>
																	<xsl:variable name="var360_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var359_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var378_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var359_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var360_test_resultof_any">
																		<xsl:variable name="var369_cur" as="xs:string" select="."/>
																		<xsl:variable name="var362_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var361_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var378_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var361_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var362_test_resultof_any">
																			<xsl:variable name="var368_cur" as="xs:string" select="."/>
																			<xsl:variable name="var364_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var363_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var378_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var363_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var364_test_resultof_any">
																				<xsl:variable name="var367_cur" as="xs:string" select="."/>
																				<xsl:variable name="var366_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var378_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var365_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var378_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var365_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var366_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('8648-8' = $var376_cur), ('8648-8' = $var375_cur), ('8648-8' = $var374_cur), ('8648-8' = $var373_cur), ('8648-8' = $var372_cur), ('8648-8' = $var371_cur), ('8648-8' = $var370_cur), ('8648-8' = $var369_cur), ('8648-8' = $var368_cur), ('8648-8' = $var367_cur), ('8648-8' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var377_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var379_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionDiagnosticSummary'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'11450-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Problem list - Reported'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var430_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var424_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var424_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var425_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var425_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var426_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var426_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var427_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var427_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var428_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var428_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var429_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var429_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var430_let">
							<xsl:variable name="var423_current" as="node()" select="."/>
							<xsl:variable name="var422_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var421_resource" as="node()*" select="$var423_current/ns0:resource"/>
									<xsl:variable name="var389_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var388_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var421_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var388_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var420_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var389_test_resultof_any">
											<xsl:variable name="var419_cur" as="xs:string" select="."/>
											<xsl:variable name="var391_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var390_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var421_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var390_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var391_test_resultof_any">
												<xsl:variable name="var418_cur" as="xs:string" select="."/>
												<xsl:variable name="var393_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var392_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var421_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var392_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var393_test_resultof_any">
													<xsl:variable name="var417_cur" as="xs:string" select="."/>
													<xsl:variable name="var395_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var394_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var421_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var394_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var395_test_resultof_any">
														<xsl:variable name="var416_cur" as="xs:string" select="."/>
														<xsl:variable name="var397_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var396_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var421_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var396_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var397_test_resultof_any">
															<xsl:variable name="var415_cur" as="xs:string" select="."/>
															<xsl:variable name="var399_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var398_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var421_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var398_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var399_test_resultof_any">
																<xsl:variable name="var414_cur" as="xs:string" select="."/>
																<xsl:variable name="var401_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var400_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var421_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var400_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var401_test_resultof_any">
																	<xsl:variable name="var413_cur" as="xs:string" select="."/>
																	<xsl:variable name="var403_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var402_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var421_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var402_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var403_test_resultof_any">
																		<xsl:variable name="var412_cur" as="xs:string" select="."/>
																		<xsl:variable name="var405_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var404_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var421_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var404_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var405_test_resultof_any">
																			<xsl:variable name="var411_cur" as="xs:string" select="."/>
																			<xsl:variable name="var407_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var406_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var421_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var406_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var407_test_resultof_any">
																				<xsl:variable name="var410_cur" as="xs:string" select="."/>
																				<xsl:variable name="var409_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var421_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var408_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var421_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var408_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var409_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('11450-4' = $var419_cur), ('11450-4' = $var418_cur), ('11450-4' = $var417_cur), ('11450-4' = $var416_cur), ('11450-4' = $var415_cur), ('11450-4' = $var414_cur), ('11450-4' = $var413_cur), ('11450-4' = $var412_cur), ('11450-4' = $var411_cur), ('11450-4' = $var410_cur), ('11450-4' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var420_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var422_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionSignificantProcedures'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'10185-7'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital discharge procedures Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var473_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var467_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var467_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var468_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var468_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var469_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var469_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var470_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var470_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var471_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var471_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var472_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var472_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var473_let">
							<xsl:variable name="var466_current" as="node()" select="."/>
							<xsl:variable name="var465_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var464_resource" as="node()*" select="$var466_current/ns0:resource"/>
									<xsl:variable name="var432_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var431_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var464_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var431_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var463_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var432_test_resultof_any">
											<xsl:variable name="var462_cur" as="xs:string" select="."/>
											<xsl:variable name="var434_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var433_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var464_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var433_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var434_test_resultof_any">
												<xsl:variable name="var461_cur" as="xs:string" select="."/>
												<xsl:variable name="var436_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var435_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var464_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var435_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var436_test_resultof_any">
													<xsl:variable name="var460_cur" as="xs:string" select="."/>
													<xsl:variable name="var438_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var437_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var464_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var437_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var438_test_resultof_any">
														<xsl:variable name="var459_cur" as="xs:string" select="."/>
														<xsl:variable name="var440_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var439_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var464_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var439_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var440_test_resultof_any">
															<xsl:variable name="var458_cur" as="xs:string" select="."/>
															<xsl:variable name="var442_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var441_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var464_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var441_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var442_test_resultof_any">
																<xsl:variable name="var457_cur" as="xs:string" select="."/>
																<xsl:variable name="var444_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var443_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var464_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var443_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var444_test_resultof_any">
																	<xsl:variable name="var456_cur" as="xs:string" select="."/>
																	<xsl:variable name="var446_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var445_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var464_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var445_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var446_test_resultof_any">
																		<xsl:variable name="var455_cur" as="xs:string" select="."/>
																		<xsl:variable name="var448_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var447_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var464_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var447_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var448_test_resultof_any">
																			<xsl:variable name="var454_cur" as="xs:string" select="."/>
																			<xsl:variable name="var450_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var449_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var464_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var449_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var450_test_resultof_any">
																				<xsl:variable name="var453_cur" as="xs:string" select="."/>
																				<xsl:variable name="var452_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var464_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var451_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var464_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var451_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var452_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('10185-7' = $var462_cur), ('10185-7' = $var461_cur), ('10185-7' = $var460_cur), ('10185-7' = $var459_cur), ('10185-7' = $var458_cur), ('10185-7' = $var457_cur), ('10185-7' = $var456_cur), ('10185-7' = $var455_cur), ('10185-7' = $var454_cur), ('10185-7' = $var453_cur), ('10185-7' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var463_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var465_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionMedicalDevices'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'46264-8'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of medical device use'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var516_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var510_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var510_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var511_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var511_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var512_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var512_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var513_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var513_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var514_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var514_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var515_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var515_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var516_let">
							<xsl:variable name="var509_current" as="node()" select="."/>
							<xsl:variable name="var508_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var507_resource" as="node()*" select="$var509_current/ns0:resource"/>
									<xsl:variable name="var475_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var474_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var507_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var474_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var506_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var475_test_resultof_any">
											<xsl:variable name="var505_cur" as="xs:string" select="."/>
											<xsl:variable name="var477_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var476_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var507_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var476_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var477_test_resultof_any">
												<xsl:variable name="var504_cur" as="xs:string" select="."/>
												<xsl:variable name="var479_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var478_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var507_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var478_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var479_test_resultof_any">
													<xsl:variable name="var503_cur" as="xs:string" select="."/>
													<xsl:variable name="var481_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var480_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var507_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var480_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var481_test_resultof_any">
														<xsl:variable name="var502_cur" as="xs:string" select="."/>
														<xsl:variable name="var483_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var482_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var507_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var482_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var483_test_resultof_any">
															<xsl:variable name="var501_cur" as="xs:string" select="."/>
															<xsl:variable name="var485_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var484_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var507_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var484_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var485_test_resultof_any">
																<xsl:variable name="var500_cur" as="xs:string" select="."/>
																<xsl:variable name="var487_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var486_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var507_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var486_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var487_test_resultof_any">
																	<xsl:variable name="var499_cur" as="xs:string" select="."/>
																	<xsl:variable name="var489_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var488_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var507_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var488_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var489_test_resultof_any">
																		<xsl:variable name="var498_cur" as="xs:string" select="."/>
																		<xsl:variable name="var491_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var490_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var507_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var490_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var491_test_resultof_any">
																			<xsl:variable name="var497_cur" as="xs:string" select="."/>
																			<xsl:variable name="var493_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var492_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var507_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var492_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var493_test_resultof_any">
																				<xsl:variable name="var496_cur" as="xs:string" select="."/>
																				<xsl:variable name="var495_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var507_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var494_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var507_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var494_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var495_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('46264-8' = $var505_cur), ('46264-8' = $var504_cur), ('46264-8' = $var503_cur), ('46264-8' = $var502_cur), ('46264-8' = $var501_cur), ('46264-8' = $var500_cur), ('46264-8' = $var499_cur), ('46264-8' = $var498_cur), ('46264-8' = $var497_cur), ('46264-8' = $var496_cur), ('46264-8' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var506_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var508_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionMedications'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'10160-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Medication use Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var559_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var553_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var553_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var554_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var554_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var555_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var555_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var556_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var556_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var557_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var557_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var558_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var558_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var559_let">
							<xsl:variable name="var552_current" as="node()" select="."/>
							<xsl:variable name="var551_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var550_resource" as="node()*" select="$var552_current/ns0:resource"/>
									<xsl:variable name="var518_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var517_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var550_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var517_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var549_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var518_test_resultof_any">
											<xsl:variable name="var548_cur" as="xs:string" select="."/>
											<xsl:variable name="var520_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var519_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var550_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var519_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var520_test_resultof_any">
												<xsl:variable name="var547_cur" as="xs:string" select="."/>
												<xsl:variable name="var522_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var521_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var550_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var521_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var522_test_resultof_any">
													<xsl:variable name="var546_cur" as="xs:string" select="."/>
													<xsl:variable name="var524_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var523_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var550_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var523_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var524_test_resultof_any">
														<xsl:variable name="var545_cur" as="xs:string" select="."/>
														<xsl:variable name="var526_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var525_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var550_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var525_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var526_test_resultof_any">
															<xsl:variable name="var544_cur" as="xs:string" select="."/>
															<xsl:variable name="var528_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var527_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var550_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var527_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var528_test_resultof_any">
																<xsl:variable name="var543_cur" as="xs:string" select="."/>
																<xsl:variable name="var530_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var529_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var550_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var529_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var530_test_resultof_any">
																	<xsl:variable name="var542_cur" as="xs:string" select="."/>
																	<xsl:variable name="var532_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var531_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var550_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var531_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var532_test_resultof_any">
																		<xsl:variable name="var541_cur" as="xs:string" select="."/>
																		<xsl:variable name="var534_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var533_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var550_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var533_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var534_test_resultof_any">
																			<xsl:variable name="var540_cur" as="xs:string" select="."/>
																			<xsl:variable name="var536_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var535_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var550_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var535_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var536_test_resultof_any">
																				<xsl:variable name="var539_cur" as="xs:string" select="."/>
																				<xsl:variable name="var538_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var550_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var537_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var550_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var537_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var538_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('10160-0' = $var548_cur), ('10160-0' = $var547_cur), ('10160-0' = $var546_cur), ('10160-0' = $var545_cur), ('10160-0' = $var544_cur), ('10160-0' = $var543_cur), ('10160-0' = $var542_cur), ('10160-0' = $var541_cur), ('10160-0' = $var540_cur), ('10160-0' = $var539_cur), ('10160-0' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var549_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var551_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionSignificantResults'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'30954-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Relevant diagnostic tests or laboratory data Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var602_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var596_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var596_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var597_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var597_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var598_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var598_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var599_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var599_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var600_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var600_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var601_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var601_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var602_let">
							<xsl:variable name="var595_current" as="node()" select="."/>
							<xsl:variable name="var594_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var593_resource" as="node()*" select="$var595_current/ns0:resource"/>
									<xsl:variable name="var561_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var560_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var593_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var560_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var592_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var561_test_resultof_any">
											<xsl:variable name="var591_cur" as="xs:string" select="."/>
											<xsl:variable name="var563_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var562_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var593_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var562_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var563_test_resultof_any">
												<xsl:variable name="var590_cur" as="xs:string" select="."/>
												<xsl:variable name="var565_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var564_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var593_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var564_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var565_test_resultof_any">
													<xsl:variable name="var589_cur" as="xs:string" select="."/>
													<xsl:variable name="var567_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var566_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var593_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var566_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var567_test_resultof_any">
														<xsl:variable name="var588_cur" as="xs:string" select="."/>
														<xsl:variable name="var569_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var568_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var593_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var568_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var569_test_resultof_any">
															<xsl:variable name="var587_cur" as="xs:string" select="."/>
															<xsl:variable name="var571_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var570_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var593_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var570_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var571_test_resultof_any">
																<xsl:variable name="var586_cur" as="xs:string" select="."/>
																<xsl:variable name="var573_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var572_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var593_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var572_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var573_test_resultof_any">
																	<xsl:variable name="var585_cur" as="xs:string" select="."/>
																	<xsl:variable name="var575_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var574_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var593_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var574_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var575_test_resultof_any">
																		<xsl:variable name="var584_cur" as="xs:string" select="."/>
																		<xsl:variable name="var577_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var576_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var593_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var576_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var577_test_resultof_any">
																			<xsl:variable name="var583_cur" as="xs:string" select="."/>
																			<xsl:variable name="var579_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var578_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var593_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var578_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var579_test_resultof_any">
																				<xsl:variable name="var582_cur" as="xs:string" select="."/>
																				<xsl:variable name="var581_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var593_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var580_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var593_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var580_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var581_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('30954-2' = $var591_cur), ('30954-2' = $var590_cur), ('30954-2' = $var589_cur), ('30954-2' = $var588_cur), ('30954-2' = $var587_cur), ('30954-2' = $var586_cur), ('30954-2' = $var585_cur), ('30954-2' = $var584_cur), ('30954-2' = $var583_cur), ('30954-2' = $var582_cur), ('30954-2' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var592_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var594_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionSynthesis'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'51848-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Evaluation note'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var645_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var639_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var639_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var640_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var640_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var641_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var641_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var642_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var642_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var643_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var643_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var644_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var644_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var645_let">
							<xsl:variable name="var638_current" as="node()" select="."/>
							<xsl:variable name="var637_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var636_resource" as="node()*" select="$var638_current/ns0:resource"/>
									<xsl:variable name="var604_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var603_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var636_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var603_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var635_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var604_test_resultof_any">
											<xsl:variable name="var634_cur" as="xs:string" select="."/>
											<xsl:variable name="var606_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var605_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var636_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var605_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var606_test_resultof_any">
												<xsl:variable name="var633_cur" as="xs:string" select="."/>
												<xsl:variable name="var608_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var607_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var636_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var607_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var608_test_resultof_any">
													<xsl:variable name="var632_cur" as="xs:string" select="."/>
													<xsl:variable name="var610_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var609_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var636_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var609_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var610_test_resultof_any">
														<xsl:variable name="var631_cur" as="xs:string" select="."/>
														<xsl:variable name="var612_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var611_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var636_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var611_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var612_test_resultof_any">
															<xsl:variable name="var630_cur" as="xs:string" select="."/>
															<xsl:variable name="var614_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var613_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var636_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var613_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var614_test_resultof_any">
																<xsl:variable name="var629_cur" as="xs:string" select="."/>
																<xsl:variable name="var616_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var615_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var636_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var615_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var616_test_resultof_any">
																	<xsl:variable name="var628_cur" as="xs:string" select="."/>
																	<xsl:variable name="var618_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var617_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var636_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var617_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var618_test_resultof_any">
																		<xsl:variable name="var627_cur" as="xs:string" select="."/>
																		<xsl:variable name="var620_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var619_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var636_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var619_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var620_test_resultof_any">
																			<xsl:variable name="var626_cur" as="xs:string" select="."/>
																			<xsl:variable name="var622_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var621_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var636_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var621_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var622_test_resultof_any">
																				<xsl:variable name="var625_cur" as="xs:string" select="."/>
																				<xsl:variable name="var624_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var636_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var623_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var636_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var623_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var624_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('51848-0' = $var634_cur), ('51848-0' = $var633_cur), ('51848-0' = $var632_cur), ('51848-0' = $var631_cur), ('51848-0' = $var630_cur), ('51848-0' = $var629_cur), ('51848-0' = $var628_cur), ('51848-0' = $var627_cur), ('51848-0' = $var626_cur), ('51848-0' = $var625_cur), ('51848-0' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var635_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var637_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionDischargeDetails'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'8650-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital discharge disposition Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var688_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var682_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var682_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var683_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var683_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var684_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var684_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var685_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var685_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var686_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var686_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var687_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var687_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var688_let">
							<xsl:variable name="var681_current" as="node()" select="."/>
							<xsl:variable name="var680_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var679_resource" as="node()*" select="$var681_current/ns0:resource"/>
									<xsl:variable name="var647_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var646_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var679_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var646_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var678_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var647_test_resultof_any">
											<xsl:variable name="var677_cur" as="xs:string" select="."/>
											<xsl:variable name="var649_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var648_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var679_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var648_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var649_test_resultof_any">
												<xsl:variable name="var676_cur" as="xs:string" select="."/>
												<xsl:variable name="var651_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var650_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var679_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var650_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var651_test_resultof_any">
													<xsl:variable name="var675_cur" as="xs:string" select="."/>
													<xsl:variable name="var653_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var652_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var679_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var652_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var653_test_resultof_any">
														<xsl:variable name="var674_cur" as="xs:string" select="."/>
														<xsl:variable name="var655_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var654_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var679_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var654_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var655_test_resultof_any">
															<xsl:variable name="var673_cur" as="xs:string" select="."/>
															<xsl:variable name="var657_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var656_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var679_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var656_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var657_test_resultof_any">
																<xsl:variable name="var672_cur" as="xs:string" select="."/>
																<xsl:variable name="var659_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var658_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var679_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var658_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var659_test_resultof_any">
																	<xsl:variable name="var671_cur" as="xs:string" select="."/>
																	<xsl:variable name="var661_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var660_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var679_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var660_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var661_test_resultof_any">
																		<xsl:variable name="var670_cur" as="xs:string" select="."/>
																		<xsl:variable name="var663_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var662_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var679_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var662_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var663_test_resultof_any">
																			<xsl:variable name="var669_cur" as="xs:string" select="."/>
																			<xsl:variable name="var665_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var664_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var679_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var664_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var665_test_resultof_any">
																				<xsl:variable name="var668_cur" as="xs:string" select="."/>
																				<xsl:variable name="var667_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var679_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var666_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var679_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var666_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var667_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('8650-4' = $var677_cur), ('8650-4' = $var676_cur), ('8650-4' = $var675_cur), ('8650-4' = $var674_cur), ('8650-4' = $var673_cur), ('8650-4' = $var672_cur), ('8650-4' = $var671_cur), ('8650-4' = $var670_cur), ('8650-4' = $var669_cur), ('8650-4' = $var668_cur), ('8650-4' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var678_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var680_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionDischargeFindings'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'10184-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital discharge physical findings Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var731_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var725_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var725_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var726_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var726_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var727_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var727_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var728_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var728_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var729_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var729_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var730_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var730_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var731_let">
							<xsl:variable name="var724_current" as="node()" select="."/>
							<xsl:variable name="var723_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var722_resource" as="node()*" select="$var724_current/ns0:resource"/>
									<xsl:variable name="var690_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var689_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var722_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var689_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var721_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var690_test_resultof_any">
											<xsl:variable name="var720_cur" as="xs:string" select="."/>
											<xsl:variable name="var692_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var691_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var722_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var691_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var692_test_resultof_any">
												<xsl:variable name="var719_cur" as="xs:string" select="."/>
												<xsl:variable name="var694_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var693_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var722_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var693_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var694_test_resultof_any">
													<xsl:variable name="var718_cur" as="xs:string" select="."/>
													<xsl:variable name="var696_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var695_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var722_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var695_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var696_test_resultof_any">
														<xsl:variable name="var717_cur" as="xs:string" select="."/>
														<xsl:variable name="var698_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var697_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var722_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var697_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var698_test_resultof_any">
															<xsl:variable name="var716_cur" as="xs:string" select="."/>
															<xsl:variable name="var700_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var699_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var722_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var699_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var700_test_resultof_any">
																<xsl:variable name="var715_cur" as="xs:string" select="."/>
																<xsl:variable name="var702_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var701_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var722_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var701_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var702_test_resultof_any">
																	<xsl:variable name="var714_cur" as="xs:string" select="."/>
																	<xsl:variable name="var704_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var703_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var722_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var703_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var704_test_resultof_any">
																		<xsl:variable name="var713_cur" as="xs:string" select="."/>
																		<xsl:variable name="var706_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var705_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var722_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var705_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var706_test_resultof_any">
																			<xsl:variable name="var712_cur" as="xs:string" select="."/>
																			<xsl:variable name="var708_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var707_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var722_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var707_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var708_test_resultof_any">
																				<xsl:variable name="var711_cur" as="xs:string" select="."/>
																				<xsl:variable name="var710_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var722_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var709_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var722_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var709_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var710_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('10184-0' = $var720_cur), ('10184-0' = $var719_cur), ('10184-0' = $var718_cur), ('10184-0' = $var717_cur), ('10184-0' = $var716_cur), ('10184-0' = $var715_cur), ('10184-0' = $var714_cur), ('10184-0' = $var713_cur), ('10184-0' = $var712_cur), ('10184-0' = $var711_cur), ('10184-0' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var721_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var723_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionProceduresHx'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'47519-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Procedures Document'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var774_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var768_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var768_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var769_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var769_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var770_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var770_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var771_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var771_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var772_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var772_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var773_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var773_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var774_let">
							<xsl:variable name="var767_current" as="node()" select="."/>
							<xsl:variable name="var766_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var765_resource" as="node()*" select="$var767_current/ns0:resource"/>
									<xsl:variable name="var733_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var732_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var765_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var732_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var764_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var733_test_resultof_any">
											<xsl:variable name="var763_cur" as="xs:string" select="."/>
											<xsl:variable name="var735_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var734_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var765_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var734_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var735_test_resultof_any">
												<xsl:variable name="var762_cur" as="xs:string" select="."/>
												<xsl:variable name="var737_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var736_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var765_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var736_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var737_test_resultof_any">
													<xsl:variable name="var761_cur" as="xs:string" select="."/>
													<xsl:variable name="var739_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var738_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var765_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var738_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var739_test_resultof_any">
														<xsl:variable name="var760_cur" as="xs:string" select="."/>
														<xsl:variable name="var741_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var740_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var765_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var740_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var741_test_resultof_any">
															<xsl:variable name="var759_cur" as="xs:string" select="."/>
															<xsl:variable name="var743_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var742_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var765_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var742_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var743_test_resultof_any">
																<xsl:variable name="var758_cur" as="xs:string" select="."/>
																<xsl:variable name="var745_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var744_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var765_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var744_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var745_test_resultof_any">
																	<xsl:variable name="var757_cur" as="xs:string" select="."/>
																	<xsl:variable name="var747_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var746_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var765_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var746_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var747_test_resultof_any">
																		<xsl:variable name="var756_cur" as="xs:string" select="."/>
																		<xsl:variable name="var749_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var748_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var765_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var748_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var749_test_resultof_any">
																			<xsl:variable name="var755_cur" as="xs:string" select="."/>
																			<xsl:variable name="var751_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var750_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var765_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var750_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var751_test_resultof_any">
																				<xsl:variable name="var754_cur" as="xs:string" select="."/>
																				<xsl:variable name="var753_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var765_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var752_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var765_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var752_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var753_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('47519-4' = $var763_cur), ('47519-4' = $var762_cur), ('47519-4' = $var761_cur), ('47519-4' = $var760_cur), ('47519-4' = $var759_cur), ('47519-4' = $var758_cur), ('47519-4' = $var757_cur), ('47519-4' = $var756_cur), ('47519-4' = $var755_cur), ('47519-4' = $var754_cur), ('47519-4' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var764_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var766_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionImmunizations'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'11369-6'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Immunization Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var817_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var811_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var811_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var812_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var812_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var813_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var813_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var814_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var814_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var815_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var815_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var816_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var816_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var817_let">
							<xsl:variable name="var810_current" as="node()" select="."/>
							<xsl:variable name="var809_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var808_resource" as="node()*" select="$var810_current/ns0:resource"/>
									<xsl:variable name="var776_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var775_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var808_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var775_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var807_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var776_test_resultof_any">
											<xsl:variable name="var806_cur" as="xs:string" select="."/>
											<xsl:variable name="var778_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var777_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var808_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var777_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var778_test_resultof_any">
												<xsl:variable name="var805_cur" as="xs:string" select="."/>
												<xsl:variable name="var780_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var779_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var808_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var779_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var780_test_resultof_any">
													<xsl:variable name="var804_cur" as="xs:string" select="."/>
													<xsl:variable name="var782_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var781_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var808_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var781_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var782_test_resultof_any">
														<xsl:variable name="var803_cur" as="xs:string" select="."/>
														<xsl:variable name="var784_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var783_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var808_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var783_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var784_test_resultof_any">
															<xsl:variable name="var802_cur" as="xs:string" select="."/>
															<xsl:variable name="var786_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var785_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var808_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var785_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var786_test_resultof_any">
																<xsl:variable name="var801_cur" as="xs:string" select="."/>
																<xsl:variable name="var788_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var787_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var808_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var787_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var788_test_resultof_any">
																	<xsl:variable name="var800_cur" as="xs:string" select="."/>
																	<xsl:variable name="var790_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var789_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var808_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var789_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var790_test_resultof_any">
																		<xsl:variable name="var799_cur" as="xs:string" select="."/>
																		<xsl:variable name="var792_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var791_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var808_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var791_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var792_test_resultof_any">
																			<xsl:variable name="var798_cur" as="xs:string" select="."/>
																			<xsl:variable name="var794_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var793_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var808_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var793_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var794_test_resultof_any">
																				<xsl:variable name="var797_cur" as="xs:string" select="."/>
																				<xsl:variable name="var796_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var808_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var795_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var808_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var795_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var796_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('11369-6' = $var806_cur), ('11369-6' = $var805_cur), ('11369-6' = $var804_cur), ('11369-6' = $var803_cur), ('11369-6' = $var802_cur), ('11369-6' = $var801_cur), ('11369-6' = $var800_cur), ('11369-6' = $var799_cur), ('11369-6' = $var798_cur), ('11369-6' = $var797_cur), ('11369-6' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var807_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var809_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionFamilyHistory'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'10157-6'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of family member diseases Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var860_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var854_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var854_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var855_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var855_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var856_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var856_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var857_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var857_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var858_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var858_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var859_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var859_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var860_let">
							<xsl:variable name="var853_current" as="node()" select="."/>
							<xsl:variable name="var852_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var851_resource" as="node()*" select="$var853_current/ns0:resource"/>
									<xsl:variable name="var819_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var818_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var851_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var818_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var850_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var819_test_resultof_any">
											<xsl:variable name="var849_cur" as="xs:string" select="."/>
											<xsl:variable name="var821_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var820_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var851_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var820_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var821_test_resultof_any">
												<xsl:variable name="var848_cur" as="xs:string" select="."/>
												<xsl:variable name="var823_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var822_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var851_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var822_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var823_test_resultof_any">
													<xsl:variable name="var847_cur" as="xs:string" select="."/>
													<xsl:variable name="var825_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var824_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var851_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var824_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var825_test_resultof_any">
														<xsl:variable name="var846_cur" as="xs:string" select="."/>
														<xsl:variable name="var827_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var826_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var851_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var826_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var827_test_resultof_any">
															<xsl:variable name="var845_cur" as="xs:string" select="."/>
															<xsl:variable name="var829_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var828_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var851_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var828_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var829_test_resultof_any">
																<xsl:variable name="var844_cur" as="xs:string" select="."/>
																<xsl:variable name="var831_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var830_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var851_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var830_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var831_test_resultof_any">
																	<xsl:variable name="var843_cur" as="xs:string" select="."/>
																	<xsl:variable name="var833_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var832_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var851_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var832_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var833_test_resultof_any">
																		<xsl:variable name="var842_cur" as="xs:string" select="."/>
																		<xsl:variable name="var835_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var834_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var851_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var834_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var835_test_resultof_any">
																			<xsl:variable name="var841_cur" as="xs:string" select="."/>
																			<xsl:variable name="var837_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var836_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var851_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var836_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var837_test_resultof_any">
																				<xsl:variable name="var840_cur" as="xs:string" select="."/>
																				<xsl:variable name="var839_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var851_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var838_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var851_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var838_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var839_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('10157-6' = $var849_cur), ('10157-6' = $var848_cur), ('10157-6' = $var847_cur), ('10157-6' = $var846_cur), ('10157-6' = $var845_cur), ('10157-6' = $var844_cur), ('10157-6' = $var843_cur), ('10157-6' = $var842_cur), ('10157-6' = $var841_cur), ('10157-6' = $var840_cur), ('10157-6' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var850_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var852_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPastIllnessHx'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'11348-0'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Past illness Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var903_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var897_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var897_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var898_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var898_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var899_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var899_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var900_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var900_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var901_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var901_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var902_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var902_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var903_let">
							<xsl:variable name="var896_current" as="node()" select="."/>
							<xsl:variable name="var895_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var894_resource" as="node()*" select="$var896_current/ns0:resource"/>
									<xsl:variable name="var862_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var861_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var894_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var861_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var893_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var862_test_resultof_any">
											<xsl:variable name="var892_cur" as="xs:string" select="."/>
											<xsl:variable name="var864_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var863_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var894_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var863_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var864_test_resultof_any">
												<xsl:variable name="var891_cur" as="xs:string" select="."/>
												<xsl:variable name="var866_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var865_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var894_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var865_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var866_test_resultof_any">
													<xsl:variable name="var890_cur" as="xs:string" select="."/>
													<xsl:variable name="var868_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var867_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var894_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var867_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var868_test_resultof_any">
														<xsl:variable name="var889_cur" as="xs:string" select="."/>
														<xsl:variable name="var870_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var869_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var894_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var869_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var870_test_resultof_any">
															<xsl:variable name="var888_cur" as="xs:string" select="."/>
															<xsl:variable name="var872_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var871_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var894_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var871_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var872_test_resultof_any">
																<xsl:variable name="var887_cur" as="xs:string" select="."/>
																<xsl:variable name="var874_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var873_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var894_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var873_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var874_test_resultof_any">
																	<xsl:variable name="var886_cur" as="xs:string" select="."/>
																	<xsl:variable name="var876_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var875_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var894_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var875_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var876_test_resultof_any">
																		<xsl:variable name="var885_cur" as="xs:string" select="."/>
																		<xsl:variable name="var878_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var877_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var894_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var877_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var878_test_resultof_any">
																			<xsl:variable name="var884_cur" as="xs:string" select="."/>
																			<xsl:variable name="var880_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var879_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var894_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var879_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var880_test_resultof_any">
																				<xsl:variable name="var883_cur" as="xs:string" select="."/>
																				<xsl:variable name="var882_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var894_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var881_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var894_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var881_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var882_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('11348-0' = $var892_cur), ('11348-0' = $var891_cur), ('11348-0' = $var890_cur), ('11348-0' = $var889_cur), ('11348-0' = $var888_cur), ('11348-0' = $var887_cur), ('11348-0' = $var886_cur), ('11348-0' = $var885_cur), ('11348-0' = $var884_cur), ('11348-0' = $var883_cur), ('11348-0' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var893_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var895_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionCareTeam'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'85847-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Patient Care team information'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var946_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var940_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var940_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var941_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var941_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var942_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var942_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var943_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var943_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var944_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var944_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var945_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var945_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var946_let">
							<xsl:variable name="var939_current" as="node()" select="."/>
							<xsl:variable name="var938_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var937_resource" as="node()*" select="$var939_current/ns0:resource"/>
									<xsl:variable name="var905_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var904_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var937_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var904_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var936_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var905_test_resultof_any">
											<xsl:variable name="var935_cur" as="xs:string" select="."/>
											<xsl:variable name="var907_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var906_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var937_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var906_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var907_test_resultof_any">
												<xsl:variable name="var934_cur" as="xs:string" select="."/>
												<xsl:variable name="var909_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var908_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var937_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var908_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var909_test_resultof_any">
													<xsl:variable name="var933_cur" as="xs:string" select="."/>
													<xsl:variable name="var911_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var910_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var937_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var910_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var911_test_resultof_any">
														<xsl:variable name="var932_cur" as="xs:string" select="."/>
														<xsl:variable name="var913_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var912_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var937_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var912_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var913_test_resultof_any">
															<xsl:variable name="var931_cur" as="xs:string" select="."/>
															<xsl:variable name="var915_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var914_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var937_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var914_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var915_test_resultof_any">
																<xsl:variable name="var930_cur" as="xs:string" select="."/>
																<xsl:variable name="var917_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var916_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var937_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var916_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var917_test_resultof_any">
																	<xsl:variable name="var929_cur" as="xs:string" select="."/>
																	<xsl:variable name="var919_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var918_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var937_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var918_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var919_test_resultof_any">
																		<xsl:variable name="var928_cur" as="xs:string" select="."/>
																		<xsl:variable name="var921_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var920_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var937_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var920_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var921_test_resultof_any">
																			<xsl:variable name="var927_cur" as="xs:string" select="."/>
																			<xsl:variable name="var923_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var922_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var937_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var922_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var923_test_resultof_any">
																				<xsl:variable name="var926_cur" as="xs:string" select="."/>
																				<xsl:variable name="var925_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var937_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var924_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var937_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var924_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var925_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('85847-2' = $var935_cur), ('85847-2' = $var934_cur), ('85847-2' = $var933_cur), ('85847-2' = $var932_cur), ('85847-2' = $var931_cur), ('85847-2' = $var930_cur), ('85847-2' = $var929_cur), ('85847-2' = $var928_cur), ('85847-2' = $var927_cur), ('85847-2' = $var926_cur), ('85847-2' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var936_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var938_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionSocialHistory'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'29762-2'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Social history Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var989_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var983_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var983_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var984_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var984_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var985_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var985_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var986_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var986_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var987_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var987_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var988_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var988_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var989_let">
							<xsl:variable name="var982_current" as="node()" select="."/>
							<xsl:variable name="var981_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var980_resource" as="node()*" select="$var982_current/ns0:resource"/>
									<xsl:variable name="var948_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var947_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var980_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var947_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var979_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var948_test_resultof_any">
											<xsl:variable name="var978_cur" as="xs:string" select="."/>
											<xsl:variable name="var950_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var949_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var980_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var949_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var950_test_resultof_any">
												<xsl:variable name="var977_cur" as="xs:string" select="."/>
												<xsl:variable name="var952_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var951_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var980_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var951_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var952_test_resultof_any">
													<xsl:variable name="var976_cur" as="xs:string" select="."/>
													<xsl:variable name="var954_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var953_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var980_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var953_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var954_test_resultof_any">
														<xsl:variable name="var975_cur" as="xs:string" select="."/>
														<xsl:variable name="var956_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var955_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var980_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var955_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var956_test_resultof_any">
															<xsl:variable name="var974_cur" as="xs:string" select="."/>
															<xsl:variable name="var958_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var957_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var980_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var957_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var958_test_resultof_any">
																<xsl:variable name="var973_cur" as="xs:string" select="."/>
																<xsl:variable name="var960_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var959_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var980_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var959_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var960_test_resultof_any">
																	<xsl:variable name="var972_cur" as="xs:string" select="."/>
																	<xsl:variable name="var962_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var961_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var980_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var961_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var962_test_resultof_any">
																		<xsl:variable name="var971_cur" as="xs:string" select="."/>
																		<xsl:variable name="var964_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var963_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var980_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var963_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var964_test_resultof_any">
																			<xsl:variable name="var970_cur" as="xs:string" select="."/>
																			<xsl:variable name="var966_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var965_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var980_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var965_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var966_test_resultof_any">
																				<xsl:variable name="var969_cur" as="xs:string" select="."/>
																				<xsl:variable name="var968_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var980_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var967_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var980_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var967_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var968_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('29762-2' = $var978_cur), ('29762-2' = $var977_cur), ('29762-2' = $var976_cur), ('29762-2' = $var975_cur), ('29762-2' = $var974_cur), ('29762-2' = $var973_cur), ('29762-2' = $var972_cur), ('29762-2' = $var971_cur), ('29762-2' = $var970_cur), ('29762-2' = $var969_cur), ('29762-2' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var979_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var981_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPlanOfCare'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'18776-5'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Plan of care note'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1032_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1026_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1026_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1027_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1027_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1028_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1028_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1029_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1029_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1030_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1030_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1031_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1031_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1032_let">
							<xsl:variable name="var1025_current" as="node()" select="."/>
							<xsl:variable name="var1024_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1023_resource" as="node()*" select="$var1025_current/ns0:resource"/>
									<xsl:variable name="var991_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var990_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1023_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var990_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1022_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var991_test_resultof_any">
											<xsl:variable name="var1021_cur" as="xs:string" select="."/>
											<xsl:variable name="var993_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var992_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1023_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var992_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var993_test_resultof_any">
												<xsl:variable name="var1020_cur" as="xs:string" select="."/>
												<xsl:variable name="var995_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var994_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1023_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var994_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var995_test_resultof_any">
													<xsl:variable name="var1019_cur" as="xs:string" select="."/>
													<xsl:variable name="var997_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var996_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1023_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var996_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var997_test_resultof_any">
														<xsl:variable name="var1018_cur" as="xs:string" select="."/>
														<xsl:variable name="var999_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var998_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1023_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var998_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var999_test_resultof_any">
															<xsl:variable name="var1017_cur" as="xs:string" select="."/>
															<xsl:variable name="var1001_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1000_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1023_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1000_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1001_test_resultof_any">
																<xsl:variable name="var1016_cur" as="xs:string" select="."/>
																<xsl:variable name="var1003_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1002_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1023_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1002_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1003_test_resultof_any">
																	<xsl:variable name="var1015_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1005_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1004_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1023_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1004_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1005_test_resultof_any">
																		<xsl:variable name="var1014_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1007_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1006_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1023_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1006_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1007_test_resultof_any">
																			<xsl:variable name="var1013_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1009_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1008_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1023_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1008_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1009_test_resultof_any">
																				<xsl:variable name="var1012_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1011_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1023_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1010_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1023_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1010_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1011_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('18776-5' = $var1021_cur), ('18776-5' = $var1020_cur), ('18776-5' = $var1019_cur), ('18776-5' = $var1018_cur), ('18776-5' = $var1017_cur), ('18776-5' = $var1016_cur), ('18776-5' = $var1015_cur), ('18776-5' = $var1014_cur), ('18776-5' = $var1013_cur), ('18776-5' = $var1012_cur), ('18776-5' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1022_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1024_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionDischargeMedications'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'75311-1'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Discharge medications Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1075_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1069_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1069_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1070_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1070_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1071_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1071_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1072_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1072_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1073_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1073_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1074_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1074_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1075_let">
							<xsl:variable name="var1068_current" as="node()" select="."/>
							<xsl:variable name="var1067_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1066_resource" as="node()*" select="$var1068_current/ns0:resource"/>
									<xsl:variable name="var1034_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1033_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1066_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1033_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1065_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1034_test_resultof_any">
											<xsl:variable name="var1064_cur" as="xs:string" select="."/>
											<xsl:variable name="var1036_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1035_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1066_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1035_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1036_test_resultof_any">
												<xsl:variable name="var1063_cur" as="xs:string" select="."/>
												<xsl:variable name="var1038_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1037_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1066_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1037_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1038_test_resultof_any">
													<xsl:variable name="var1062_cur" as="xs:string" select="."/>
													<xsl:variable name="var1040_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1039_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1066_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1039_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1040_test_resultof_any">
														<xsl:variable name="var1061_cur" as="xs:string" select="."/>
														<xsl:variable name="var1042_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1041_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1066_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1041_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1042_test_resultof_any">
															<xsl:variable name="var1060_cur" as="xs:string" select="."/>
															<xsl:variable name="var1044_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1043_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1066_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1043_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1044_test_resultof_any">
																<xsl:variable name="var1059_cur" as="xs:string" select="."/>
																<xsl:variable name="var1046_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1045_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1066_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1045_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1046_test_resultof_any">
																	<xsl:variable name="var1058_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1048_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1047_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1066_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1047_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1048_test_resultof_any">
																		<xsl:variable name="var1057_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1050_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1049_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1066_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1049_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1050_test_resultof_any">
																			<xsl:variable name="var1056_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1052_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1051_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1066_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1051_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1052_test_resultof_any">
																				<xsl:variable name="var1055_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1054_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1066_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1053_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1066_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1053_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1054_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('75311-1' = $var1064_cur), ('75311-1' = $var1063_cur), ('75311-1' = $var1062_cur), ('75311-1' = $var1061_cur), ('75311-1' = $var1060_cur), ('75311-1' = $var1059_cur), ('75311-1' = $var1058_cur), ('75311-1' = $var1057_cur), ('75311-1' = $var1056_cur), ('75311-1' = $var1055_cur), ('75311-1' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1065_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1067_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionDischargeInstructions'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'8653-8'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Hospital Discharge instructions'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1118_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1112_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1112_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1113_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1113_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1114_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1114_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1115_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1115_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1116_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1116_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1117_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1117_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1118_let">
							<xsl:variable name="var1111_current" as="node()" select="."/>
							<xsl:variable name="var1110_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1109_resource" as="node()*" select="$var1111_current/ns0:resource"/>
									<xsl:variable name="var1077_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1076_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1109_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1076_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1108_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1077_test_resultof_any">
											<xsl:variable name="var1107_cur" as="xs:string" select="."/>
											<xsl:variable name="var1079_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1078_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1109_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1078_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1079_test_resultof_any">
												<xsl:variable name="var1106_cur" as="xs:string" select="."/>
												<xsl:variable name="var1081_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1080_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1109_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1080_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1081_test_resultof_any">
													<xsl:variable name="var1105_cur" as="xs:string" select="."/>
													<xsl:variable name="var1083_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1082_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1109_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1082_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1083_test_resultof_any">
														<xsl:variable name="var1104_cur" as="xs:string" select="."/>
														<xsl:variable name="var1085_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1084_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1109_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1084_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1085_test_resultof_any">
															<xsl:variable name="var1103_cur" as="xs:string" select="."/>
															<xsl:variable name="var1087_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1086_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1109_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1086_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1087_test_resultof_any">
																<xsl:variable name="var1102_cur" as="xs:string" select="."/>
																<xsl:variable name="var1089_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1088_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1109_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1088_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1089_test_resultof_any">
																	<xsl:variable name="var1101_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1091_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1090_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1109_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1090_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1091_test_resultof_any">
																		<xsl:variable name="var1100_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1093_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1092_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1109_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1092_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1093_test_resultof_any">
																			<xsl:variable name="var1099_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1095_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1094_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1109_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1094_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1095_test_resultof_any">
																				<xsl:variable name="var1098_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1097_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1109_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1096_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1109_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1096_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1097_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('8653-8' = $var1107_cur), ('8653-8' = $var1106_cur), ('8653-8' = $var1105_cur), ('8653-8' = $var1104_cur), ('8653-8' = $var1103_cur), ('8653-8' = $var1102_cur), ('8653-8' = $var1101_cur), ('8653-8' = $var1100_cur), ('8653-8' = $var1099_cur), ('8653-8' = $var1098_cur), ('8653-8' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1108_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1110_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionAdvanceDirectives'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'42348-3'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Advance healthcare directives'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1161_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1155_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1155_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1156_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1156_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1157_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1157_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1158_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1158_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1159_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1159_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1160_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1160_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1161_let">
							<xsl:variable name="var1154_current" as="node()" select="."/>
							<xsl:variable name="var1153_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1152_resource" as="node()*" select="$var1154_current/ns0:resource"/>
									<xsl:variable name="var1120_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1119_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1152_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1119_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1151_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1120_test_resultof_any">
											<xsl:variable name="var1150_cur" as="xs:string" select="."/>
											<xsl:variable name="var1122_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1121_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1152_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1121_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1122_test_resultof_any">
												<xsl:variable name="var1149_cur" as="xs:string" select="."/>
												<xsl:variable name="var1124_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1123_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1152_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1123_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1124_test_resultof_any">
													<xsl:variable name="var1148_cur" as="xs:string" select="."/>
													<xsl:variable name="var1126_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1125_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1152_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1125_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1126_test_resultof_any">
														<xsl:variable name="var1147_cur" as="xs:string" select="."/>
														<xsl:variable name="var1128_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1127_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1152_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1127_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1128_test_resultof_any">
															<xsl:variable name="var1146_cur" as="xs:string" select="."/>
															<xsl:variable name="var1130_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1129_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1152_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1129_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1130_test_resultof_any">
																<xsl:variable name="var1145_cur" as="xs:string" select="."/>
																<xsl:variable name="var1132_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1131_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1152_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1131_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1132_test_resultof_any">
																	<xsl:variable name="var1144_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1134_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1133_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1152_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1133_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1134_test_resultof_any">
																		<xsl:variable name="var1143_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1136_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1135_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1152_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1135_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1136_test_resultof_any">
																			<xsl:variable name="var1142_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1138_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1137_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1152_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1137_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1138_test_resultof_any">
																				<xsl:variable name="var1141_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1140_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1152_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1139_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1152_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1139_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1140_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('42348-3' = $var1150_cur), ('42348-3' = $var1149_cur), ('42348-3' = $var1148_cur), ('42348-3' = $var1147_cur), ('42348-3' = $var1146_cur), ('42348-3' = $var1145_cur), ('42348-3' = $var1144_cur), ('42348-3' = $var1143_cur), ('42348-3' = $var1142_cur), ('42348-3' = $var1141_cur), ('42348-3' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1151_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1153_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionTravelHx'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'10182-4'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Travel Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1204_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1198_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1198_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1199_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1199_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1200_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1200_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1201_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1201_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1202_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1202_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1203_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1203_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1204_let">
							<xsl:variable name="var1197_current" as="node()" select="."/>
							<xsl:variable name="var1196_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1195_resource" as="node()*" select="$var1197_current/ns0:resource"/>
									<xsl:variable name="var1163_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1162_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1195_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1162_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1194_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1163_test_resultof_any">
											<xsl:variable name="var1193_cur" as="xs:string" select="."/>
											<xsl:variable name="var1165_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1164_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1195_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1164_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1165_test_resultof_any">
												<xsl:variable name="var1192_cur" as="xs:string" select="."/>
												<xsl:variable name="var1167_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1166_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1195_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1166_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1167_test_resultof_any">
													<xsl:variable name="var1191_cur" as="xs:string" select="."/>
													<xsl:variable name="var1169_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1168_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1195_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1168_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1169_test_resultof_any">
														<xsl:variable name="var1190_cur" as="xs:string" select="."/>
														<xsl:variable name="var1171_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1170_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1195_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1170_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1171_test_resultof_any">
															<xsl:variable name="var1189_cur" as="xs:string" select="."/>
															<xsl:variable name="var1173_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1172_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1195_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1172_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1173_test_resultof_any">
																<xsl:variable name="var1188_cur" as="xs:string" select="."/>
																<xsl:variable name="var1175_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1174_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1195_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1174_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1175_test_resultof_any">
																	<xsl:variable name="var1187_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1177_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1176_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1195_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1176_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1177_test_resultof_any">
																		<xsl:variable name="var1186_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1179_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1178_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1195_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1178_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1179_test_resultof_any">
																			<xsl:variable name="var1185_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1181_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1180_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1195_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1180_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1181_test_resultof_any">
																				<xsl:variable name="var1184_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1183_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1195_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1182_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1195_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1182_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1183_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('10182-4' = $var1193_cur), ('10182-4' = $var1192_cur), ('10182-4' = $var1191_cur), ('10182-4' = $var1190_cur), ('10182-4' = $var1189_cur), ('10182-4' = $var1188_cur), ('10182-4' = $var1187_cur), ('10182-4' = $var1186_cur), ('10182-4' = $var1185_cur), ('10182-4' = $var1184_cur), ('10182-4' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1194_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1196_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionPayers'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'48768-6'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Payment sources Document'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1247_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1241_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1241_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1242_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1242_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1243_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1243_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1244_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1244_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1245_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1245_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1246_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1246_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1247_let">
							<xsl:variable name="var1240_current" as="node()" select="."/>
							<xsl:variable name="var1239_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1238_resource" as="node()*" select="$var1240_current/ns0:resource"/>
									<xsl:variable name="var1206_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1205_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1238_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1205_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1237_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1206_test_resultof_any">
											<xsl:variable name="var1236_cur" as="xs:string" select="."/>
											<xsl:variable name="var1208_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1207_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1238_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1207_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1208_test_resultof_any">
												<xsl:variable name="var1235_cur" as="xs:string" select="."/>
												<xsl:variable name="var1210_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1209_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1238_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1209_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1210_test_resultof_any">
													<xsl:variable name="var1234_cur" as="xs:string" select="."/>
													<xsl:variable name="var1212_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1211_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1238_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1211_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1212_test_resultof_any">
														<xsl:variable name="var1233_cur" as="xs:string" select="."/>
														<xsl:variable name="var1214_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1213_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1238_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1213_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1214_test_resultof_any">
															<xsl:variable name="var1232_cur" as="xs:string" select="."/>
															<xsl:variable name="var1216_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1215_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1238_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1215_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1216_test_resultof_any">
																<xsl:variable name="var1231_cur" as="xs:string" select="."/>
																<xsl:variable name="var1218_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1217_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1238_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1217_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1218_test_resultof_any">
																	<xsl:variable name="var1230_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1220_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1219_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1238_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1219_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1220_test_resultof_any">
																		<xsl:variable name="var1229_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1222_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1221_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1238_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1221_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1222_test_resultof_any">
																			<xsl:variable name="var1228_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1224_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1223_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1238_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1223_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1224_test_resultof_any">
																				<xsl:variable name="var1227_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1226_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1238_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1225_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1238_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1225_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1226_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('48768-6' = $var1236_cur), ('48768-6' = $var1235_cur), ('48768-6' = $var1234_cur), ('48768-6' = $var1233_cur), ('48768-6' = $var1232_cur), ('48768-6' = $var1231_cur), ('48768-6' = $var1230_cur), ('48768-6' = $var1229_cur), ('48768-6' = $var1228_cur), ('48768-6' = $var1227_cur), ('48768-6' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1237_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1239_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionAttachments'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'77599-9'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'Additional documentation'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1290_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1284_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1284_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1285_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1285_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1286_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1286_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1287_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1287_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1288_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1288_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1289_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1289_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1290_let">
							<xsl:variable name="var1283_current" as="node()" select="."/>
							<xsl:variable name="var1282_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1281_resource" as="node()*" select="$var1283_current/ns0:resource"/>
									<xsl:variable name="var1249_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1248_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1281_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1248_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1280_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1249_test_resultof_any">
											<xsl:variable name="var1279_cur" as="xs:string" select="."/>
											<xsl:variable name="var1251_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1250_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1281_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1250_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1251_test_resultof_any">
												<xsl:variable name="var1278_cur" as="xs:string" select="."/>
												<xsl:variable name="var1253_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1252_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1281_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1252_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1253_test_resultof_any">
													<xsl:variable name="var1277_cur" as="xs:string" select="."/>
													<xsl:variable name="var1255_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1254_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1281_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1254_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1255_test_resultof_any">
														<xsl:variable name="var1276_cur" as="xs:string" select="."/>
														<xsl:variable name="var1257_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1256_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1281_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1256_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1257_test_resultof_any">
															<xsl:variable name="var1275_cur" as="xs:string" select="."/>
															<xsl:variable name="var1259_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1258_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1281_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1258_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1259_test_resultof_any">
																<xsl:variable name="var1274_cur" as="xs:string" select="."/>
																<xsl:variable name="var1261_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1260_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1281_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1260_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1261_test_resultof_any">
																	<xsl:variable name="var1273_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1263_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1262_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1281_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1262_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1263_test_resultof_any">
																		<xsl:variable name="var1272_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1265_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1264_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1281_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1264_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1265_test_resultof_any">
																			<xsl:variable name="var1271_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1267_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1266_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1281_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1266_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1267_test_resultof_any">
																				<xsl:variable name="var1270_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1269_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1281_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1268_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1281_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1268_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1269_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('77599-9' = $var1279_cur), ('77599-9' = $var1278_cur), ('77599-9' = $var1277_cur), ('77599-9' = $var1276_cur), ('77599-9' = $var1275_cur), ('77599-9' = $var1274_cur), ('77599-9' = $var1273_cur), ('77599-9' = $var1272_cur), ('77599-9' = $var1271_cur), ('77599-9' = $var1270_cur), ('77599-9' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1280_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1282_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
					<section>
						<title>
							<xsl:attribute name="value" namespace="" select="'sectionEncounters'"/>
						</title>
						<code>
							<coding>
								<code>
									<xsl:attribute name="value" namespace="" select="'46240-8'"/>
								</code>
								<display>
									<xsl:attribute name="value" namespace="" select="'History of Hospitalizations+Outpatient visits Narrative'"/>
								</display>
							</coding>
						</code>
						<xsl:variable name="var1333_let" as="node()*">
							<xsl:for-each select="$var1349_ku_z_propz_admu">
								<xsl:variable name="var1327_resultof_ku_z_propz_admu" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_admu">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_admuType" as="node()">
											<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_admuType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1327_resultof_ku_z_propz_admu">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:for-each select="$var1348_ku_z_propz_dvp">
								<xsl:variable name="var1328_resultof_ku_z_propz_dvp" as="node()?">
									<xsl:call-template name="provisio:ku_z_propz_dvp">
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_dvpType" as="node()">
											<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
													<xsl:with-param name="input" select="." as="node()"/>
												</xsl:call-template>
											</ku_z_propz_dvpType>
										</xsl:with-param>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1328_resultof_ku_z_propz_dvp">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1329_resultof_ku_z_propz_urg" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_urg">
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1329_resultof_ku_z_propz_urg">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:for-each select="$var1347_ku_z_propz_sprij">
								<xsl:variable name="var1330_resultof_ku_z_propz_sprij" as="node()*">
									<xsl:call-template name="provisio:ku_z_propz_sprij">
										<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
										<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
										<xsl:with-param name="patientReference" as="node()">
											<Reference>
												<xsl:sequence select="$var1344_let"/>
											</Reference>
										</xsl:with-param>
										<xsl:with-param name="ku_z_propz_sprijType" as="node()">
											<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
												<xsl:sequence select="(./@node(), ./node())"/>
											</ku_z_propz_sprijType>
										</xsl:with-param>
										<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
									</xsl:call-template>
								</xsl:variable>
								<xsl:for-each select="$var1330_resultof_ku_z_propz_sprij">
									<entry>
										<xsl:sequence select="(./@node(), ./node())"/>
									</entry>
								</xsl:for-each>
							</xsl:for-each>
							<xsl:variable name="var1331_resultof_ku_z_propz_anam" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_anam">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1331_resultof_ku_z_propz_anam">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
							<xsl:variable name="var1332_resultof_ku_z_propz_prubh" as="node()*">
								<xsl:call-template name="provisio:ku_z_propz_prubh">
									<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
									<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
									<xsl:with-param name="patientReference" as="node()">
										<Reference>
											<xsl:sequence select="$var1344_let"/>
										</Reference>
									</xsl:with-param>
									<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
									<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1332_resultof_ku_z_propz_prubh">
								<entry>
									<xsl:sequence select="(./@node(), ./node())"/>
								</entry>
							</xsl:for-each>
						</xsl:variable>
						<xsl:for-each select="$var1333_let">
							<xsl:variable name="var1326_current" as="node()" select="."/>
							<xsl:variable name="var1325_resultof_filter" as="node()*">
								<xsl:for-each select="ns0:fullUrl/@value">
									<xsl:variable name="var1324_resource" as="node()*" select="$var1326_current/ns0:resource"/>
									<xsl:variable name="var1292_test_resultof_any" as="xs:string+">
										<xsl:choose>
											<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Observation)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
												<xsl:variable name="var1291_map_of_resource" as="xs:string+">
													<xsl:for-each select="$var1324_resource/ns0:Observation/ns0:meta/ns0:tag/ns0:code/@value">
														<xsl:sequence select="fn:string(.)"/>
													</xsl:for-each>
												</xsl:variable>
												<xsl:sequence select="$var1291_map_of_resource"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:sequence select="''"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var1323_map_of_test_any" as="xs:boolean*">
										<xsl:for-each select="$var1292_test_resultof_any">
											<xsl:variable name="var1322_cur" as="xs:string" select="."/>
											<xsl:variable name="var1294_test_resultof_any" as="xs:string+">
												<xsl:choose>
													<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Practitioner)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
														<xsl:variable name="var1293_map_of_resource" as="xs:string+">
															<xsl:for-each select="$var1324_resource/ns0:Practitioner/ns0:meta/ns0:tag/ns0:code/@value">
																<xsl:sequence select="fn:string(.)"/>
															</xsl:for-each>
														</xsl:variable>
														<xsl:sequence select="$var1293_map_of_resource"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:sequence select="''"/>
													</xsl:otherwise>
												</xsl:choose>
											</xsl:variable>
											<xsl:for-each select="$var1294_test_resultof_any">
												<xsl:variable name="var1321_cur" as="xs:string" select="."/>
												<xsl:variable name="var1296_test_resultof_any" as="xs:string+">
													<xsl:choose>
														<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:AllergyIntolerance)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
															<xsl:variable name="var1295_map_of_resource" as="xs:string+">
																<xsl:for-each select="$var1324_resource/ns0:AllergyIntolerance/ns0:meta/ns0:tag/ns0:code/@value">
																	<xsl:sequence select="fn:string(.)"/>
																</xsl:for-each>
															</xsl:variable>
															<xsl:sequence select="$var1295_map_of_resource"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:sequence select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:variable>
												<xsl:for-each select="$var1296_test_resultof_any">
													<xsl:variable name="var1320_cur" as="xs:string" select="."/>
													<xsl:variable name="var1298_test_resultof_any" as="xs:string+">
														<xsl:choose>
															<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Flag)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																<xsl:variable name="var1297_map_of_resource" as="xs:string+">
																	<xsl:for-each select="$var1324_resource/ns0:Flag/ns0:meta/ns0:tag/ns0:code/@value">
																		<xsl:sequence select="fn:string(.)"/>
																	</xsl:for-each>
																</xsl:variable>
																<xsl:sequence select="$var1297_map_of_resource"/>
															</xsl:when>
															<xsl:otherwise>
																<xsl:sequence select="''"/>
															</xsl:otherwise>
														</xsl:choose>
													</xsl:variable>
													<xsl:for-each select="$var1298_test_resultof_any">
														<xsl:variable name="var1319_cur" as="xs:string" select="."/>
														<xsl:variable name="var1300_test_resultof_any" as="xs:string+">
															<xsl:choose>
																<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Condition)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																	<xsl:variable name="var1299_map_of_resource" as="xs:string+">
																		<xsl:for-each select="$var1324_resource/ns0:Condition/ns0:meta/ns0:tag/ns0:code/@value">
																			<xsl:sequence select="fn:string(.)"/>
																		</xsl:for-each>
																	</xsl:variable>
																	<xsl:sequence select="$var1299_map_of_resource"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:sequence select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:variable>
														<xsl:for-each select="$var1300_test_resultof_any">
															<xsl:variable name="var1318_cur" as="xs:string" select="."/>
															<xsl:variable name="var1302_test_resultof_any" as="xs:string+">
																<xsl:choose>
																	<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:DeviceUseStatement)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																		<xsl:variable name="var1301_map_of_resource" as="xs:string+">
																			<xsl:for-each select="$var1324_resource/ns0:DeviceUseStatement/ns0:meta/ns0:tag/ns0:code/@value">
																				<xsl:sequence select="fn:string(.)"/>
																			</xsl:for-each>
																		</xsl:variable>
																		<xsl:sequence select="$var1301_map_of_resource"/>
																	</xsl:when>
																	<xsl:otherwise>
																		<xsl:sequence select="''"/>
																	</xsl:otherwise>
																</xsl:choose>
															</xsl:variable>
															<xsl:for-each select="$var1302_test_resultof_any">
																<xsl:variable name="var1317_cur" as="xs:string" select="."/>
																<xsl:variable name="var1304_test_resultof_any" as="xs:string+">
																	<xsl:choose>
																		<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Procedure)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																			<xsl:variable name="var1303_map_of_resource" as="xs:string+">
																				<xsl:for-each select="$var1324_resource/ns0:Procedure/ns0:meta/ns0:tag/ns0:code/@value">
																					<xsl:sequence select="fn:string(.)"/>
																				</xsl:for-each>
																			</xsl:variable>
																			<xsl:sequence select="$var1303_map_of_resource"/>
																		</xsl:when>
																		<xsl:otherwise>
																			<xsl:sequence select="''"/>
																		</xsl:otherwise>
																	</xsl:choose>
																</xsl:variable>
																<xsl:for-each select="$var1304_test_resultof_any">
																	<xsl:variable name="var1316_cur" as="xs:string" select="."/>
																	<xsl:variable name="var1306_test_resultof_any" as="xs:string+">
																		<xsl:choose>
																			<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:Immunization)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																				<xsl:variable name="var1305_map_of_resource" as="xs:string+">
																					<xsl:for-each select="$var1324_resource/ns0:Immunization/ns0:meta/ns0:tag/ns0:code/@value">
																						<xsl:sequence select="fn:string(.)"/>
																					</xsl:for-each>
																				</xsl:variable>
																				<xsl:sequence select="$var1305_map_of_resource"/>
																			</xsl:when>
																			<xsl:otherwise>
																				<xsl:sequence select="''"/>
																			</xsl:otherwise>
																		</xsl:choose>
																	</xsl:variable>
																	<xsl:for-each select="$var1306_test_resultof_any">
																		<xsl:variable name="var1315_cur" as="xs:string" select="."/>
																		<xsl:variable name="var1308_test_resultof_any" as="xs:string+">
																			<xsl:choose>
																				<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:FamilyMemberHistory)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																					<xsl:variable name="var1307_map_of_resource" as="xs:string+">
																						<xsl:for-each select="$var1324_resource/ns0:FamilyMemberHistory/ns0:meta/ns0:tag/ns0:code/@value">
																							<xsl:sequence select="fn:string(.)"/>
																						</xsl:for-each>
																					</xsl:variable>
																					<xsl:sequence select="$var1307_map_of_resource"/>
																				</xsl:when>
																				<xsl:otherwise>
																					<xsl:sequence select="''"/>
																				</xsl:otherwise>
																			</xsl:choose>
																		</xsl:variable>
																		<xsl:for-each select="$var1308_test_resultof_any">
																			<xsl:variable name="var1314_cur" as="xs:string" select="."/>
																			<xsl:variable name="var1310_test_resultof_any" as="xs:string+">
																				<xsl:choose>
																					<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:MedicationAdministration)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																						<xsl:variable name="var1309_map_of_resource" as="xs:string+">
																							<xsl:for-each select="$var1324_resource/ns0:MedicationAdministration/ns0:meta/ns0:tag/ns0:code/@value">
																								<xsl:sequence select="fn:string(.)"/>
																							</xsl:for-each>
																						</xsl:variable>
																						<xsl:sequence select="$var1309_map_of_resource"/>
																					</xsl:when>
																					<xsl:otherwise>
																						<xsl:sequence select="''"/>
																					</xsl:otherwise>
																				</xsl:choose>
																			</xsl:variable>
																			<xsl:for-each select="$var1310_test_resultof_any">
																				<xsl:variable name="var1313_cur" as="xs:string" select="."/>
																				<xsl:variable name="var1312_test_resultof_any" as="xs:string+">
																					<xsl:choose>
																						<xsl:when test="fn:exists(($var1324_resource)[fn:exists((./ns0:DiagnosticReport)[fn:exists((./ns0:meta)[fn:exists((./ns0:tag)[fn:exists((./ns0:code)[fn:exists(@value)])])])])])">
																							<xsl:variable name="var1311_map_of_resource" as="xs:string+">
																								<xsl:for-each select="$var1324_resource/ns0:DiagnosticReport/ns0:meta/ns0:tag/ns0:code/@value">
																									<xsl:sequence select="fn:string(.)"/>
																								</xsl:for-each>
																							</xsl:variable>
																							<xsl:sequence select="$var1311_map_of_resource"/>
																						</xsl:when>
																						<xsl:otherwise>
																							<xsl:sequence select="''"/>
																						</xsl:otherwise>
																					</xsl:choose>
																				</xsl:variable>
																				<xsl:for-each select="$var1312_test_resultof_any">
																					<xsl:sequence select="fn:exists(((('46240-8' = $var1322_cur), ('46240-8' = $var1321_cur), ('46240-8' = $var1320_cur), ('46240-8' = $var1319_cur), ('46240-8' = $var1318_cur), ('46240-8' = $var1317_cur), ('46240-8' = $var1316_cur), ('46240-8' = $var1315_cur), ('46240-8' = $var1314_cur), ('46240-8' = $var1313_cur), ('46240-8' = .)))[.])"/>
																				</xsl:for-each>
																			</xsl:for-each>
																		</xsl:for-each>
																	</xsl:for-each>
																</xsl:for-each>
															</xsl:for-each>
														</xsl:for-each>
													</xsl:for-each>
												</xsl:for-each>
											</xsl:for-each>
										</xsl:for-each>
									</xsl:variable>
									<xsl:if test="fn:exists(($var1323_map_of_test_any)[.])">
										<xsl:sequence select="."/>
									</xsl:if>
								</xsl:for-each>
							</xsl:variable>
							<xsl:for-each select="$var1325_resultof_filter">
								<entry>
									<reference>
										<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(fn:string(.)))"/>
									</reference>
								</entry>
							</xsl:for-each>
						</xsl:for-each>
					</section>
				</Composition>
			</resource>
		</entry>
		<xsl:for-each select="$var1349_ku_z_propz_admu">
			<xsl:variable name="var1334_resultof_ku_z_propz_admu" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz_admu">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var1344_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propz_admuType" as="node()">
						<ku_z_propz_admuType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_admuType>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var1334_resultof_ku_z_propz_admu">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:for-each select="$var1348_ku_z_propz_dvp">
			<xsl:variable name="var1335_resultof_ku_z_propz_dvp" as="node()?">
				<xsl:call-template name="provisio:ku_z_propz_dvp">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var1344_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propz_dvpType" as="node()">
						<ku_z_propz_dvpType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:call-template name="tbf:tbf1_ku_z_propz_dvpType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</ku_z_propz_dvpType>
					</xsl:with-param>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var1335_resultof_ku_z_propz_dvp">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:variable name="var1336_resultof_ku_z_propz_urg" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_urg">
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var1344_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
				<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
				<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
				<xsl:with-param name="ku_z_propz_urg" select="$var1342_create_ku_z_propz_urgType_of_ku_z_propz_urg" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1336_resultof_ku_z_propz_urg">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:for-each select="$var1347_ku_z_propz_sprij">
			<xsl:variable name="var1337_resultof_ku_z_propz_sprij" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz_sprij">
					<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
					<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="$var1344_let"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propz_sprijType" as="node()">
						<ku_z_propz_sprijType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propz_sprijType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var1337_resultof_ku_z_propz_sprij">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
		<xsl:variable name="var1338_resultof_ku_z_propz_anam" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_anam">
				<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var1344_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="ku_z_propz_anamType" select="$var1341_create_ku_z_propz_anamType_of_ku_z_propz_anam" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1338_resultof_ku_z_propz_anam">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
		<xsl:variable name="var1339_resultof_ku_z_propz_prubh" as="node()*">
			<xsl:call-template name="provisio:ku_z_propz_prubh">
				<xsl:with-param name="practitionerReference" select="$var1346_concat_of_practitionerReference" as="xs:string*"/>
				<xsl:with-param name="organizatinReference" select="$var1345_concat_of_organizatinReference" as="xs:string*"/>
				<xsl:with-param name="patientReference" as="node()">
					<Reference xmlns="http://hl7.org/fhir">
						<xsl:sequence select="$var1344_let"/>
					</Reference>
				</xsl:with-param>
				<xsl:with-param name="ku_z_propz_prubhType" select="$var1343_create_ku_z_propz_prubhType_of_ku_z_propz_prubh" as="node()*"/>
				<xsl:with-param name="dat_prov" select="$var1340_create_dat_prov_of_dat_prov" as="node()*"/>
			</xsl:call-template>
		</xsl:variable>
		<xsl:for-each select="$var1339_resultof_ku_z_propz_prubh">
			<entry xmlns="http://hl7.org/fhir">
				<xsl:sequence select="(./@node(), ./node())"/>
			</entry>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:ku_z">
		<xsl:param name="patientReference" select="()"/>
		<xsl:param name="ku_zType" select="()"/>
		<xsl:param name="organizatinReference" select="()"/>
		<xsl:param name="practitionerReference" select="()"/>
		<xsl:for-each select="$ku_zType/ns2:ku_z_propz">
			<xsl:variable name="var1_resultof_ku_z_propz" as="node()*">
				<xsl:call-template name="provisio:ku_z_propz">
					<xsl:with-param name="patientReference" as="node()">
						<Reference xmlns="http://hl7.org/fhir">
							<xsl:sequence select="($patientReference/@node(), $patientReference/node())"/>
						</Reference>
					</xsl:with-param>
					<xsl:with-param name="ku_z_propzType" as="node()">
						<ku_z_propzType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
							<xsl:sequence select="(./@node(), ./node())"/>
						</ku_z_propzType>
					</xsl:with-param>
					<xsl:with-param name="dat_prov" as="node()*">
						<xsl:for-each select="$ku_zType/ns2:dat_prov">
							<dat_prov xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
								<xsl:sequence select="(./@node(), ./node())"/>
							</dat_prov>
						</xsl:for-each>
					</xsl:with-param>
					<xsl:with-param name="organizatinReference" select="$organizatinReference" as="xs:string*"/>
					<xsl:with-param name="practitionerReference" select="$practitionerReference" as="xs:string*"/>
				</xsl:call-template>
			</xsl:variable>
			<xsl:for-each select="$var1_resultof_ku_z_propz">
				<entry xmlns="http://hl7.org/fhir">
					<xsl:sequence select="(./@node(), ./node())"/>
				</entry>
			</xsl:for-each>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="provisio:Reference_Practitioner">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Practitioner/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:garant_dat">
		<xsl:param name="garant_dat" select="()"/>
		<xsl:variable name="var4_guid" as="node()?" select="$garant_dat/@guid"/>
		<xsl:variable name="var5_odbornost" as="node()?" select="$garant_dat/@odbornost"/>
		<xsl:variable name="var6_vguid" as="node()?" select="$garant_dat/@vguid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var4_guid">
				<xsl:for-each select="$var6_vguid">
					<xsl:for-each select="$var4_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var6_vguid">
							<xsl:variable name="var1_resultof_Reference_Practitioner" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Practitioner">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Practitioner">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Practitioner>
					<xsl:for-each select="$var4_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var6_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
					</meta>
					<xsl:for-each select="$garant_dat/@id_zp">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/krzp'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$garant_dat/@id_clk">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/clk'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<identifier>
						<use>
							<xsl:attribute name="value" namespace="" select="'official'"/>
						</use>
						<system>
							<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/clek'))"/>
						</system>
					</identifier>
					<name>
						<text>
							<xsl:attribute name="value" namespace="" select="fn:string($garant_dat)"/>
						</text>
					</name>
					<qualification>
						<code>
							<coding>
								<system>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/UZAGT.htm'))"/>
								</system>
								<code>
									<xsl:for-each select="$var5_odbornost">
										<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
									</xsl:for-each>
								</code>
								<display>
									<xsl:for-each select="$var5_odbornost">
										<xsl:variable name="var3_resultof_vmf___inputtoresult" as="xs:string?">
											<xsl:call-template name="vmf:vmf29_inputtoresult">
												<xsl:with-param name="input" select="fn:string(.)" as="xs:string"/>
											</xsl:call-template>
										</xsl:variable>
										<xsl:for-each select="$var3_resultof_vmf___inputtoresult">
											<xsl:attribute name="value" namespace="" select="."/>
										</xsl:for-each>
									</xsl:for-each>
								</display>
							</coding>
						</code>
					</qualification>
				</Practitioner>
				<PractitionerRole>
					<code>
						<coding>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://dastacr.cz/dasta/hypertext/WWBSK.htm'))"/>
							</system>
							<code>
								<xsl:for-each select="$garant_dat/@role_klic">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</code>
							<display>
								<xsl:for-each select="$garant_dat/@role_text">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</display>
						</coding>
					</code>
				</PractitionerRole>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="provisio:Reference_Organization">
		<xsl:param name="GUID" select="()"/>
		<xsl:param name="VGUID" select="()"/>
		<xsl:sequence select="fn:concat(fn:concat(fn:concat('Organization/', $GUID), '/_history/'), $VGUID)"/>
	</xsl:template>
	<xsl:template name="provisio:is">
		<xsl:param name="is" select="()"/>
		<xsl:variable name="var5_vguid" as="node()?" select="$is/@vguid"/>
		<xsl:variable name="var6_guid" as="node()?" select="$is/@guid"/>
		<entry xmlns="http://hl7.org/fhir">
			<xsl:for-each select="$var6_guid">
				<xsl:for-each select="$var5_vguid">
					<xsl:for-each select="$var6_guid">
						<xsl:variable name="var2_cur" as="node()" select="."/>
						<xsl:for-each select="$var5_vguid">
							<xsl:variable name="var1_resultof_Reference_Organization" as="xs:string?">
								<xsl:call-template name="provisio:Reference_Organization">
									<xsl:with-param name="GUID" select="fn:string($var2_cur)" as="xs:string"/>
									<xsl:with-param name="VGUID" select="fn:string(.)" as="xs:string"/>
								</xsl:call-template>
							</xsl:variable>
							<xsl:for-each select="$var1_resultof_Reference_Organization">
								<fullUrl>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI(.))"/>
								</fullUrl>
							</xsl:for-each>
						</xsl:for-each>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<resource>
				<Organization>
					<xsl:for-each select="$var6_guid">
						<id>
							<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
						</id>
					</xsl:for-each>
					<meta>
						<xsl:for-each select="$var5_vguid">
							<versionId>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</versionId>
						</xsl:for-each>
					</meta>
					<xsl:for-each select="$is/@ico">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/ico'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@icz">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icz'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@icp">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icp'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@icl">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/icl'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@pcz">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/pcz'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@oddel">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/oddel'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<xsl:for-each select="$is/@oavl">
						<identifier>
							<use>
								<xsl:attribute name="value" namespace="" select="'official'"/>
							</use>
							<system>
								<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/oavl'))"/>
							</system>
							<value>
								<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
							</value>
						</identifier>
					</xsl:for-each>
					<active>
						<xsl:attribute name="value" namespace="" select="xs:string(fn:true())"/>
					</active>
					<xsl:for-each select="$is/ns1:a">
						<xsl:variable name="var4_cur" as="node()" select="."/>
						<address>
							<use>
								<xsl:attribute name="value" namespace="" select="'work'"/>
							</use>
							<text>
								<xsl:for-each select="ns1:jmeno">
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</xsl:for-each>
							</text>
							<xsl:for-each select="ns1:adr">
								<line>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</line>
							</xsl:for-each>
							<xsl:for-each select="ns1:dop1">
								<line>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</line>
							</xsl:for-each>
							<xsl:for-each select="ns1:dop2">
								<line>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</line>
							</xsl:for-each>
							<xsl:for-each select="ns1:mesto">
								<city>
									<xsl:attribute name="value" namespace="" select="fn:string(.)"/>
								</city>
							</xsl:for-each>
							<xsl:for-each select="ns1:psc">
								<postalCode>
									<xsl:attribute name="value" namespace="" select="xs:string(xs:integer(fn:string(.)))"/>
								</postalCode>
							</xsl:for-each>
							<xsl:for-each select="ns1:stat">
								<xsl:variable name="var3_cur" as="node()" select="."/>
								<xsl:for-each select="$var4_cur/ns1:stat_text">
									<country>
										<xsl:attribute name="value" namespace="" select="fn:concat(fn:concat(fn:string($var3_cur), ' - '), fn:string(.))"/>
									</country>
								</xsl:for-each>
							</xsl:for-each>
						</address>
					</xsl:for-each>
				</Organization>
			</resource>
		</entry>
	</xsl:template>
	<xsl:template name="tbf:tbf1_ku_z_propz_dvpType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:dat_dvp)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf2_dat_xxType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dvp_typ)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dvp_koment)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dvp_dotstav)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf3_mknorphaType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:dvp_dokum)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf4_textType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf2_dat_xxType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@format">
			<xsl:attribute name="format" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf3_mknorphaType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:kod_syst)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:kod)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:kod_text)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="fn:string(.)"/>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf4_textType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::ns2:autor)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf5_autorType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:ptext)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf6_">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:ktext)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf7_ktextType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:priloha)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf8_prilohaType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
					<xsl:if test="fn:boolean(self::ns2:textAny)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:call-template name="tbf:tbf9_AnyType">
								<xsl:with-param name="input" select="." as="node()"/>
							</xsl:call-template>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="tbf:tbf5_autorType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@guid">
			<xsl:attribute name="guid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@vguid">
			<xsl:attribute name="vguid" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_zp">
			<xsl:attribute name="id_zp" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_autor">
			<xsl:attribute name="id_autor" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@odbornost">
			<xsl:attribute name="odbornost" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@id_clk">
			<xsl:attribute name="id_clk" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_klic">
			<xsl:attribute name="role_klic" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@role_text">
			<xsl:attribute name="role_text" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf6_">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@xml:space">
			<xsl:attribute name="xml:space" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf7_ktextType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@encode">
			<xsl:attribute name="encode" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf8_prilohaType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/@zdroj">
			<xsl:attribute name="zdroj" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:for-each select="$input/@typ">
			<xsl:attribute name="typ" select="fn:string(.)"/>
		</xsl:for-each>
		<xsl:sequence select="fn:string($input)"/>
	</xsl:template>
	<xsl:template name="tbf:tbf9_AnyType">
		<xsl:param name="input" select="()"/>
		<xsl:for-each select="$input/node()">
			<xsl:choose>
				<xsl:when test="fn:boolean(self::*)">
					<xsl:if test="fn:boolean(self::*)">
						<xsl:element name="{fn:string(fn:node-name(.))}" namespace="{fn:namespace-uri-from-QName(fn:node-name(.))}">
							<xsl:sequence select="(./@node(), ./node())"/>
						</xsl:element>
					</xsl:if>
				</xsl:when>
				<xsl:otherwise>
					<xsl:if test="fn:not(fn:boolean(self::text()))">
						<xsl:sequence select="."/>
					</xsl:if>
				</xsl:otherwise>
			</xsl:choose>
		</xsl:for-each>
	</xsl:template>
	<xsl:template name="vmf:vmf1_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'completed'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'correction'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'entered-in-error'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'stopped'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'on-hold'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'stopped'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf2_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='ND'">
				<xsl:copy-of select="'nevhodné dávkování'"/>
			</xsl:when>
			<xsl:when test="$input='PD'">
				<xsl:copy-of select="'nedostatečné dávkování'"/>
			</xsl:when>
			<xsl:when test="$input='IL'">
				<xsl:copy-of select="'interakce léku'"/>
			</xsl:when>
			<xsl:when test="$input='J'">
				<xsl:copy-of select="'jiné'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf3_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'chronic'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'acute'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf4_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'Chronická (trvalá) medikace'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'Akutní (přechodná) medikace'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf5_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='ASSOC'">
				<xsl:copy-of select="&quot;Associate's or technical degree complete&quot;"/>
			</xsl:when>
			<xsl:when test="$input='BD'">
				<xsl:copy-of select="'College or baccalaureate degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='ELEN'">
				<xsl:copy-of select="'Elementary School'"/>
			</xsl:when>
			<xsl:when test="$input='GD'">
				<xsl:copy-of select="'Graduate or professional Degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='HS'">
				<xsl:copy-of select="'High School or secondary school degree complete'"/>
			</xsl:when>
			<xsl:when test="$input='PB'">
				<xsl:copy-of select="'Some post-baccalaureate education'"/>
			</xsl:when>
			<xsl:when test="$input='POSTG'">
				<xsl:copy-of select="'Doctoral or post graduate education'"/>
			</xsl:when>
			<xsl:when test="$input='SCOL'">
				<xsl:copy-of select="'Some College education'"/>
			</xsl:when>
			<xsl:when test="$input='SEC'">
				<xsl:copy-of select="'Some secondary or high school education'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf6_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='365508006'">
				<xsl:copy-of select="'Residence and accommodation circumstances'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf7_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='BSCH'">
				<xsl:copy-of select="'Vana / sprchové křeslo'"/>
			</xsl:when>
			<xsl:when test="$input='SLCH'">
				<xsl:copy-of select="'Schodišťový výtah, židle'"/>
			</xsl:when>
			<xsl:when test="$input='ASTO'">
				<xsl:copy-of select="'Pomocná toaleta'"/>
			</xsl:when>
			<xsl:when test="$input='ASBE'">
				<xsl:copy-of select="'Pomocné lůžko'"/>
			</xsl:when>
			<xsl:when test="$input='HPAF'">
				<xsl:copy-of select="'Pomocné vybavení / adaptace domu a prostor'"/>
			</xsl:when>
			<xsl:when test="$input='HARA'">
				<xsl:copy-of select="'Zábradlí, držadla'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf8_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='STHO'">
				<xsl:copy-of select="'Schody v domě'"/>
			</xsl:when>
			<xsl:when test="$input='LAWE'">
				<xsl:copy-of select="'Bydlí v bytě s výtahem'"/>
			</xsl:when>
			<xsl:when test="$input='ARBS'">
				<xsl:copy-of select="'Přístup do domu po schodech'"/>
			</xsl:when>
			<xsl:when test="$input='OMRE'">
				<xsl:copy-of select="'Blokovaný vstup do bytu'"/>
			</xsl:when>
			<xsl:when test="$input='HCSB'">
				<xsl:copy-of select="'Bydlení obsahuje strukturální překážky pohybu'"/>
			</xsl:when>
			<xsl:when test="$input='CLSP'">
				<xsl:copy-of select="'Zaneřáděný životní prostor'"/>
			</xsl:when>
			<xsl:when test="$input='DLCO'">
				<xsl:copy-of select="'Špinavé životní prostředí'"/>
			</xsl:when>
			<xsl:when test="$input='KEPE'">
				<xsl:copy-of select="'Chová domácí mazlíčky'"/>
			</xsl:when>
			<xsl:when test="$input='UFCO'">
				<xsl:copy-of select="'Nebezpečná podlahová krytina'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf9_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='HNMD'">
				<xsl:copy-of select="'228368007'"/>
			</xsl:when>
			<xsl:when test="$input='DNMD'">
				<xsl:copy-of select="'228367002'"/>
			</xsl:when>
			<xsl:when test="$input='MDIP'">
				<xsl:copy-of select="'44870007'"/>
			</xsl:when>
			<xsl:when test="$input='CDUS'">
				<xsl:copy-of select="'417284009'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf10_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='AMFETAM'">
				<xsl:copy-of select="'703842006'"/>
			</xsl:when>
			<xsl:when test="$input='ANABST'">
				<xsl:copy-of select="'111151007'"/>
			</xsl:when>
			<xsl:when test="$input='BARBIT'">
				<xsl:copy-of select="'372798009'"/>
			</xsl:when>
			<xsl:when test="$input='BENZOD'">
				<xsl:copy-of select="'372664007'"/>
			</xsl:when>
			<xsl:when test="$input='BUP'">
				<xsl:copy-of select="'387173000'"/>
			</xsl:when>
			<xsl:when test="$input='PHENC'">
				<xsl:copy-of select="'9721008'"/>
			</xsl:when>
			<xsl:when test="$input='FENTAN'">
				<xsl:copy-of select="'373492002'"/>
			</xsl:when>
			<xsl:when test="$input='HALLMUSH'">
				<xsl:copy-of select="'229006007'"/>
			</xsl:when>
			<xsl:when test="$input='HEROIN'">
				<xsl:copy-of select="'387341002'"/>
			</xsl:when>
			<xsl:when test="$input='3OHBUTYR'">
				<xsl:copy-of select="'62821004'"/>
			</xsl:when>
			<xsl:when test="$input='KETAM'">
				<xsl:copy-of select="'373464007'"/>
			</xsl:when>
			<xsl:when test="$input='COCAINE'">
				<xsl:copy-of select="'387085005'"/>
			</xsl:when>
			<xsl:when test="$input='COCFB'">
				<xsl:copy-of select="'229003004'"/>
			</xsl:when>
			<xsl:when test="$input='CANAB'">
				<xsl:copy-of select="'398705004'"/>
			</xsl:when>
			<xsl:when test="$input='LAXAT'">
				<xsl:copy-of select="'372800002'"/>
			</xsl:when>
			<xsl:when test="$input='LSD'">
				<xsl:copy-of select="'15698006'"/>
			</xsl:when>
			<xsl:when test="$input='MDMA'">
				<xsl:copy-of select="'288459003'"/>
			</xsl:when>
			<xsl:when test="$input='METHAD'">
				<xsl:copy-of select="'387286002'"/>
			</xsl:when>
			<xsl:when test="$input='METAMF'">
				<xsl:copy-of select="'387499002'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf11_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'inactive'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf12_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='F'">
				<xsl:copy-of select="'fyziologická reakce'"/>
			</xsl:when>
			<xsl:when test="$input='H'">
				<xsl:copy-of select="'hyperreakce'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'neurologická reakce'"/>
			</xsl:when>
			<xsl:when test="$input='J'">
				<xsl:copy-of select="'jiná reakce'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf13_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'385669000'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'385671000'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'385670004'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf14_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'Úspěšný'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'Neúspěšný'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'Částečně úspěšný'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf15_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'completed'"/>
			</xsl:when>
			<xsl:when test="$input='SF'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='SN'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf16_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf17_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='F'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf18_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf19_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='D'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'phone'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'phone'"/>
			</xsl:when>
			<xsl:when test="$input='F'">
				<xsl:copy-of select="'fax'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'email'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='E'">
				<xsl:copy-of select="'e-mail'"/>
			</xsl:when>
			<xsl:when test="$input='I'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'other'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf20_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'mobile'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf21_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='1'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='2'">
				<xsl:copy-of select="'temp'"/>
			</xsl:when>
			<xsl:when test="$input='3'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='4'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='5'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='6'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='7'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='8'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='9'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='C'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'home'"/>
			</xsl:when>
			<xsl:when test="$input='G'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='M'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='T'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='B'">
				<xsl:copy-of select="'billing'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='O'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
			<xsl:when test="$input='X'">
				<xsl:copy-of select="'work'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf22_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='K'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf23_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='1'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:when test="$input='2'">
				<xsl:copy-of select="true()"/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:copy-of select="false()"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf24_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'active'"/>
			</xsl:when>
			<xsl:when test="$input='SP'">
				<xsl:copy-of select="'resolved'"/>
			</xsl:when>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'inactive'"/>
			</xsl:when>
			<xsl:when test="$input='Z'">
				<xsl:copy-of select="'suspended'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf25_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='U'">
				<xsl:copy-of select="'unconfirmed'"/>
			</xsl:when>
			<xsl:when test="$input='N'">
				<xsl:copy-of select="'refuted'"/>
			</xsl:when>
			<xsl:when test="$input='AF'">
				<xsl:copy-of select="'confirmed'"/>
			</xsl:when>
			<xsl:when test="$input='AN'">
				<xsl:copy-of select="'confirmed'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf26_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='A'">
				<xsl:copy-of select="'allergy'"/>
			</xsl:when>
			<xsl:when test="$input='I'">
				<xsl:copy-of select="'intolerance'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf27_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='L'">
				<xsl:copy-of select="'medication'"/>
			</xsl:when>
			<xsl:when test="$input='P'">
				<xsl:copy-of select="'food'"/>
			</xsl:when>
			<xsl:when test="$input='S'">
				<xsl:copy-of select="'environment'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf28_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='255604002'">
				<xsl:copy-of select="'low'"/>
			</xsl:when>
			<xsl:when test="$input='371923003'">
				<xsl:copy-of select="'low'"/>
			</xsl:when>
			<xsl:when test="$input='6736007'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='371924009'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='24484000'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
			<xsl:when test="$input='442452003'">
				<xsl:copy-of select="'high'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:template name="vmf:vmf29_inputtoresult">
		<xsl:param name="input" select="()"/>
		<xsl:choose>
			<xsl:when test="$input='001'">
				<xsl:copy-of select="'všeobecné praktické lékařství'"/>
			</xsl:when>
			<xsl:when test="$input='002'">
				<xsl:copy-of select="'praktické lékařství pro děti a dorost a pediatrie'"/>
			</xsl:when>
		</xsl:choose>
	</xsl:template>
	<xsl:output method="xml" encoding="UTF-8" byte-order-mark="no" indent="yes"/>
	<xsl:template match="/">
		<xsl:variable name="var7_dasta" as="node()?" select="ns1:dasta"/>
		<Bundle xmlns="http://hl7.org/fhir" xmlns:xhtml="http://www.w3.org/1999/xhtml">
			<xsl:attribute name="xsi:schemaLocation" namespace="http://www.w3.org/2001/XMLSchema-instance" select="'http://hl7.org/fhir file:///C:/PROVISIO/Mapping/schemas/hl7-fhir/bundle.xsd'"/>
			<type>
				<xsl:attribute name="value" namespace="" select="'message'"/>
			</type>
			<xsl:for-each select="$var7_dasta/ns1:is/ns2:ip">
				<xsl:variable name="var4_cur" as="node()" select="."/>
				<xsl:for-each select="ns2:ku/ns2:ku_z">
					<xsl:variable name="var3_resultof_ku_z" as="node()*">
						<xsl:call-template name="provisio:ku_z">
							<xsl:with-param name="patientReference" as="node()">
								<Reference>
									<identifier>
										<use>
											<xsl:attribute name="value" namespace="" select="'official'"/>
										</use>
										<system>
											<xsl:attribute name="value" namespace="" select="xs:string(xs:anyURI('https://ncez.mzcr.cz/fhir/sid/cpoj'))"/>
										</system>
										<value>
											<xsl:attribute name="value" namespace="" select="fn:string($var4_cur/@id_pac)"/>
										</value>
									</identifier>
								</Reference>
							</xsl:with-param>
							<xsl:with-param name="ku_zType" as="node()">
								<ku_zType xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_ip">
									<xsl:sequence select="(./@node(), ./node())"/>
								</ku_zType>
							</xsl:with-param>
							<xsl:with-param name="organizatinReference" as="xs:string*">
								<xsl:for-each select="$var7_dasta/ns1:is">
									<xsl:variable name="var1_resultof_is" as="node()*">
										<xsl:call-template name="provisio:is">
											<xsl:with-param name="is" as="node()">
												<is xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="(./@node(), ./node())"/>
												</is>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var1_resultof_is/ns0:resource/ns0:Organization/ns0:id/@value">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:with-param>
							<xsl:with-param name="practitionerReference" as="xs:string*">
								<xsl:for-each select="$var7_dasta/ns1:garant_dat">
									<xsl:variable name="var2_resultof_garant_dat" as="node()?">
										<xsl:call-template name="provisio:garant_dat">
											<xsl:with-param name="garant_dat" as="node()">
												<garant_dat xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
													<xsl:sequence select="(./@node(), ./node())"/>
												</garant_dat>
											</xsl:with-param>
										</xsl:call-template>
									</xsl:variable>
									<xsl:for-each select="$var2_resultof_garant_dat/ns0:resource/ns0:Practitioner/ns0:id/@value">
										<xsl:sequence select="fn:string(.)"/>
									</xsl:for-each>
								</xsl:for-each>
							</xsl:with-param>
						</xsl:call-template>
					</xsl:variable>
					<xsl:for-each select="$var3_resultof_ku_z">
						<entry>
							<xsl:sequence select="(./@node(), ./node())"/>
						</entry>
					</xsl:for-each>
				</xsl:for-each>
			</xsl:for-each>
			<xsl:for-each select="$var7_dasta/ns1:is">
				<xsl:variable name="var5_resultof_is" as="node()*">
					<xsl:call-template name="provisio:is">
						<xsl:with-param name="is" as="node()">
							<is xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
								<xsl:sequence select="(./@node(), ./node())"/>
							</is>
						</xsl:with-param>
					</xsl:call-template>
				</xsl:variable>
				<xsl:for-each select="$var5_resultof_is">
					<entry>
						<xsl:sequence select="(./@node(), ./node())"/>
					</entry>
				</xsl:for-each>
			</xsl:for-each>
			<xsl:for-each select="$var7_dasta/ns1:garant_dat">
				<xsl:variable name="var6_resultof_garant_dat" as="node()?">
					<xsl:call-template name="provisio:garant_dat">
						<xsl:with-param name="garant_dat" as="node()">
							<garant_dat xmlns="urn:cz-mzcr:ns:dasta:ds4:ds_dasta">
								<xsl:sequence select="(./@node(), ./node())"/>
							</garant_dat>
						</xsl:with-param>
					</xsl:call-template>
				</xsl:variable>
				<xsl:for-each select="$var6_resultof_garant_dat">
					<entry>
						<xsl:sequence select="(./@node(), ./node())"/>
					</entry>
				</xsl:for-each>
			</xsl:for-each>
		</Bundle>
	</xsl:template>
</xsl:stylesheet>
